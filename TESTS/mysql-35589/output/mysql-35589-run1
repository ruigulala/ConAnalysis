==================
WARNING: ThreadSanitizer: data race (pid=17937)
  Write of size 8 at 0x000002073630 by thread T2 (mutexes: write M459):
    #0 LOGGER::init_error_log(unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:1075:30 (mysqld+0x00000094fde9)
    #1 LOGGER::set_handlers(unsigned int, unsigned int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:1244:3 (mysqld+0x000000951ce8)
    #2 signal_hand /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2754:7 (mysqld+0x000000782f78)

  Previous read of size 8 at 0x000002073630 by main thread:
    #0 LOGGER::error_log_print(loglevel, char const*, __va_list_tag*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:833:50 (mysqld+0x00000094f896)
    #1 error_log_print(loglevel, char const*, __va_list_tag*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:4092:10 (mysqld+0x00000095b84e)
    #2 sql_print_information(char const*, ...) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:4836:3 (mysqld+0x00000094938a)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4444:3 (mysqld+0x0000007845c6)

  Location is global 'logger' of size 184 at 0x0000020735e0 (mysqld+0x000002073630)

  Mutex M459 (0x0000020735e0) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 LOGGER::init_base() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:888:3 (mysqld+0x00000094fd0e)
    #2 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4229:3 (mysqld+0x000000783c48)

  Thread T2 (tid=17941, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 start_signal_handler() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2657:14 (mysqld+0x0000007895b1)
    #2 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4380:3 (mysqld+0x000000784151)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:1075:30 in LOGGER::init_error_log(unsigned int)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17937)
  Write of size 8 at 0x000002073638 by thread T2 (mutexes: write M459):
    #0 LOGGER::init_error_log(unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:1076:30 (mysqld+0x00000094fe05)
    #1 LOGGER::set_handlers(unsigned int, unsigned int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:1244:3 (mysqld+0x000000951ce8)
    #2 signal_hand /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2754:7 (mysqld+0x000000782f78)

  Previous read of size 8 at 0x000002073638 by main thread:
    #0 LOGGER::error_log_print(loglevel, char const*, __va_list_tag*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:833:50 (mysqld+0x00000094f896)
    #1 error_log_print(loglevel, char const*, __va_list_tag*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:4092:10 (mysqld+0x00000095b84e)
    #2 sql_print_information(char const*, ...) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:4836:3 (mysqld+0x00000094938a)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4444:3 (mysqld+0x0000007845c6)

  Location is global 'logger' of size 184 at 0x0000020735e0 (mysqld+0x000002073638)

  Mutex M459 (0x0000020735e0) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 LOGGER::init_base() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:888:3 (mysqld+0x00000094fd0e)
    #2 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4229:3 (mysqld+0x000000783c48)

  Thread T2 (tid=17941, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 start_signal_handler() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2657:14 (mysqld+0x0000007895b1)
    #2 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4380:3 (mysqld+0x000000784151)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:1076:30 in LOGGER::init_error_log(unsigned int)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17937)
  Write of size 1 at 0x00000206a879 by thread T2:
    #0 signal_hand /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2759:12 (mysqld+0x00000078300c)

  Previous read of size 1 at 0x00000206a879 by main thread:
    #0 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4964:11 (mysqld+0x000000789eb5)
    #1 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Location is global 'abort_loop' of size 1 at 0x00000206a879 (mysqld+0x00000206a879)

  Thread T2 (tid=17941, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 start_signal_handler() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2657:14 (mysqld+0x0000007895b1)
    #2 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4380:3 (mysqld+0x000000784151)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2759:12 in signal_hand
==================
==================
WARNING: ThreadSanitizer: data race (pid=17937)
  Read of size 8 at 0x00000206cb30 by thread T3:
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 print_buffer_to_file(loglevel, char const*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:4762:3 (mysqld+0x00000095d7ce)
    #2 vprint_msg_to_log(loglevel, char const*, __va_list_tag*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:4793:3 (mysqld+0x00000094c63b)
    #3 Log_to_file_event_handler::log_error(loglevel, char const*, __va_list_tag*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:727:10 (mysqld+0x00000094c550)
    #4 LOGGER::error_log_print(loglevel, char const*, __va_list_tag*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:834:12 (mysqld+0x00000094f904)
    #5 error_log_print(loglevel, char const*, __va_list_tag*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:4092:10 (mysqld+0x00000095b84e)
    #6 sql_print_information(char const*, ...) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:4836:3 (mysqld+0x00000094938a)
    #7 kill_server(void*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:1113:5 (mysqld+0x00000078034d)
    #8 kill_server_thread /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:1155:3 (mysqld+0x0000007800d0)

  Previous write of size 8 at 0x00000206cb30 by main thread (mutexes: write M475, write M474):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 print_buffer_to_file(loglevel, char const*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:4762:3 (mysqld+0x00000095d7ce)
    #2 vprint_msg_to_log(loglevel, char const*, __va_list_tag*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:4793:3 (mysqld+0x00000094c63b)
    #3 Log_to_file_event_handler::log_error(loglevel, char const*, __va_list_tag*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:727:10 (mysqld+0x00000094c550)
    #4 LOGGER::error_log_print(loglevel, char const*, __va_list_tag*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:834:12 (mysqld+0x00000094f904)
    #5 error_log_print(loglevel, char const*, __va_list_tag*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:4092:10 (mysqld+0x00000095b84e)
    #6 sql_print_information(char const*, ...) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:4836:3 (mysqld+0x00000094938a)
    #7 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4444:3 (mysqld+0x0000007845c6)

  Location is global 'LOCK_error_log' of size 104 at 0x00000206cae0 (mysqld+0x00000206cb30)

  Mutex M475 (0x00000206cb08) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3510:10 (mysqld+0x00000078fcea)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M474 (0x00000206cae0) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3510:10 (mysqld+0x00000078fcea)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T3 (tid=17955, running) created by thread T2 at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 signal_hand /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2764:6 (mysqld+0x00000078307a)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17937)
  Read of size 8 at 0x00000206c990 by main thread:
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4481:10 (mysqld+0x000000784697)

  Previous write of size 8 at 0x00000206c990 by thread T3 (mutexes: write M469, write M468):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 close_connections() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:827:10 (mysqld+0x00000078f022)
    #2 kill_server(void*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:1129:3 (mysqld+0x0000007803c7)
    #3 kill_server_thread /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:1155:3 (mysqld+0x0000007800d0)

  Location is global 'LOCK_thread_count' of size 104 at 0x00000206c940 (mysqld+0x00000206c990)

  Mutex M469 (0x00000206c968) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3507:10 (mysqld+0x00000078fc6f)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M468 (0x00000206c940) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3507:10 (mysqld+0x00000078fc6f)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T3 (tid=17955, running) created by thread T2 at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 signal_hand /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2764:6 (mysqld+0x00000078307a)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17937)
  Read of size 4 at 0x00000206d684 by thread T2:
    #0 signal_hand /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2739:9 (mysqld+0x000000782e20)

  Previous write of size 4 at 0x00000206d684 by main thread:
    #0 clean_up(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:1223:19 (mysqld+0x000000780617)
    #1 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4507:3 (mysqld+0x0000007847be)

  Location is global 'cleanup_done' of size 4 at 0x00000206d684 (mysqld+0x00000206d684)

  Thread T2 (tid=17941, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 start_signal_handler() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2657:14 (mysqld+0x0000007895b1)
    #2 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4380:3 (mysqld+0x000000784151)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2739:9 in signal_hand
==================
==================
WARNING: ThreadSanitizer: data race (pid=17937)
  Read of size 8 at 0x00000207ceb8 by main thread:
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 my_thread_end /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_thr_init.c:357:5 (mysqld+0x000000d6356a)
    #2 my_end /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_init.c:223:3 (mysqld+0x000000cee983)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4510:3 (mysqld+0x0000007847f2)

  Previous write of size 8 at 0x00000207ceb8 by thread T3 (mutexes: write M446, write M445):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 my_thread_end /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_thr_init.c:357:5 (mysqld+0x000000d6356a)
    #2 unireg_end() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:1193:3 (mysqld+0x00000078059b)
    #3 kill_server(void*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:1134:5 (mysqld+0x0000007803ea)
    #4 kill_server_thread /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:1155:3 (mysqld+0x0000007800d0)

  Location is global 'THR_LOCK_threads' of size 104 at 0x00000207ce68 (mysqld+0x00000207ceb8)

  Mutex M446 (0x00000207ce90) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 my_thread_global_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_thr_init.c:149:3 (mysqld+0x000000d62c85)
    #3 my_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_init.c:81:7 (mysqld+0x000000cee1d1)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4215:3 (mysqld+0x000000783bf0)

  Mutex M445 (0x00000207ce68) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 my_thread_global_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_thr_init.c:149:3 (mysqld+0x000000d62c85)
    #3 my_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_init.c:81:7 (mysqld+0x000000cee1d1)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4215:3 (mysqld+0x000000783bf0)

  Thread T3 (tid=17955, finished) created by thread T2 at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 signal_hand /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2764:6 (mysqld+0x00000078307a)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17937)
  Read of size 4 at 0x00000207b370 by thread T2:
    #0 _db_keyword_ /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/dbug/dbug.c:1658:11 (mysqld+0x000000d6f503)
    #1 _db_doprnt_ /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/dbug/dbug.c:1150:7 (mysqld+0x000000d6f118)
    #2 signal_hand /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2741:7 (mysqld+0x000000782e58)

  Previous write of size 4 at 0x00000207b370 by main thread (mutexes: write M453):
    #0 _db_end_ /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/dbug/dbug.c:1521:22 (mysqld+0x000000d70206)
    #1 my_end /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_init.c:220:5 (mysqld+0x000000cee97e)
    #2 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4510:3 (mysqld+0x0000007847f2)

  Location is global 'init_settings' of size 584 at 0x00000207b370 (mysqld+0x00000207b370)

  Mutex M453 (0x00000207d0e0) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 code_state /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/dbug/dbug.c:334:5 (mysqld+0x000000d67ce0)
    #3 _db_enter_ /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/dbug/dbug.c:967:3 (mysqld+0x000000d6dbd6)
    #4 my_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_init.c:100:5 (mysqld+0x000000cee22b)
    #5 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4215:3 (mysqld+0x000000783bf0)

  Thread T2 (tid=17941, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 start_signal_handler() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2657:14 (mysqld+0x0000007895b1)
    #2 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4380:3 (mysqld+0x000000784151)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/dbug/dbug.c:1658:11 in _db_keyword_
==================
ThreadSanitizer: reported 8 warnings
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 8 at 0x00000207b2b8 by thread T2:
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 process_alarm /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_alarm.c:324:3 (mysqld+0x000000d58d7c)
    #2 signal_hand /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2799:7 (mysqld+0x000000783292)

  Previous write of size 8 at 0x00000207b2b8 by thread T3 (mutexes: write M560, write M559):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 thr_alarm /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_alarm.c:167:3 (mysqld+0x000000d58f00)
    #2 my_real_read(st_net*, unsigned long*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/net_serv.cc:829:11 (mysqld+0x0000007690aa)
    #3 my_net_read /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/net_serv.cc:996:11 (mysqld+0x000000767e0b)
    #4 check_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:753:12 (mysqld+0x00000079c6fa)
    #5 login_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:955:10 (mysqld+0x00000079a933)
    #6 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1107:9 (mysqld+0x00000079a5e2)

  Location is global 'LOCK_alarm' of size 104 at 0x00000207b268 (mysqld+0x00000207b2b8)

  Mutex M560 (0x00000207b290) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thr_alarm /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_alarm.c:78:3 (mysqld+0x000000d587dd)
    #3 signal_hand /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2686:3 (mysqld+0x000000782bcf)

  Mutex M559 (0x00000207b268) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 init_thr_alarm /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_alarm.c:78:3 (mysqld+0x000000d587dd)
    #3 signal_hand /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2686:3 (mysqld+0x000000782bcf)

  Thread T2 (tid=17962, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 start_signal_handler() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2657:14 (mysqld+0x0000007895b1)
    #2 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4380:3 (mysqld+0x000000784151)

  Thread T3 (tid=17969, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 8 at 0x00000207ceb8 by thread T4:
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 my_thread_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_thr_init.c:294:3 (mysqld+0x000000d62f48)
    #2 init_new_connection_handler_thread() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:618:7 (mysqld+0x00000079a245)
    #3 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1080:7 (mysqld+0x00000079a422)

  Previous write of size 8 at 0x00000207ceb8 by thread T3 (mutexes: write M446, write M445):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 my_thread_end /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_thr_init.c:357:5 (mysqld+0x000000d6356a)
    #2 one_thread_per_connection_end(THD*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:1919:3 (mysqld+0x000000781b26)
    #3 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1122:9 (mysqld+0x00000079a771)

  Location is global 'THR_LOCK_threads' of size 104 at 0x00000207ce68 (mysqld+0x00000207ceb8)

  Mutex M446 (0x00000207ce90) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 my_thread_global_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_thr_init.c:149:3 (mysqld+0x000000d62c85)
    #3 my_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_init.c:81:7 (mysqld+0x000000cee1d1)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4215:3 (mysqld+0x000000783bf0)

  Mutex M445 (0x00000207ce68) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 my_thread_global_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_thr_init.c:149:3 (mysqld+0x000000d62c85)
    #3 my_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_init.c:81:7 (mysqld+0x000000cee1d1)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4215:3 (mysqld+0x000000783bf0)

  Thread T4 (tid=17973, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T3 (tid=17969, finished) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 8 at 0x00000206ce70 by thread T4:
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 check_user(THD*, enum_server_command, char const*, unsigned int, char const*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:327:3 (mysqld+0x000000797ad2)
    #2 check_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:897:10 (mysqld+0x00000079d93c)
    #3 login_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:955:10 (mysqld+0x00000079a933)
    #4 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1107:9 (mysqld+0x00000079a5e2)

  Previous write of size 8 at 0x00000206ce70 by main thread (mutexes: write M495, write M494):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 THD::init() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_class.cc:755:3 (mysqld+0x00000074d95a)
    #2 THD::THD() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_class.cc:638:3 (mysqld+0x00000074d314)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5102:20 (mysqld+0x00000078a3ce)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Location is global 'LOCK_global_system_variables' of size 104 at 0x00000206ce20 (mysqld+0x00000206ce70)

  Mutex M495 (0x00000206ce48) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3520:10 (mysqld+0x00000078fe92)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M494 (0x00000206ce20) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3520:10 (mysqld+0x00000078fe92)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T4 (tid=17973, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 8 at 0x00000206d010 by thread T4:
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 check_user(THD*, enum_server_command, char const*, unsigned int, char const*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:405:9 (mysqld+0x0000007982b7)
    #2 check_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:897:10 (mysqld+0x00000079d93c)
    #3 login_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:955:10 (mysqld+0x00000079a933)
    #4 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1107:9 (mysqld+0x00000079a5e2)

  Previous write of size 8 at 0x00000206d010 by main thread (mutexes: write M504, write M503):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4869:3 (mysqld+0x00000078ad88)
    #2 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Location is global 'LOCK_connection_count' of size 104 at 0x00000206cfc0 (mysqld+0x00000206d010)

  Mutex M504 (0x00000206cfe8) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3525:10 (mysqld+0x00000078ff54)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M503 (0x00000206cfc0) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3525:10 (mysqld+0x00000078ff54)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T4 (tid=17973, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 8 at 0x00000206ce70 by thread T5:
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 check_user(THD*, enum_server_command, char const*, unsigned int, char const*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:327:3 (mysqld+0x000000797ad2)
    #2 check_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:897:10 (mysqld+0x00000079d93c)
    #3 login_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:955:10 (mysqld+0x00000079a933)
    #4 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1107:9 (mysqld+0x00000079a5e2)

  Previous write of size 8 at 0x00000206ce70 by main thread (mutexes: write M495, write M494):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 THD::init() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_class.cc:755:3 (mysqld+0x00000074d95a)
    #2 THD::THD() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_class.cc:638:3 (mysqld+0x00000074d314)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5102:20 (mysqld+0x00000078a3ce)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Location is global 'LOCK_global_system_variables' of size 104 at 0x00000206ce20 (mysqld+0x00000206ce70)

  Mutex M495 (0x00000206ce48) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3520:10 (mysqld+0x00000078fe92)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M494 (0x00000206ce20) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3520:10 (mysqld+0x00000078fe92)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 8 at 0x00000206c990 by thread T4:
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:972:3 (mysqld+0x00000079f46f)
    #2 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #3 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x00000206c990 by thread T6 (mutexes: write M469, write M468):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:972:3 (mysqld+0x00000079f46f)
    #2 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #3 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'LOCK_thread_count' of size 104 at 0x00000206c940 (mysqld+0x00000206c990)

  Mutex M469 (0x00000206c968) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3507:10 (mysqld+0x00000078fc6f)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M468 (0x00000206c940) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3507:10 (mysqld+0x00000078fc6f)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T4 (tid=17973, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Write of size 1 at 0x000002074688 by thread T6:
    #0 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:625:14 (mysqld+0x00000096923b)
    #1 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #2 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #3 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #4 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #5 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #6 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #7 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 1 at 0x000002074688 by thread T4:
    #0 acl_getroot(THD*, user_resources*, char const*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:879:8 (mysqld+0x00000096992c)
    #1 check_user(THD*, enum_server_command, char const*, unsigned int, char const*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:350:12 (mysqld+0x000000797c84)
    #2 check_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:897:10 (mysqld+0x00000079d93c)
    #3 login_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:955:10 (mysqld+0x00000079a933)
    #4 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1107:9 (mysqld+0x00000079a5e2)

  Location is global 'initialized' of size 1 at 0x000002074688 (mysqld+0x000002074688)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=17973, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:625:14 in acl_load(THD*, TABLE_LIST*)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Write of size 4 at 0x7d7c0000d554 by thread T5 (mutexes: write M467, write M438, write M647):
    #0 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:617:20 (mysqld+0x000000c1105b)
    #1 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #2 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #3 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #4 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #5 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #6 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #7 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #8 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #9 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #10 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #11 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #12 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #13 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #14 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #15 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 4 at 0x7d7c0000d554 by thread T6:
    #0 mi_extra /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_extra.c:105:6 (mysqld+0x000000c21bfc)
    #1 ha_myisam::extra_opt(ha_extra_function, unsigned long) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1862:10 (mysqld+0x000000c09344)
    #2 init_read_record(st_read_record*, THD*, st_table*, SQL_SELECT*, int, bool, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/records.cc:261:7 (mysqld+0x000000a1f76c)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:565:3 (mysqld+0x000000968bdc)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 3240 at 0x7d7c0000d200 allocated by main thread:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1113:7 (mysqld+0x000000b8b274)
    #13 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #14 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M438 (0x00000207ce28) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 my_thread_global_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_thr_init.c:145:3 (mysqld+0x000000d62bd0)
    #3 my_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_init.c:81:7 (mysqld+0x000000cee1d1)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4215:3 (mysqld+0x000000783bf0)

  Mutex M647 (0x7d7c0000d688) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1113:7 (mysqld+0x000000b8b274)
    #12 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #13 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:617:20 in mi_open
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Write of size 4 at 0x00000206a8d8 by thread T4:
    #0 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6740:16 (mysqld+0x0000007a77b8)
    #1 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #2 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #3 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #4 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #5 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x00000206a8d8 by thread T5:
    #0 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6740:16 (mysqld+0x0000007a77b8)
    #1 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #2 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #3 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #4 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #5 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'select_errors' of size 4 at 0x00000206a8d8 (mysqld+0x00000206a8d8)

  Thread T4 (tid=17973, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6740:16 in reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 8 at 0x7d780002ecb0 by thread T6:
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:52:3 (mysqld+0x000000c41bff)
    #2 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #3 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #4 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #5 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #6 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #7 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:739:3 (mysqld+0x000000966a4c)
    #8 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #9 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #10 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #11 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #12 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #13 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d780002ecb0 by thread T5 (mutexes: write M467, write M438, write M690, write M689):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:614:3 (mysqld+0x000000c10f9a)
    #2 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #3 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #4 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2872 at 0x7d780002e800 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M438 (0x00000207ce28) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 my_thread_global_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_thr_init.c:145:3 (mysqld+0x000000d62bd0)
    #3 my_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_init.c:81:7 (mysqld+0x000000cee1d1)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4215:3 (mysqld+0x000000783bf0)

  Mutex M690 (0x7d780002ec88) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M689 (0x7d780002ec60) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Write of size 4 at 0x7d780002eb48 by thread T5 (mutexes: write M690):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:182:21 (mysqld+0x000000c4318e)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 lock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:364:16 (mysqld+0x000000774971)
    #4 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:260:34 (mysqld+0x000000772ea1)
    #5 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #6 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #7 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #8 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #9 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #10 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #11 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #12 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #13 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #14 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 4 at 0x7d780002eb48 by thread T6:
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 (mysqld+0x000000c418e7)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:739:3 (mysqld+0x000000966a4c)
    #7 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2872 at 0x7d780002e800 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M690 (0x7d780002ec88) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:182:21 in mi_lock_database
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 8 at 0x00000206dac8 by thread T4:
    #0 check_stack_overrun(THD*, long, unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5564:19 (mysqld+0x0000007c29d6)
    #1 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2527:7 (mysqld+0x000000856714)
    #2 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #3 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #4 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #5 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x00000206dac8 by thread T5:
    #0 check_stack_overrun(THD*, long, unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5564:17 (mysqld+0x0000007c2a5f)
    #1 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2527:7 (mysqld+0x000000856714)
    #2 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #3 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #4 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #5 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'max_stack_used' of size 8 at 0x00000206dac8 (mysqld+0x00000206dac8)

  Thread T4 (tid=17973, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5564:19 in check_stack_overrun(THD*, long, unsigned char*)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 8 at 0x7d80000044b0 by thread T6:
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:52:3 (mysqld+0x000000c41bff)
    #2 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #3 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #4 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #5 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #6 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #7 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:739:3 (mysqld+0x000000966a4c)
    #8 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #9 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #10 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #11 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #12 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #13 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d80000044b0 by thread T5 (mutexes: write M656, write M655):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:52:3 (mysqld+0x000000c41bff)
    #2 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #3 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #4 lock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:364:16 (mysqld+0x000000774971)
    #5 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:260:34 (mysqld+0x000000772ea1)
    #6 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #7 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #8 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #9 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #10 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #11 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #12 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #13 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #14 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #15 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 3800 at 0x7d8000004000 allocated by main thread:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1130:7 (mysqld+0x000000b8b308)
    #13 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #14 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Mutex M656 (0x7d8000004488) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1130:7 (mysqld+0x000000b8b308)
    #12 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #13 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Mutex M655 (0x7d8000004460) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1130:7 (mysqld+0x000000b8b308)
    #12 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #13 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 4 at 0x7d780002eb4c by thread T5 (mutexes: write M694):
    #0 _mi_read_rnd_static_record /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_statrec.c:258:5 (mysqld+0x000000c48be6)
    #1 mi_scan /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_scan.c:44:3 (mysqld+0x000000c45f94)
    #2 ha_myisam::rnd_next(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1750:13 (mysqld+0x000000c0857b)
    #3 rr_sequential(st_read_record*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/records.cc:381:15 (mysqld+0x000000a220f5)
    #4 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:331:12 (mysqld+0x000000966e1b)
    #5 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d780002eb4c by thread T6 (mutexes: write M690):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:62:7 (mysqld+0x000000c41da8)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:739:3 (mysqld+0x000000966a4c)
    #7 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2872 at 0x7d780002e800 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M690 (0x7d780002ec88) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_statrec.c:258:5 in _mi_read_rnd_static_record
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 8 at 0x00000206c928 by thread T4:
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2705:3 (mysqld+0x00000085771a)
    #2 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #3 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #4 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #5 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x00000206c928 by thread T5 (mutexes: write M467, write M466):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2705:3 (mysqld+0x00000085771a)
    #2 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #3 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #4 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #5 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'LOCK_open' of size 104 at 0x00000206c8d8 (mysqld+0x00000206c928)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M466 (0x00000206c8d8) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T4 (tid=17973, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 8 at 0x00000207a2b0 by thread T6 (mutexes: write M467, write M696):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 plugin_lock(THD*, st_plugin_int***) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_plugin.cc:654:3 (mysqld+0x000000b90ab8)
    #2 ha_lock_engine(THD*, handlerton*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:169:12 (mysqld+0x000000a2cfac)
    #3 ha_resolve_by_legacy_type(THD*, legacy_db_type) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:193:18 (mysqld+0x000000a2d097)
    #4 ha_checktype(THD*, legacy_db_type, bool, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:208:21 (mysqld+0x000000a2d160)
    #5 open_binary_frm(THD*, st_table_share*, unsigned char*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:718:38 (mysqld+0x0000008768a2)
    #6 open_table_def(THD*, st_table_share*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:630:12 (mysqld+0x0000008762be)
    #7 get_table_share(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:377:7 (mysqld+0x000000849690)
    #8 get_table_share_with_create(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:456:10 (mysqld+0x00000086ed96)
    #9 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3837:16 (mysqld+0x000000854892)
    #10 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #11 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #12 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #13 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #14 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #15 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #16 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #17 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #18 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #19 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #20 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x00000207a2b0 by thread T4 (mutexes: write M554, write M553):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 plugin_unlock_list(THD*, st_plugin_int***, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_plugin.cc:986:3 (mysqld+0x000000b91c99)
    #2 lex_end(st_lex*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_lex.cc:378:3 (mysqld+0x0000005a6168)
    #3 THD::end_statement() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_class.cc:2369:3 (mysqld+0x000000758e53)
    #4 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5948:5 (mysqld+0x0000007a45bc)
    #5 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #6 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #7 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'LOCK_plugin' of size 104 at 0x00000207a260 (mysqld+0x00000207a2b0)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M696 (0x7d600001d918) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 alloc_table_share(TABLE_LIST*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:320:5 (mysqld+0x0000008750c2)
    #3 get_table_share(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:346:16 (mysqld+0x00000084956a)
    #4 get_table_share_with_create(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:456:10 (mysqld+0x00000086ed96)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3837:16 (mysqld+0x000000854892)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M554 (0x00000207a288) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 plugin_init(int*, char**, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_plugin.cc:1115:3 (mysqld+0x000000b9204f)
    #3 init_server_components() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3882:9 (mysqld+0x000000787f55)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4354:7 (mysqld+0x0000007840c8)

  Mutex M553 (0x00000207a260) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 plugin_init(int*, char**, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_plugin.cc:1115:3 (mysqld+0x000000b9204f)
    #3 init_server_components() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3882:9 (mysqld+0x000000787f55)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4354:7 (mysqld+0x0000007840c8)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=17973, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 4 at 0x7d800000434c by thread T5 (mutexes: write M694):
    #0 _mi_read_rnd_dynamic_record /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_dynrec.c:1858:3 (mysqld+0x000000c62904)
    #1 mi_scan /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_scan.c:44:3 (mysqld+0x000000c45f94)
    #2 ha_myisam::rnd_next(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1750:13 (mysqld+0x000000c0857b)
    #3 rr_sequential(st_read_record*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/records.cc:381:15 (mysqld+0x000000a220f5)
    #4 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:422:12 (mysqld+0x0000009677f5)
    #5 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d800000434c by thread T6 (mutexes: write M656):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:62:7 (mysqld+0x000000c41da8)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:739:3 (mysqld+0x000000966a4c)
    #7 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 3800 at 0x7d8000004000 allocated by main thread:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1130:7 (mysqld+0x000000b8b308)
    #13 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #14 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M656 (0x7d8000004488) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1130:7 (mysqld+0x000000b8b308)
    #12 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #13 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_dynrec.c:1858:3 in _mi_read_rnd_dynamic_record
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Write of size 8 at 0x00000207b310 by thread T6 (mutexes: write M707):
    #0 thr_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:563:7 (mysqld+0x000000d5b1a6)
    #1 thr_multi_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:973:39 (mysqld+0x000000d5e4b1)
    #2 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:276:39 (mysqld+0x0000007731c4)
    #3 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #4 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #5 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #6 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #7 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x00000207b310 by thread T5 (mutexes: write M654):
    #0 thr_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:563:7 (mysqld+0x000000d5b1a6)
    #1 thr_multi_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:973:39 (mysqld+0x000000d5e4b1)
    #2 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:276:39 (mysqld+0x0000007731c4)
    #3 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #4 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #5 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #6 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #7 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'locks_immediate' of size 8 at 0x00000207b310 (mysqld+0x00000207b310)

  Mutex M707 (0x7d740000d5a8) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 thr_lock_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:319:3 (mysqld+0x000000d5a2be)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:524:5 (mysqld+0x000000c102ff)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M654 (0x7d80000043a8) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 thr_lock_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:319:3 (mysqld+0x000000d5a2be)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:524:5 (mysqld+0x000000c102ff)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1130:7 (mysqld+0x000000b8b308)
    #13 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #14 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:563:7 in thr_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 8 at 0x7d780002ebd0 by thread T4:
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 thr_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:503:3 (mysqld+0x000000d5a8e5)
    #2 thr_multi_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:973:39 (mysqld+0x000000d5e4b1)
    #3 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:276:39 (mysqld+0x0000007731c4)
    #4 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #5 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #6 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #7 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #8 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #9 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #10 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #11 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #12 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #13 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d780002ebd0 by thread T5 (mutexes: write M688, write M687):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 thr_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:503:3 (mysqld+0x000000d5a8e5)
    #2 thr_multi_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:973:39 (mysqld+0x000000d5e4b1)
    #3 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:276:39 (mysqld+0x0000007731c4)
    #4 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #5 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #6 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #7 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #8 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #9 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #10 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #11 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #12 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #13 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2872 at 0x7d780002e800 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M688 (0x7d780002eba8) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 thr_lock_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:319:3 (mysqld+0x000000d5a2be)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:524:5 (mysqld+0x000000c102ff)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M687 (0x7d780002eb80) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 thr_lock_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:319:3 (mysqld+0x000000d5a2be)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:524:5 (mysqld+0x000000c102ff)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=17973, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 1 at 0x7d700000bf74 by thread T5 (mutexes: write M694):
    #0 bitmap_is_set(st_bitmap const*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/../include/my_bitmap.h:141:10 (mysqld+0x000000700490)
    #1 Field_blob::val_str(String*, String*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/field.cc:7821:3 (mysqld+0x00000072b1be)
    #2 Field::val_str(String*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./field.h:121:48 (mysqld+0x0000005eda76)
    #3 get_field(st_mem_root*, Field*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:2614:3 (mysqld+0x000000885d4c)
    #4 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:513:28 (mysqld+0x00000096822d)
    #5 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d700000bf74 by thread T6 (mutexes: write M467):
    #0 bitmap_is_set_all /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_bitmap.c:299:23 (mysqld+0x000000d4a00b)
    #1 handler::ha_reset() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4571:3 (mysqld+0x000000a3e464)
    #2 close_thread_table(THD*, st_table**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1403:5 (mysqld+0x00000084f783)
    #3 close_open_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1195:23 (mysqld+0x00000084f0ec)
    #4 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1347:5 (mysqld+0x00000084eb79)
    #5 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:739:3 (mysqld+0x000000966a4c)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 1984 at 0x7d700000b800 allocated by main thread:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 alloc_root /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_alloc.c:201:30 (mysqld+0x000000d1412d)
    #3 sql_alloc(unsigned long) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/thr_malloc.cc:65:10 (mysqld+0x0000006b2a44)
    #4 Field::operator new(unsigned long) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./field.h:54:12 (mysqld+0x0000005ebf88)
    #5 make_field(st_table_share*, unsigned char*, unsigned int, unsigned char*, unsigned char, unsigned int, enum_field_types, charset_info_st*, Field::geometry_type, Field::utype, st_typelib*, char const*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/field.cc:10026:9 (mysqld+0x000000739b0f)
    #6 open_binary_frm(THD*, st_table_share*, unsigned char*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1268:7 (mysqld+0x00000087c192)
    #7 open_table_def(THD*, st_table_share*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:630:12 (mysqld+0x0000008762be)
    #8 get_table_share(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:377:7 (mysqld+0x000000849690)
    #9 get_table_share_with_create(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:456:10 (mysqld+0x00000086ed96)
    #10 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3837:16 (mysqld+0x000000854892)
    #11 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #12 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #13 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #14 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #15 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1130:7 (mysqld+0x000000b8b308)
    #16 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #17 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/../include/my_bitmap.h:141:10 in bitmap_is_set(st_bitmap const*, unsigned int)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 4 at 0x00000206c934 by thread T6:
    #0 close_open_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1188:3 (mysqld+0x00000084efb9)
    #1 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1347:5 (mysqld+0x00000084eb79)
    #2 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3821:3 (mysqld+0x00000097b54e)
    #3 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #4 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #5 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x00000206c934 by thread T4 (mutexes: write M467, write M466):
    #0 safe_mutex_unlock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:192:12 (mysqld+0x000000d61bd7)
    #1 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2935:3 (mysqld+0x000000858a0f)
    #2 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #3 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #4 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #5 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'LOCK_open' of size 104 at 0x00000206c8d8 (mysqld+0x00000206c934)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M466 (0x00000206c8d8) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=17973, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1188:3 in close_open_tables(THD*)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 8 at 0x7d4000007590 by thread T4:
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:710:5 (mysqld+0x0000009667d9)
    #2 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #3 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #4 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #5 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #6 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #7 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d4000007590 by thread T5 (mutexes: write M694, write M693):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:710:5 (mysqld+0x0000009667d9)
    #2 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #3 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #4 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #5 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #6 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #7 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 256 at 0x7d4000007500 allocated by main thread:
    #0 operator new(unsigned long) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cc:45 (mysqld+0x0000005a12f3)
    #1 acl_init(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:263:14 (mysqld+0x00000096615f)
    #2 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4382:32 (mysqld+0x000000784182)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M693 (0x7d4000007540) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=17973, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 1 at 0x7d600000ab80 by thread T5 (mutexes: write M694):
    #0 bitmap_is_set(st_bitmap const*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/../include/my_bitmap.h:141:10 (mysqld+0x000000700490)
    #1 Field_string::val_str(String*, String*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/field.cc:6609:3 (mysqld+0x000000722b9e)
    #2 Field::val_str(String*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./field.h:121:48 (mysqld+0x0000005eda76)
    #3 get_field(st_mem_root*, Field*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:2614:3 (mysqld+0x000000885d4c)
    #4 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:571:30 (mysqld+0x000000968cab)
    #5 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d600000ab80 by thread T6 (mutexes: write M467):
    #0 bitmap_is_set_all /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_bitmap.c:299:23 (mysqld+0x000000d4a00b)
    #1 handler::ha_reset() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4571:3 (mysqld+0x000000a3e464)
    #2 close_thread_table(THD*, st_table**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1403:5 (mysqld+0x00000084f783)
    #3 close_open_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1195:23 (mysqld+0x00000084f0ec)
    #4 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1347:5 (mysqld+0x00000084eb79)
    #5 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:739:3 (mysqld+0x000000966a4c)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 992 at 0x7d600000a800 allocated by main thread:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 alloc_root /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_alloc.c:201:30 (mysqld+0x000000d1412d)
    #3 open_binary_frm(THD*, st_table_share*, unsigned char*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1050:2 (mysqld+0x00000087a669)
    #4 open_table_def(THD*, st_table_share*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:630:12 (mysqld+0x0000008762be)
    #5 get_table_share(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:377:7 (mysqld+0x000000849690)
    #6 get_table_share_with_create(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:456:10 (mysqld+0x00000086ed96)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3837:16 (mysqld+0x000000854892)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1113:7 (mysqld+0x000000b8b274)
    #13 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #14 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/../include/my_bitmap.h:141:10 in bitmap_is_set(st_bitmap const*, unsigned int)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Write of size 4 at 0x0000020746c8 by thread T6 (mutexes: write M507):
    #0 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3831:16 (mysqld+0x00000097b59a)
    #1 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #2 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #3 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #4 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #5 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #6 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x0000020746c8 by thread T5 (mutexes: write M694):
    #0 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:322:16 (mysqld+0x000000966d09)
    #1 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #2 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #3 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #4 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #5 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #6 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #7 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'grant_version' of size 4 at 0x0000020746c8 (mysqld+0x0000020746c8)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3831:16 in grant_reload(THD*)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 4 at 0x7d7c0000d54c by thread T5 (mutexes: write M694):
    #0 _mi_read_rnd_static_record /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_statrec.c:258:5 (mysqld+0x000000c48be6)
    #1 mi_scan /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_scan.c:44:3 (mysqld+0x000000c45f94)
    #2 ha_myisam::rnd_next(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1750:13 (mysqld+0x000000c0857b)
    #3 rr_sequential(st_read_record*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/records.cc:381:15 (mysqld+0x000000a220f5)
    #4 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:568:12 (mysqld+0x000000968c29)
    #5 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d7c0000d54c by thread T4 (mutexes: write M647):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:183:23 (mysqld+0x000000c431d6)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 lock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:364:16 (mysqld+0x000000774971)
    #4 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:260:34 (mysqld+0x000000772ea1)
    #5 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #6 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #7 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #8 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #9 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #10 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #11 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #12 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #13 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #14 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 3240 at 0x7d7c0000d200 allocated by main thread:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1113:7 (mysqld+0x000000b8b274)
    #13 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #14 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M647 (0x7d7c0000d688) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1113:7 (mysqld+0x000000b8b274)
    #12 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #13 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=17973, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_statrec.c:258:5 in _mi_read_rnd_static_record
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Write of size 4 at 0x7d780002eb54 by thread T6 (mutexes: write M467, write M438, write M690):
    #0 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:617:20 (mysqld+0x000000c1105b)
    #1 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #2 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #3 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #4 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #5 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #6 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #7 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #8 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #9 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #10 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #11 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #12 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #13 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #14 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #15 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 4 at 0x7d780002eb54 by thread T5 (mutexes: write M694):
    #0 mi_extra /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_extra.c:105:6 (mysqld+0x000000c21bfc)
    #1 ha_myisam::extra_opt(ha_extra_function, unsigned long) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1862:10 (mysqld+0x000000c09344)
    #2 init_read_record(st_read_record*, THD*, st_table*, SQL_SELECT*, int, bool, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/records.cc:261:7 (mysqld+0x000000a1f76c)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:327:3 (mysqld+0x000000966dce)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2872 at 0x7d780002e800 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M438 (0x00000207ce28) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 my_thread_global_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_thr_init.c:145:3 (mysqld+0x000000d62bd0)
    #3 my_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_init.c:81:7 (mysqld+0x000000cee1d1)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4215:3 (mysqld+0x000000783bf0)

  Mutex M690 (0x7d780002ec88) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:617:20 in mi_open
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 4 at 0x7d780002eb54 by thread T4 (mutexes: write M694):
    #0 mi_extra /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_extra.c:105:6 (mysqld+0x000000c21bfc)
    #1 ha_myisam::extra_opt(ha_extra_function, unsigned long) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1862:10 (mysqld+0x000000c09344)
    #2 init_read_record(st_read_record*, THD*, st_table*, SQL_SELECT*, int, bool, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/records.cc:261:7 (mysqld+0x000000a1f76c)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:327:3 (mysqld+0x000000966dce)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d780002eb54 by thread T6 (mutexes: write M467, write M438, write M690):
    #0 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:617:20 (mysqld+0x000000c1105b)
    #1 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #2 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #3 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #4 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #5 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #6 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #7 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #8 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #9 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #10 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #11 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #12 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #13 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #14 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #15 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2872 at 0x7d780002e800 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M438 (0x00000207ce28) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 my_thread_global_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_thr_init.c:145:3 (mysqld+0x000000d62bd0)
    #3 my_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_init.c:81:7 (mysqld+0x000000cee1d1)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4215:3 (mysqld+0x000000783bf0)

  Mutex M690 (0x7d780002ec88) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=17973, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_extra.c:105:6 in mi_extra
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 4 at 0x7d8000004354 by thread T4 (mutexes: write M694):
    #0 mi_extra /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_extra.c:105:6 (mysqld+0x000000c21bfc)
    #1 ha_myisam::extra_opt(ha_extra_function, unsigned long) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1862:10 (mysqld+0x000000c09344)
    #2 init_read_record(st_read_record*, THD*, st_table*, SQL_SELECT*, int, bool, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/records.cc:261:7 (mysqld+0x000000a1f76c)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:377:3 (mysqld+0x0000009673f1)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d8000004354 by thread T6 (mutexes: write M467, write M438, write M656):
    #0 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:617:20 (mysqld+0x000000c1105b)
    #1 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #2 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #3 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #4 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #5 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #6 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #7 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #8 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #9 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #10 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #11 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #12 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #13 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #14 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #15 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 3800 at 0x7d8000004000 allocated by main thread:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1130:7 (mysqld+0x000000b8b308)
    #13 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #14 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M438 (0x00000207ce28) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 my_thread_global_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_thr_init.c:145:3 (mysqld+0x000000d62bd0)
    #3 my_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_init.c:81:7 (mysqld+0x000000cee1d1)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4215:3 (mysqld+0x000000783bf0)

  Mutex M656 (0x7d8000004488) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1130:7 (mysqld+0x000000b8b308)
    #12 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #13 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Thread T4 (tid=17973, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_extra.c:105:6 in mi_extra
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 4 at 0x7d8000004344 by thread T4:
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 (mysqld+0x000000c41920)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:739:3 (mysqld+0x000000966a4c)
    #7 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d8000004344 by thread T6 (mutexes: write M656):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:61:9 (mysqld+0x000000c41d5d)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 change_password(THD*, char const*, char const*, char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:1654:3 (mysqld+0x00000096c286)
    #7 set_var_password::update(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/set_var.cc:3671:10 (mysqld+0x0000007d9e5c)
    #8 sql_set_variables(THD*, List<set_var_base>*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/set_var.cc:3450:15 (mysqld+0x0000007d8b5d)
    #9 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3450:16 (mysqld+0x0000007b1cb1)
    #10 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #11 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #12 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #13 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 3800 at 0x7d8000004000 allocated by main thread:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1130:7 (mysqld+0x000000b8b308)
    #13 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #14 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Mutex M656 (0x7d8000004488) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1130:7 (mysqld+0x000000b8b308)
    #12 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #13 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Thread T4 (tid=17973, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 in mi_lock_database
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 4 at 0x7d80000040ec by thread T4:
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 (mysqld+0x000000c41997)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:739:3 (mysqld+0x000000966a4c)
    #7 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d80000040ec by thread T6:
    [failed to restore the stack]

  Location is heap block of size 3800 at 0x7d8000004000 allocated by main thread:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1130:7 (mysqld+0x000000b8b308)
    #13 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #14 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Thread T4 (tid=17973, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 in mi_lock_database
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 4 at 0x7d8000004344 by thread T5:
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 (mysqld+0x000000c41920)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:739:3 (mysqld+0x000000966a4c)
    #7 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d8000004344 by thread T6 (mutexes: write M656):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:232:21 (mysqld+0x000000c43881)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 lock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:364:16 (mysqld+0x000000774971)
    #4 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:260:34 (mysqld+0x000000772ea1)
    #5 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #6 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #7 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #8 open_grant_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:5048:7 (mysqld+0x00000098300e)
    #9 mysql_drop_user(THD*, List<st_lex_user>&) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:5709:16 (mysqld+0x000000983da7)
    #10 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3796:16 (mysqld+0x0000007b4876)
    #11 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #12 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #13 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #14 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 3800 at 0x7d8000004000 allocated by main thread:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1130:7 (mysqld+0x000000b8b308)
    #13 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #14 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Mutex M656 (0x7d8000004488) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1130:7 (mysqld+0x000000b8b308)
    #12 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #13 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 in mi_lock_database
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 8 at 0x7d780002e0b0 by thread T4 (mutexes: write M467, write M438):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:614:3 (mysqld+0x000000c10f9a)
    #2 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #3 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #4 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d780002e0b0 by thread T6 (mutexes: write M700, write M699):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:52:3 (mysqld+0x000000c41bff)
    #2 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #3 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #4 lock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:364:16 (mysqld+0x000000774971)
    #5 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:260:34 (mysqld+0x000000772ea1)
    #6 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #7 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #8 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #9 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #10 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #11 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #12 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #13 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #14 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #15 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2640 at 0x7d780002dc00 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M438 (0x00000207ce28) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 my_thread_global_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_thr_init.c:145:3 (mysqld+0x000000d62bd0)
    #3 my_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_init.c:81:7 (mysqld+0x000000cee1d1)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4215:3 (mysqld+0x000000783bf0)

  Mutex M700 (0x7d780002e088) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M699 (0x7d780002e060) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=17973, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 8 at 0x00000206c938 by thread T6:
    #0 close_open_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1188:3 (mysqld+0x00000084efe6)
    #1 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1347:5 (mysqld+0x00000084eb79)
    #2 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3821:3 (mysqld+0x00000097b54e)
    #3 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #4 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #5 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x00000206c938 by thread T4 (mutexes: write M467, write M466):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:158:13 (mysqld+0x000000d6179d)
    #1 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2705:3 (mysqld+0x00000085771a)
    #2 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #3 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #4 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #5 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'LOCK_open' of size 104 at 0x00000206c8d8 (mysqld+0x00000206c938)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M466 (0x00000206c8d8) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=17973, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1188:3 in close_open_tables(THD*)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 8 at 0x00000206c938 by thread T5:
    #0 close_open_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1188:3 (mysqld+0x00000084efe6)
    #1 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1347:5 (mysqld+0x00000084eb79)
    #2 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:739:3 (mysqld+0x000000966a4c)
    #3 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #4 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #5 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x00000206c938 by thread T4 (mutexes: write M467, write M466):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:158:13 (mysqld+0x000000d6179d)
    #1 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2705:3 (mysqld+0x00000085771a)
    #2 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #3 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #4 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #5 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'LOCK_open' of size 104 at 0x00000206c8d8 (mysqld+0x00000206c938)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M466 (0x00000206c8d8) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=17973, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1188:3 in close_open_tables(THD*)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 8 at 0x7d740000d6b0 by thread T4 (mutexes: write M467, write M438):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:614:3 (mysqld+0x000000c10f9a)
    #2 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #3 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #4 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d740000d6b0 by thread T6 (mutexes: write M709, write M708):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:52:3 (mysqld+0x000000c41bff)
    #2 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #3 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #4 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #5 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #6 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #7 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3821:3 (mysqld+0x00000097b54e)
    #8 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #9 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #10 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #11 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #12 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #13 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2408 at 0x7d740000d200 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M438 (0x00000207ce28) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 my_thread_global_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_thr_init.c:145:3 (mysqld+0x000000d62bd0)
    #3 my_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_init.c:81:7 (mysqld+0x000000cee1d1)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4215:3 (mysqld+0x000000783bf0)

  Mutex M709 (0x7d740000d688) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M708 (0x7d740000d660) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=17973, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 4 at 0x7d780002df48 by thread T5:
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 (mysqld+0x000000c418e7)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 lock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:364:16 (mysqld+0x000000774971)
    #4 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:260:34 (mysqld+0x000000772ea1)
    #5 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #6 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #7 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #8 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #9 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #10 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #11 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #12 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #13 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #14 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d780002df48 by thread T4 (mutexes: write M700):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:182:21 (mysqld+0x000000c4318e)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 lock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:364:16 (mysqld+0x000000774971)
    #4 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:260:34 (mysqld+0x000000772ea1)
    #5 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #6 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #7 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #8 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #9 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #10 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #11 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #12 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #13 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #14 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2640 at 0x7d780002dc00 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M700 (0x7d780002e088) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=17973, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 in mi_lock_database
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 1 at 0x7d600001d770 by thread T4 (mutexes: write M507):
    #0 bitmap_is_set(st_bitmap const*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/../include/my_bitmap.h:141:10 (mysqld+0x000000700490)
    #1 Field_string::val_str(String*, String*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/field.cc:6609:3 (mysqld+0x000000722b9e)
    #2 Field::val_str(String*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./field.h:121:48 (mysqld+0x0000005eda76)
    #3 get_field(st_mem_root*, Field*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:2614:3 (mysqld+0x000000885d4c)
    #4 GRANT_NAME::GRANT_NAME(st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2301:26 (mysqld+0x00000096e1bf)
    #5 GRANT_TABLE::GRANT_TABLE(st_table*, st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2328:4 (mysqld+0x00000096e916)
    #6 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3659:39 (mysqld+0x00000097b9a5)
    #7 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #8 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #9 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #10 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #11 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #12 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #13 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d600001d770 by thread T6 (mutexes: write M467):
    #0 bitmap_is_set_all /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_bitmap.c:299:23 (mysqld+0x000000d4a00b)
    #1 handler::ha_reset() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4571:3 (mysqld+0x000000a3e464)
    #2 close_thread_table(THD*, st_table**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1403:5 (mysqld+0x00000084f783)
    #3 close_open_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1195:23 (mysqld+0x00000084f0ec)
    #4 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1347:5 (mysqld+0x00000084eb79)
    #5 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3821:3 (mysqld+0x00000097b54e)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 992 at 0x7d600001d400 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 alloc_root /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_alloc.c:201:30 (mysqld+0x000000d1412d)
    #3 open_binary_frm(THD*, st_table_share*, unsigned char*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:773:26 (mysqld+0x000000877939)
    #4 open_table_def(THD*, st_table_share*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:630:12 (mysqld+0x0000008762be)
    #5 get_table_share(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:377:7 (mysqld+0x000000849690)
    #6 get_table_share_with_create(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:456:10 (mysqld+0x00000086ed96)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3837:16 (mysqld+0x000000854892)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T4 (tid=17973, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/../include/my_bitmap.h:141:10 in bitmap_is_set(st_bitmap const*, unsigned int)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Write of size 4 at 0x7d780002df4c by thread T5 (mutexes: write M700):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:183:23 (mysqld+0x000000c431d6)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 lock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:364:16 (mysqld+0x000000774971)
    #4 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:260:34 (mysqld+0x000000772ea1)
    #5 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #6 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #7 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #8 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #9 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #10 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #11 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #12 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #13 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #14 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 4 at 0x7d780002df4c by thread T4 (mutexes: write M507):
    #0 _mi_read_static_record /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_statrec.c:183:5 (mysqld+0x000000c48209)
    #1 mi_rnext /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rnext.c:114:13 (mysqld+0x000000c27b79)
    #2 mi_rfirst /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rfirst.c:25:3 (mysqld+0x000000c79c79)
    #3 ha_myisam::index_first(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1710:13 (mysqld+0x000000c08156)
    #4 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3652:8 (mysqld+0x00000097b901)
    #5 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2640 at 0x7d780002dc00 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M700 (0x7d780002e088) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=17973, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:183:23 in mi_lock_database
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 1 at 0x7d600001bba0 by thread T4 (mutexes: write M507):
    #0 bitmap_is_set(st_bitmap const*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/../include/my_bitmap.h:141:10 (mysqld+0x000000700490)
    #1 Field_string::store(char const*, unsigned int, charset_info_st*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/field.cc:6376:3 (mysqld+0x0000007205fe)
    #2 GRANT_TABLE::GRANT_TABLE(st_table*, st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2348:5 (mysqld+0x00000096ed00)
    #3 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3659:39 (mysqld+0x00000097b9a5)
    #4 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d600001bba0 by thread T6 (mutexes: write M467):
    #0 bitmap_is_set_all /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_bitmap.c:299:23 (mysqld+0x000000d4a00b)
    #1 handler::ha_reset() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4571:3 (mysqld+0x000000a3e464)
    #2 close_thread_table(THD*, st_table**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1403:5 (mysqld+0x00000084f783)
    #3 close_open_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1195:23 (mysqld+0x00000084f0ec)
    #4 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1347:5 (mysqld+0x00000084eb79)
    #5 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3821:3 (mysqld+0x00000097b54e)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 992 at 0x7d600001b800 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 alloc_root /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_alloc.c:201:30 (mysqld+0x000000d1412d)
    #3 open_binary_frm(THD*, st_table_share*, unsigned char*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:773:26 (mysqld+0x000000877939)
    #4 open_table_def(THD*, st_table_share*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:630:12 (mysqld+0x0000008762be)
    #5 get_table_share(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:377:7 (mysqld+0x000000849690)
    #6 get_table_share_with_create(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:456:10 (mysqld+0x00000086ed96)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3837:16 (mysqld+0x000000854892)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T4 (tid=17973, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/../include/my_bitmap.h:141:10 in bitmap_is_set(st_bitmap const*, unsigned int)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 8 at 0x7d740000d5d0 by thread T5:
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 thr_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:503:3 (mysqld+0x000000d5a8e5)
    #2 thr_multi_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:973:39 (mysqld+0x000000d5e4b1)
    #3 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:276:39 (mysqld+0x0000007731c4)
    #4 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #5 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #6 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #7 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #8 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #9 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #10 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #11 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #12 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #13 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d740000d5d0 by thread T4 (mutexes: write M707, write M706):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 thr_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:503:3 (mysqld+0x000000d5a8e5)
    #2 thr_multi_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:973:39 (mysqld+0x000000d5e4b1)
    #3 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:276:39 (mysqld+0x0000007731c4)
    #4 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #5 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #6 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #7 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #8 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #9 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #10 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #11 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #12 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #13 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2408 at 0x7d740000d200 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M707 (0x7d740000d5a8) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 thr_lock_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:319:3 (mysqld+0x000000d5a2be)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:524:5 (mysqld+0x000000c102ff)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M706 (0x7d740000d580) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 thr_lock_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:319:3 (mysqld+0x000000d5a2be)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:524:5 (mysqld+0x000000c102ff)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=17973, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 4 at 0x7d740000d54c by thread T4 (mutexes: write M507):
    #0 _mi_read_static_record /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_statrec.c:183:5 (mysqld+0x000000c48209)
    #1 mi_rkey /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rkey.c:173:8 (mysqld+0x000000c268ec)
    #2 ha_myisam::index_read_map(unsigned char*, unsigned char const*, unsigned long, ha_rkey_function) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1661:13 (mysqld+0x000000c07a59)
    #3 GRANT_TABLE::GRANT_TABLE(st_table*, st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2364:9 (mysqld+0x00000096f27c)
    #4 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3659:39 (mysqld+0x00000097b9a5)
    #5 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d740000d54c by thread T5 (mutexes: write M709):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:183:23 (mysqld+0x000000c431d6)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 lock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:364:16 (mysqld+0x000000774971)
    #4 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:260:34 (mysqld+0x000000772ea1)
    #5 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #6 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #7 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #8 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #9 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #10 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #11 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #12 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #13 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #14 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2408 at 0x7d740000d200 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M709 (0x7d740000d688) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=17973, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_statrec.c:183:5 in _mi_read_static_record
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Write of size 4 at 0x7d600001a6c8 by thread T4 (mutexes: write M467, write M713):
    #0 get_table_share(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:411:24 (mysqld+0x000000849afa)
    #1 get_table_share_with_create(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:456:10 (mysqld+0x00000086ed96)
    #2 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3837:16 (mysqld+0x000000854892)
    #3 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #4 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #5 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #6 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #7 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #8 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #9 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #10 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #11 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #12 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #13 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #14 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 4 at 0x7d600001a6c8 by thread T6:
    #0 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2944:3 (mysqld+0x000000858b6d)
    #1 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #2 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #3 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #4 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #5 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 992 at 0x7d600001a400 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 alloc_root /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_alloc.c:201:30 (mysqld+0x000000d1412d)
    #3 multi_alloc_root /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_alloc.c:264:24 (mysqld+0x000000d148c6)
    #4 alloc_table_share(TABLE_LIST*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:284:7 (mysqld+0x000000874d14)
    #5 get_table_share(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:346:16 (mysqld+0x00000084956a)
    #6 get_table_share_with_create(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:456:10 (mysqld+0x00000086ed96)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3837:16 (mysqld+0x000000854892)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #13 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #14 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #15 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #16 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #17 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #18 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #19 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M713 (0x7d600001a518) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 alloc_table_share(TABLE_LIST*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:320:5 (mysqld+0x0000008750c2)
    #3 get_table_share(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:346:16 (mysqld+0x00000084956a)
    #4 get_table_share_with_create(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:456:10 (mysqld+0x00000086ed96)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3837:16 (mysqld+0x000000854892)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=17973, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:411:24 in get_table_share(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 8 at 0x7d780002d4b0 by thread T4 (mutexes: write M467, write M438):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:614:3 (mysqld+0x000000c10f9a)
    #2 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #3 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #4 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d780002d4b0 by thread T6 (mutexes: write M717, write M716):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:52:3 (mysqld+0x000000c41bff)
    #2 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #3 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #4 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #5 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #6 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #7 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3752:3 (mysqld+0x00000097c036)
    #8 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #9 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #10 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #11 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #12 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #13 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #14 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2680 at 0x7d780002d000 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #13 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #14 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #15 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #16 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #17 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #18 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #19 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M438 (0x00000207ce28) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 my_thread_global_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_thr_init.c:145:3 (mysqld+0x000000d62bd0)
    #3 my_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_init.c:81:7 (mysqld+0x000000cee1d1)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4215:3 (mysqld+0x000000783bf0)

  Mutex M717 (0x7d780002d488) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M716 (0x7d780002d460) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=17973, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 4 at 0x7d780002d348 by thread T5:
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 (mysqld+0x000000c418e7)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 lock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:364:16 (mysqld+0x000000774971)
    #4 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:260:34 (mysqld+0x000000772ea1)
    #5 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #6 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #7 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #8 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #9 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #10 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #11 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #12 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #13 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #14 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #15 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d780002d348 by thread T4 (mutexes: write M717):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:182:21 (mysqld+0x000000c4318e)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 lock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:364:16 (mysqld+0x000000774971)
    #4 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:260:34 (mysqld+0x000000772ea1)
    #5 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #6 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #7 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #8 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #9 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #10 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #11 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #12 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #13 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #14 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #15 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2680 at 0x7d780002d000 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #13 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #14 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #15 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #16 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #17 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #18 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #19 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M717 (0x7d780002d488) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=17973, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 in mi_lock_database
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 4 at 0x7d780002d344 by thread T5:
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 (mysqld+0x000000c41920)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 lock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:364:16 (mysqld+0x000000774971)
    #4 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:260:34 (mysqld+0x000000772ea1)
    #5 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #6 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #7 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #8 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #9 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #10 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #11 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #12 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #13 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #14 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #15 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d780002d344 by thread T6:
    [failed to restore the stack]

  Location is heap block of size 2680 at 0x7d780002d000 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #13 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #14 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #15 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #16 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #17 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #18 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #19 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 in mi_lock_database
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 8 at 0x00000206ced8 by thread T4:
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 reset_mqh(st_lex_user*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:538:10 (mysqld+0x000000799a7c)
    #2 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6784:5 (mysqld+0x0000007a7ade)
    #3 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #4 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #5 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #6 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #7 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x00000206ced8 by thread T6 (mutexes: write M491, write M490):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 reset_mqh(st_lex_user*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:538:10 (mysqld+0x000000799a7c)
    #2 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6784:5 (mysqld+0x0000007a7ade)
    #3 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #4 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #5 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #6 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #7 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'LOCK_user_conn' of size 104 at 0x00000206ce88 (mysqld+0x00000206ced8)

  Mutex M491 (0x00000206ceb0) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3518:10 (mysqld+0x00000078fe3c)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M490 (0x00000206ce88) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3518:10 (mysqld+0x00000078fe3c)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T4 (tid=17973, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 8 at 0x7d780002dc68 by thread T5 (mutexes: write M507, read M701):
    #0 _mi_test_if_changed /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:484:20 (mysqld+0x000000c439b4)
    #1 mi_rnext /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rnext.c:43:11 (mysqld+0x000000c26f28)
    #2 mi_rfirst /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rfirst.c:25:3 (mysqld+0x000000c79c79)
    #3 ha_myisam::index_first(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1710:13 (mysqld+0x000000c08156)
    #4 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3652:8 (mysqld+0x00000097b901)
    #5 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d780002dc68 by thread T6 (mutexes: write M700):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:98:24 (mysqld+0x000000c42640)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1591:3 (mysqld+0x0000007a2d76)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2640 at 0x7d780002dc00 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M701 (0x7d780002e5a8) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:527:7 (mysqld+0x000000c103d6)
    #2 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #3 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #4 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M700 (0x7d780002e088) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:484:20 in _mi_test_if_changed
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 8 at 0x7d780002def8 by thread T5 (mutexes: write M507, read M701):
    #0 _mi_test_if_changed /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:484:38 (mysqld+0x000000c439da)
    #1 mi_rnext /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rnext.c:43:11 (mysqld+0x000000c26f28)
    #2 mi_rfirst /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rfirst.c:25:3 (mysqld+0x000000c79c79)
    #3 ha_myisam::index_first(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1710:13 (mysqld+0x000000c08156)
    #4 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3652:8 (mysqld+0x00000097b901)
    #5 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d780002def8 by thread T6 (mutexes: write M700):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:98:45 (mysqld+0x000000c42605)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1591:3 (mysqld+0x0000007a2d76)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2640 at 0x7d780002dc00 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M701 (0x7d780002e5a8) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:527:7 (mysqld+0x000000c103d6)
    #2 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #3 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #4 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M700 (0x7d780002e088) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:484:38 in _mi_test_if_changed
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 8 at 0x7d780002dc70 by thread T5 (mutexes: write M507, read M701):
    #0 _mi_test_if_changed /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:485:20 (mysqld+0x000000c43a06)
    #1 mi_rnext /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rnext.c:43:11 (mysqld+0x000000c26f28)
    #2 mi_rfirst /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rfirst.c:25:3 (mysqld+0x000000c79c79)
    #3 ha_myisam::index_first(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1710:13 (mysqld+0x000000c08156)
    #4 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3652:8 (mysqld+0x00000097b901)
    #5 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d780002dc70 by thread T6 (mutexes: write M700):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:99:23 (mysqld+0x000000c426f4)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1591:3 (mysqld+0x0000007a2d76)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2640 at 0x7d780002dc00 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M701 (0x7d780002e5a8) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:527:7 (mysqld+0x000000c103d6)
    #2 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #3 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #4 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M700 (0x7d780002e088) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:485:20 in _mi_test_if_changed
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 8 at 0x7d780002dc78 by thread T5 (mutexes: write M507, read M701):
    #0 _mi_test_if_changed /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:486:20 (mysqld+0x000000c43a58)
    #1 mi_rnext /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rnext.c:43:11 (mysqld+0x000000c26f28)
    #2 mi_rfirst /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rfirst.c:25:3 (mysqld+0x000000c79c79)
    #3 ha_myisam::index_first(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1710:13 (mysqld+0x000000c08156)
    #4 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3652:8 (mysqld+0x00000097b901)
    #5 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d780002dc78 by thread T6 (mutexes: write M700):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:100:29 (mysqld+0x000000c427ba)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1591:3 (mysqld+0x0000007a2d76)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2640 at 0x7d780002dc00 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M701 (0x7d780002e5a8) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:527:7 (mysqld+0x000000c103d6)
    #2 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #3 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #4 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M700 (0x7d780002e088) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:486:20 in _mi_test_if_changed
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 8 at 0x7d740001e100 by thread T5 (mutexes: write M507, read M701):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 key_cache_read /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mf_keycache.c:2548:5 (mysqld+0x000000cf5513)
    #2 _mi_fetch_keypage /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_page.c:31:16 (mysqld+0x000000c399f6)
    #3 _mi_search_first /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_search.c:1334:10 (mysqld+0x000000c34074)
    #4 mi_rnext /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rnext.c:54:13 (mysqld+0x000000c2718a)
    #5 mi_rfirst /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rfirst.c:25:3 (mysqld+0x000000c79c79)
    #6 ha_myisam::index_first(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1710:13 (mysqld+0x000000c08156)
    #7 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3652:8 (mysqld+0x00000097b901)
    #8 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #9 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #10 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #11 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #12 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #13 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #14 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d740001e100 by thread T6 (mutexes: write M709, write M552, write M551):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 flush_key_blocks /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mf_keycache.c:4012:3 (mysqld+0x000000cfdefd)
    #2 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:64:31 (mysqld+0x000000c41ee5)
    #3 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #4 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #5 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #6 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #7 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1591:3 (mysqld+0x0000007a2d76)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2440 at 0x7d740001e000 allocated by main thread:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 create_key_cache(char const*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/set_var.cc:4059:32 (mysqld+0x0000007d4a7c)
    #3 get_or_create_key_cache(char const*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/set_var.cc:4093:16 (mysqld+0x0000007dbfd3)
    #4 mysql_init_variables() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:7620:25 (mysqld+0x000000790f2a)
    #5 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3174:7 (mysqld+0x000000784a19)
    #6 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M701 (0x7d780002e5a8) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:527:7 (mysqld+0x000000c103d6)
    #2 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #3 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #4 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M709 (0x7d740000d688) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M552 (0x7d740001e0d8) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_key_cache /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mf_keycache.c:402:5 (mysqld+0x000000cf26ac)
    #3 ha_init_key_cache /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:3656:5 (mysqld+0x000000a3b002)
    #4 process_key_caches(int (*)(char const*, st_key_cache*)) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/set_var.cc:4114:5 (mysqld+0x0000007dc0ff)
    #5 init_server_components() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3875:3 (mysqld+0x000000787e93)
    #6 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4354:7 (mysqld+0x0000007840c8)

  Mutex M551 (0x7d740001e0b0) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 init_key_cache /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mf_keycache.c:402:5 (mysqld+0x000000cf26ac)
    #3 ha_init_key_cache /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:3656:5 (mysqld+0x000000a3b002)
    #4 process_key_caches(int (*)(char const*, st_key_cache*)) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/set_var.cc:4114:5 (mysqld+0x0000007dc0ff)
    #5 init_server_components() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3875:3 (mysqld+0x000000787e93)
    #6 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4354:7 (mysqld+0x0000007840c8)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Write of size 8 at 0x7d740000d4f8 by thread T5 (mutexes: write M507, read M710):
    #0 _mi_test_if_changed /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:491:24 (mysqld+0x000000c43bd1)
    #1 mi_rnext /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rnext.c:43:11 (mysqld+0x000000c26f28)
    #2 ha_myisam::index_next(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1692:13 (mysqld+0x000000c07eb6)
    #3 GRANT_TABLE::GRANT_TABLE(st_table*, st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2386:15 (mysqld+0x00000096f57e)
    #4 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3659:39 (mysqld+0x00000097b9a5)
    #5 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x7d740000d4f8 by thread T6 (mutexes: write M709):
    #0 _mi_test_if_changed /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:484:38 (mysqld+0x000000c439da)
    #1 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:181:7 (mysqld+0x000000c43153)
    #2 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #3 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #4 lock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:364:16 (mysqld+0x000000774971)
    #5 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:260:34 (mysqld+0x000000772ea1)
    #6 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #7 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #8 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #9 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #10 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #11 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #12 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #13 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #14 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #15 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2408 at 0x7d740000d200 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M710 (0x7d740000daf8) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:527:7 (mysqld+0x000000c103d6)
    #2 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #3 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #4 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M709 (0x7d740000d688) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:491:24 in _mi_test_if_changed
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 8 at 0x7d780002d3d0 by thread T6:
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 thr_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:503:3 (mysqld+0x000000d5a8e5)
    #2 thr_multi_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:973:39 (mysqld+0x000000d5e4b1)
    #3 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:276:39 (mysqld+0x0000007731c4)
    #4 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #5 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #6 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #7 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #8 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #9 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #10 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #11 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #12 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #13 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #14 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d780002d3d0 by thread T4 (mutexes: write M715, write M714):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 thr_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:503:3 (mysqld+0x000000d5a8e5)
    #2 thr_multi_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:973:39 (mysqld+0x000000d5e4b1)
    #3 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:276:39 (mysqld+0x0000007731c4)
    #4 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #5 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #6 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #7 open_grant_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:5048:7 (mysqld+0x00000098300e)
    #8 mysql_drop_user(THD*, List<st_lex_user>&) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:5709:16 (mysqld+0x000000983da7)
    #9 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3796:16 (mysqld+0x0000007b4876)
    #10 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #11 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #12 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #13 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2680 at 0x7d780002d000 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #13 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #14 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #15 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #16 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #17 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #18 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #19 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M715 (0x7d780002d3a8) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 thr_lock_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:319:3 (mysqld+0x000000d5a2be)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:524:5 (mysqld+0x000000c102ff)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #13 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #14 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #15 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #16 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #17 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #18 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #19 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M714 (0x7d780002d380) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 thr_lock_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:319:3 (mysqld+0x000000d5a2be)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:524:5 (mysqld+0x000000c102ff)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #13 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #14 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #15 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #16 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #17 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #18 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #19 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=17973, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 4 at 0x7d780002d34c by thread T4 (mutexes: write M507, write M694):
    #0 _mi_read_rnd_static_record /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_statrec.c:258:5 (mysqld+0x000000c48be6)
    #1 mi_scan /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_scan.c:44:3 (mysqld+0x000000c45f94)
    #2 ha_myisam::rnd_next(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1750:13 (mysqld+0x000000c0857b)
    #3 handle_grant_table(TABLE_LIST*, unsigned int, bool, st_lex_user*, st_lex_user*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:5242:22 (mysqld+0x00000098cf2d)
    #4 handle_grant_data(TABLE_LIST*, bool, st_lex_user*, st_lex_user*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:5533:15 (mysqld+0x0000009839e6)
    #5 mysql_drop_user(THD*, List<st_lex_user>&) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:5722:9 (mysqld+0x000000983e97)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3796:16 (mysqld+0x0000007b4876)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d780002d34c by thread T6 (mutexes: write M717):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:183:23 (mysqld+0x000000c431d6)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 lock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:364:16 (mysqld+0x000000774971)
    #4 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:260:34 (mysqld+0x000000772ea1)
    #5 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #6 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #7 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #8 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #9 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #10 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #11 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #12 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #13 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #14 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #15 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2680 at 0x7d780002d000 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #13 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #14 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #15 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #16 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #17 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #18 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #19 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M717 (0x7d780002d488) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=17973, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_statrec.c:258:5 in _mi_read_rnd_static_record
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Write of size 8 at 0x00000207b318 by thread T6 (mutexes: write M715):
    #0 wait_for_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:408:3 (mysqld+0x000000d5c5f2)
    #1 thr_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:704:3 (mysqld+0x000000d5c192)
    #2 thr_multi_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:973:39 (mysqld+0x000000d5e4b1)
    #3 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:276:39 (mysqld+0x0000007731c4)
    #4 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #5 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #6 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #7 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #8 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #9 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #10 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #11 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #12 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #13 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #14 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x00000207b318 by thread T5 (mutexes: write M654):
    #0 wait_for_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:408:3 (mysqld+0x000000d5c5f2)
    #1 thr_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:704:3 (mysqld+0x000000d5c192)
    #2 thr_multi_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:973:39 (mysqld+0x000000d5e4b1)
    #3 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:276:39 (mysqld+0x0000007731c4)
    #4 open_ltable(THD*, TABLE_LIST*, thr_lock_type, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4931:20 (mysqld+0x00000085f9c8)
    #5 change_password(THD*, char const*, char const*, char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:1615:16 (mysqld+0x00000096bd97)
    #6 set_var_password::update(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/set_var.cc:3671:10 (mysqld+0x0000007d9e5c)
    #7 sql_set_variables(THD*, List<set_var_base>*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/set_var.cc:3450:15 (mysqld+0x0000007d8b5d)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3450:16 (mysqld+0x0000007b1cb1)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'locks_waited' of size 8 at 0x00000207b318 (mysqld+0x00000207b318)

  Mutex M715 (0x7d780002d3a8) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 thr_lock_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:319:3 (mysqld+0x000000d5a2be)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:524:5 (mysqld+0x000000c102ff)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #13 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #14 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #15 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #16 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #17 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #18 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #19 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M654 (0x7d80000043a8) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 thr_lock_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:319:3 (mysqld+0x000000d5a2be)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:524:5 (mysqld+0x000000c102ff)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1130:7 (mysqld+0x000000b8b308)
    #13 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #14 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:408:3 in wait_for_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Write of size 8 at 0x7d740000d268 by thread T5 (mutexes: write M709):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:98:24 (mysqld+0x000000c42640)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1591:3 (mysqld+0x0000007a2d76)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x7d740000d268 by thread T6 (mutexes: write M507, read M710):
    #0 _mi_test_if_changed /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:484:20 (mysqld+0x000000c439b4)
    #1 mi_rnext /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rnext.c:43:11 (mysqld+0x000000c26f28)
    #2 ha_myisam::index_next(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1692:13 (mysqld+0x000000c07eb6)
    #3 GRANT_TABLE::GRANT_TABLE(st_table*, st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2386:15 (mysqld+0x00000096f57e)
    #4 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3659:39 (mysqld+0x00000097b9a5)
    #5 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2408 at 0x7d740000d200 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M709 (0x7d740000d688) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M710 (0x7d740000daf8) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:527:7 (mysqld+0x000000c103d6)
    #2 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #3 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #4 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:98:24 in mi_lock_database
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 8 at 0x7d740000d268 by thread T6 (mutexes: write M507, read M710):
    #0 _mi_test_if_changed /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:484:20 (mysqld+0x000000c439b4)
    #1 mi_rnext /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rnext.c:43:11 (mysqld+0x000000c26f28)
    #2 ha_myisam::index_next(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1692:13 (mysqld+0x000000c07eb6)
    #3 GRANT_TABLE::GRANT_TABLE(st_table*, st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2386:15 (mysqld+0x00000096f57e)
    #4 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3659:39 (mysqld+0x00000097b9a5)
    #5 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d740000d268 by thread T5 (mutexes: write M709):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:98:24 (mysqld+0x000000c42640)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1591:3 (mysqld+0x0000007a2d76)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2408 at 0x7d740000d200 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M710 (0x7d740000daf8) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:527:7 (mysqld+0x000000c103d6)
    #2 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #3 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #4 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M709 (0x7d740000d688) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:484:20 in _mi_test_if_changed
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Write of size 8 at 0x7d740000d270 by thread T5 (mutexes: write M709):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:99:23 (mysqld+0x000000c426f4)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1591:3 (mysqld+0x0000007a2d76)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x7d740000d270 by thread T6 (mutexes: write M507, read M710):
    #0 _mi_test_if_changed /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:485:20 (mysqld+0x000000c43a06)
    #1 mi_rnext /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rnext.c:43:11 (mysqld+0x000000c26f28)
    #2 ha_myisam::index_next(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1692:13 (mysqld+0x000000c07eb6)
    #3 GRANT_TABLE::GRANT_TABLE(st_table*, st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2386:15 (mysqld+0x00000096f57e)
    #4 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3659:39 (mysqld+0x00000097b9a5)
    #5 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2408 at 0x7d740000d200 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M709 (0x7d740000d688) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M710 (0x7d740000daf8) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:527:7 (mysqld+0x000000c103d6)
    #2 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #3 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #4 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:99:23 in mi_lock_database
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 8 at 0x7d740000d270 by thread T6 (mutexes: write M507, read M710):
    #0 _mi_test_if_changed /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:485:20 (mysqld+0x000000c43a06)
    #1 mi_rnext /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rnext.c:43:11 (mysqld+0x000000c26f28)
    #2 ha_myisam::index_next(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1692:13 (mysqld+0x000000c07eb6)
    #3 GRANT_TABLE::GRANT_TABLE(st_table*, st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2386:15 (mysqld+0x00000096f57e)
    #4 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3659:39 (mysqld+0x00000097b9a5)
    #5 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d740000d270 by thread T5 (mutexes: write M709):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:99:23 (mysqld+0x000000c426f4)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1591:3 (mysqld+0x0000007a2d76)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2408 at 0x7d740000d200 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M710 (0x7d740000daf8) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:527:7 (mysqld+0x000000c103d6)
    #2 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #3 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #4 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M709 (0x7d740000d688) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:485:20 in _mi_test_if_changed
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Write of size 8 at 0x7d740000d278 by thread T5 (mutexes: write M709):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:100:29 (mysqld+0x000000c427ba)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1591:3 (mysqld+0x0000007a2d76)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x7d740000d278 by thread T6 (mutexes: write M507, read M710):
    #0 _mi_test_if_changed /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:486:20 (mysqld+0x000000c43a58)
    #1 mi_rnext /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rnext.c:43:11 (mysqld+0x000000c26f28)
    #2 ha_myisam::index_next(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1692:13 (mysqld+0x000000c07eb6)
    #3 GRANT_TABLE::GRANT_TABLE(st_table*, st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2386:15 (mysqld+0x00000096f57e)
    #4 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3659:39 (mysqld+0x00000097b9a5)
    #5 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2408 at 0x7d740000d200 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M709 (0x7d740000d688) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M710 (0x7d740000daf8) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:527:7 (mysqld+0x000000c103d6)
    #2 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #3 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #4 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:100:29 in mi_lock_database
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 8 at 0x7d740000d278 by thread T6 (mutexes: write M507, read M710):
    #0 _mi_test_if_changed /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:493:35 (mysqld+0x000000c43c5b)
    #1 mi_rnext /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rnext.c:43:11 (mysqld+0x000000c26f28)
    #2 ha_myisam::index_next(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1692:13 (mysqld+0x000000c07eb6)
    #3 GRANT_TABLE::GRANT_TABLE(st_table*, st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2386:15 (mysqld+0x00000096f57e)
    #4 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3659:39 (mysqld+0x00000097b9a5)
    #5 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d740000d278 by thread T5 (mutexes: write M709):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:100:29 (mysqld+0x000000c427ba)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1591:3 (mysqld+0x0000007a2d76)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2408 at 0x7d740000d200 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M710 (0x7d740000daf8) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:527:7 (mysqld+0x000000c103d6)
    #2 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #3 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #4 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M709 (0x7d740000d688) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:493:35 in _mi_test_if_changed
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 1 at 0x00000206a8be by thread T6:
    #0 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5899:11 (mysqld+0x0000007a405e)
    #1 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #2 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #3 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 1 at 0x00000206a8be by thread T5 (mutexes: write M507, write M694):
    #0 replace_user_table(THD*, st_table*, st_lex_user const&, unsigned long, bool, bool, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2049:13 (mysqld+0x000000973be4)
    #1 mysql_table_grant(THD*, TABLE_LIST*, List<st_lex_user>&, List<LEX_COLUMN>&, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3086:11 (mysqld+0x000000970535)
    #2 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3894:14 (mysqld+0x0000007b5a0a)
    #3 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #4 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #5 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #6 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'mqh_used' of size 1 at 0x00000206a8be (mysqld+0x00000206a8be)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T6 (tid=17977, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5899:11 in mysql_parse(THD*, char const*, unsigned int, char const**)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 1 at 0x00000206a8be by thread T4:
    #0 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5899:11 (mysqld+0x0000007a405e)
    #1 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #2 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #3 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 1 at 0x00000206a8be by thread T5 (mutexes: write M507, write M694):
    #0 replace_user_table(THD*, st_table*, st_lex_user const&, unsigned long, bool, bool, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2049:13 (mysqld+0x000000973be4)
    #1 mysql_table_grant(THD*, TABLE_LIST*, List<st_lex_user>&, List<LEX_COLUMN>&, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3086:11 (mysqld+0x000000970535)
    #2 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3894:14 (mysqld+0x0000007b5a0a)
    #3 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #4 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #5 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #6 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'mqh_used' of size 1 at 0x00000206a8be (mysqld+0x00000206a8be)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=17973, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=17976, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5899:11 in mysql_parse(THD*, char const*, unsigned int, char const**)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Write of size 8 at 0x000002073670 by thread T2 (mutexes: write M459):
    #0 LOGGER::init_general_log(unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:1117:32 (mysqld+0x000000951231)
    #1 LOGGER::set_handlers(unsigned int, unsigned int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:1246:3 (mysqld+0x000000951d00)
    #2 signal_hand /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2754:7 (mysqld+0x000000782f78)

  Previous read of size 8 at 0x000002073670 by thread T5:
    #0 LOGGER::log_command(THD*, enum_server_command) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:4112:7 (mysqld+0x00000095b968)
    #1 general_log_write(THD*, enum_server_command, char const*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:4152:7 (mysqld+0x00000095bcb3)
    #2 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1207:5 (mysqld+0x0000007a0945)
    #3 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #4 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'logger' of size 184 at 0x0000020735e0 (mysqld+0x000002073670)

  Mutex M459 (0x0000020735e0) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 LOGGER::init_base() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:888:3 (mysqld+0x00000094fd0e)
    #2 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4229:3 (mysqld+0x000000783c48)

  Thread T2 (tid=17962, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 start_signal_handler() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2657:14 (mysqld+0x0000007895b1)
    #2 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4380:3 (mysqld+0x000000784151)

  Thread T5 (tid=17976, finished) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:1117:32 in LOGGER::init_general_log(unsigned int)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Write of size 1 at 0x00000206a879 by thread T2:
    #0 signal_hand /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2759:12 (mysqld+0x00000078300c)

  Previous read of size 1 at 0x00000206a879 by main thread:
    #0 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4964:11 (mysqld+0x000000789eb5)
    #1 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Location is global 'abort_loop' of size 1 at 0x00000206a879 (mysqld+0x00000206a879)

  Thread T2 (tid=17962, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 start_signal_handler() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2657:14 (mysqld+0x0000007895b1)
    #2 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4380:3 (mysqld+0x000000784151)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2759:12 in signal_hand
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Read of size 4 at 0x00000206d684 by thread T2:
    #0 signal_hand /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2739:9 (mysqld+0x000000782e20)

  Previous write of size 4 at 0x00000206d684 by main thread:
    #0 clean_up(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:1223:19 (mysqld+0x000000780617)
    #1 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4507:3 (mysqld+0x0000007847be)

  Location is global 'cleanup_done' of size 4 at 0x00000206d684 (mysqld+0x00000206d684)

  Thread T2 (tid=17962, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 start_signal_handler() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2657:14 (mysqld+0x0000007895b1)
    #2 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4380:3 (mysqld+0x000000784151)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2739:9 in signal_hand
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Write of size 8 at 0x00000206d1a0 by main thread:
    #0 pthread_cond_destroy /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1157 (mysqld+0x0000005453fc)
    #1 clean_up_mutexes() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:1403:10 (mysqld+0x0000007813a8)
    #2 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4509:3 (mysqld+0x0000007847c8)

  Previous read of size 8 at 0x00000206d1a0 by thread T4:
    #0 pthread_cond_broadcast /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1150 (mysqld+0x0000005452c0)
    #1 one_thread_per_connection_end(THD*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:1920:10 (mysqld+0x000000781b35)
    #2 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1122:9 (mysqld+0x00000079a771)

  Location is global 'COND_thread_count' of size 48 at 0x00000206d1a0 (mysqld+0x00000206d1a0)

  Thread T4 (tid=17973, finished) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:1403:10 in clean_up_mutexes()
==================
==================
WARNING: ThreadSanitizer: data race (pid=17958)
  Write of size 4 at 0x00000207b370 by main thread (mutexes: write M453):
    #0 _db_end_ /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/dbug/dbug.c:1521:22 (mysqld+0x000000d70206)
    #1 my_end /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_init.c:220:5 (mysqld+0x000000cee97e)
    #2 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4510:3 (mysqld+0x0000007847f2)

  Previous read of size 4 at 0x00000207b370 by thread T2:
    #0 _db_keyword_ /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/dbug/dbug.c:1658:11 (mysqld+0x000000d6f503)
    #1 _db_doprnt_ /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/dbug/dbug.c:1150:7 (mysqld+0x000000d6f118)
    #2 signal_hand /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2741:7 (mysqld+0x000000782e58)

  Location is global 'init_settings' of size 584 at 0x00000207b370 (mysqld+0x00000207b370)

  Mutex M453 (0x00000207d0e0) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 code_state /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/dbug/dbug.c:334:5 (mysqld+0x000000d67ce0)
    #3 _db_enter_ /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/dbug/dbug.c:967:3 (mysqld+0x000000d6dbd6)
    #4 my_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_init.c:100:5 (mysqld+0x000000cee22b)
    #5 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4215:3 (mysqld+0x000000783bf0)

  Thread T2 (tid=17962, finished) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 start_signal_handler() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2657:14 (mysqld+0x0000007895b1)
    #2 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4380:3 (mysqld+0x000000784151)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/dbug/dbug.c:1521:22 in _db_end_
==================
ThreadSanitizer: reported 68 warnings
==================
WARNING: ThreadSanitizer: data race (pid=17984)
  Write of size 8 at 0x000002073630 by thread T2 (mutexes: write M459):
    #0 LOGGER::init_error_log(unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:1075:30 (mysqld+0x00000094fde9)
    #1 LOGGER::set_handlers(unsigned int, unsigned int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:1244:3 (mysqld+0x000000951ce8)
    #2 signal_hand /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2754:7 (mysqld+0x000000782f78)

  Previous read of size 8 at 0x000002073630 by main thread:
    #0 LOGGER::error_log_print(loglevel, char const*, __va_list_tag*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:833:50 (mysqld+0x00000094f896)
    #1 error_log_print(loglevel, char const*, __va_list_tag*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:4092:10 (mysqld+0x00000095b84e)
    #2 sql_print_information(char const*, ...) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:4836:3 (mysqld+0x00000094938a)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4444:3 (mysqld+0x0000007845c6)

  Location is global 'logger' of size 184 at 0x0000020735e0 (mysqld+0x000002073630)

  Mutex M459 (0x0000020735e0) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 LOGGER::init_base() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:888:3 (mysqld+0x00000094fd0e)
    #2 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4229:3 (mysqld+0x000000783c48)

  Thread T2 (tid=17988, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 start_signal_handler() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2657:14 (mysqld+0x0000007895b1)
    #2 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4380:3 (mysqld+0x000000784151)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:1075:30 in LOGGER::init_error_log(unsigned int)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17984)
  Write of size 8 at 0x000002073638 by thread T2 (mutexes: write M459):
    #0 LOGGER::init_error_log(unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:1076:30 (mysqld+0x00000094fe05)
    #1 LOGGER::set_handlers(unsigned int, unsigned int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:1244:3 (mysqld+0x000000951ce8)
    #2 signal_hand /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2754:7 (mysqld+0x000000782f78)

  Previous read of size 8 at 0x000002073638 by main thread:
    #0 LOGGER::error_log_print(loglevel, char const*, __va_list_tag*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:833:50 (mysqld+0x00000094f896)
    #1 error_log_print(loglevel, char const*, __va_list_tag*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:4092:10 (mysqld+0x00000095b84e)
    #2 sql_print_information(char const*, ...) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:4836:3 (mysqld+0x00000094938a)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4444:3 (mysqld+0x0000007845c6)

  Location is global 'logger' of size 184 at 0x0000020735e0 (mysqld+0x000002073638)

  Mutex M459 (0x0000020735e0) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 LOGGER::init_base() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:888:3 (mysqld+0x00000094fd0e)
    #2 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4229:3 (mysqld+0x000000783c48)

  Thread T2 (tid=17988, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 start_signal_handler() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2657:14 (mysqld+0x0000007895b1)
    #2 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4380:3 (mysqld+0x000000784151)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:1076:30 in LOGGER::init_error_log(unsigned int)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17984)
  Write of size 1 at 0x00000206a879 by thread T2:
    #0 signal_hand /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2759:12 (mysqld+0x00000078300c)

  Previous read of size 1 at 0x00000206a879 by main thread:
    #0 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4964:11 (mysqld+0x000000789eb5)
    #1 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Location is global 'abort_loop' of size 1 at 0x00000206a879 (mysqld+0x00000206a879)

  Thread T2 (tid=17988, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 start_signal_handler() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2657:14 (mysqld+0x0000007895b1)
    #2 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4380:3 (mysqld+0x000000784151)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2759:12 in signal_hand
==================
==================
WARNING: ThreadSanitizer: data race (pid=17984)
  Read of size 8 at 0x00000206cb30 by thread T3:
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 print_buffer_to_file(loglevel, char const*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:4762:3 (mysqld+0x00000095d7ce)
    #2 vprint_msg_to_log(loglevel, char const*, __va_list_tag*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:4793:3 (mysqld+0x00000094c63b)
    #3 Log_to_file_event_handler::log_error(loglevel, char const*, __va_list_tag*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:727:10 (mysqld+0x00000094c550)
    #4 LOGGER::error_log_print(loglevel, char const*, __va_list_tag*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:834:12 (mysqld+0x00000094f904)
    #5 error_log_print(loglevel, char const*, __va_list_tag*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:4092:10 (mysqld+0x00000095b84e)
    #6 sql_print_information(char const*, ...) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:4836:3 (mysqld+0x00000094938a)
    #7 kill_server(void*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:1113:5 (mysqld+0x00000078034d)
    #8 kill_server_thread /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:1155:3 (mysqld+0x0000007800d0)

  Previous write of size 8 at 0x00000206cb30 by main thread (mutexes: write M475, write M474):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 print_buffer_to_file(loglevel, char const*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:4762:3 (mysqld+0x00000095d7ce)
    #2 vprint_msg_to_log(loglevel, char const*, __va_list_tag*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:4793:3 (mysqld+0x00000094c63b)
    #3 Log_to_file_event_handler::log_error(loglevel, char const*, __va_list_tag*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:727:10 (mysqld+0x00000094c550)
    #4 LOGGER::error_log_print(loglevel, char const*, __va_list_tag*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:834:12 (mysqld+0x00000094f904)
    #5 error_log_print(loglevel, char const*, __va_list_tag*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:4092:10 (mysqld+0x00000095b84e)
    #6 sql_print_information(char const*, ...) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/log.cc:4836:3 (mysqld+0x00000094938a)
    #7 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4444:3 (mysqld+0x0000007845c6)

  Location is global 'LOCK_error_log' of size 104 at 0x00000206cae0 (mysqld+0x00000206cb30)

  Mutex M475 (0x00000206cb08) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3510:10 (mysqld+0x00000078fcea)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M474 (0x00000206cae0) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3510:10 (mysqld+0x00000078fcea)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T3 (tid=17994, running) created by thread T2 at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 signal_hand /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2764:6 (mysqld+0x00000078307a)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17984)
  Read of size 8 at 0x00000206c990 by main thread:
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4481:10 (mysqld+0x000000784697)

  Previous write of size 8 at 0x00000206c990 by thread T3 (mutexes: write M469, write M468):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 close_connections() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:827:10 (mysqld+0x00000078f022)
    #2 kill_server(void*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:1129:3 (mysqld+0x0000007803c7)
    #3 kill_server_thread /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:1155:3 (mysqld+0x0000007800d0)

  Location is global 'LOCK_thread_count' of size 104 at 0x00000206c940 (mysqld+0x00000206c990)

  Mutex M469 (0x00000206c968) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3507:10 (mysqld+0x00000078fc6f)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M468 (0x00000206c940) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3507:10 (mysqld+0x00000078fc6f)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T3 (tid=17994, running) created by thread T2 at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 signal_hand /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2764:6 (mysqld+0x00000078307a)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17984)
  Read of size 4 at 0x00000206d684 by thread T2:
    #0 signal_hand /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2739:9 (mysqld+0x000000782e20)

  Previous write of size 4 at 0x00000206d684 by main thread:
    #0 clean_up(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:1223:19 (mysqld+0x000000780617)
    #1 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4507:3 (mysqld+0x0000007847be)

  Location is global 'cleanup_done' of size 4 at 0x00000206d684 (mysqld+0x00000206d684)

  Thread T2 (tid=17988, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 start_signal_handler() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2657:14 (mysqld+0x0000007895b1)
    #2 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4380:3 (mysqld+0x000000784151)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2739:9 in signal_hand
==================
==================
WARNING: ThreadSanitizer: data race (pid=17984)
  Read of size 8 at 0x00000207ceb8 by main thread:
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 my_thread_end /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_thr_init.c:357:5 (mysqld+0x000000d6356a)
    #2 my_end /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_init.c:223:3 (mysqld+0x000000cee983)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4510:3 (mysqld+0x0000007847f2)

  Previous write of size 8 at 0x00000207ceb8 by thread T3 (mutexes: write M446, write M445):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 my_thread_end /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_thr_init.c:357:5 (mysqld+0x000000d6356a)
    #2 unireg_end() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:1193:3 (mysqld+0x00000078059b)
    #3 kill_server(void*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:1134:5 (mysqld+0x0000007803ea)
    #4 kill_server_thread /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:1155:3 (mysqld+0x0000007800d0)

  Location is global 'THR_LOCK_threads' of size 104 at 0x00000207ce68 (mysqld+0x00000207ceb8)

  Mutex M446 (0x00000207ce90) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 my_thread_global_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_thr_init.c:149:3 (mysqld+0x000000d62c85)
    #3 my_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_init.c:81:7 (mysqld+0x000000cee1d1)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4215:3 (mysqld+0x000000783bf0)

  Mutex M445 (0x00000207ce68) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 my_thread_global_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_thr_init.c:149:3 (mysqld+0x000000d62c85)
    #3 my_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_init.c:81:7 (mysqld+0x000000cee1d1)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4215:3 (mysqld+0x000000783bf0)

  Thread T3 (tid=17994, finished) created by thread T2 at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 signal_hand /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2764:6 (mysqld+0x00000078307a)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17984)
  Read of size 4 at 0x00000207b370 by thread T2:
    #0 _db_keyword_ /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/dbug/dbug.c:1658:11 (mysqld+0x000000d6f503)
    #1 _db_doprnt_ /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/dbug/dbug.c:1150:7 (mysqld+0x000000d6f118)
    #2 signal_hand /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2741:7 (mysqld+0x000000782e58)

  Previous write of size 4 at 0x00000207b370 by main thread (mutexes: write M452):
    #0 _db_end_ /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/dbug/dbug.c:1521:22 (mysqld+0x000000d70206)
    #1 my_end /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_init.c:220:5 (mysqld+0x000000cee97e)
    #2 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4510:3 (mysqld+0x0000007847f2)

  Location is global 'init_settings' of size 584 at 0x00000207b370 (mysqld+0x00000207b370)

  Mutex M452 (0x00000207d0e0) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 code_state /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/dbug/dbug.c:334:5 (mysqld+0x000000d67ce0)
    #3 _db_enter_ /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/dbug/dbug.c:967:3 (mysqld+0x000000d6dbd6)
    #4 my_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_init.c:100:5 (mysqld+0x000000cee22b)
    #5 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4215:3 (mysqld+0x000000783bf0)

  Thread T2 (tid=17988, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 start_signal_handler() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2657:14 (mysqld+0x0000007895b1)
    #2 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4380:3 (mysqld+0x000000784151)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/dbug/dbug.c:1658:11 in _db_keyword_
==================
ThreadSanitizer: reported 8 warnings
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 8 at 0x00000207b2b8 by thread T2:
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 process_alarm /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_alarm.c:324:3 (mysqld+0x000000d58d7c)
    #2 signal_hand /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2799:7 (mysqld+0x000000783292)

  Previous write of size 8 at 0x00000207b2b8 by thread T3 (mutexes: write M560, write M559):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 thr_alarm /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_alarm.c:167:3 (mysqld+0x000000d58f00)
    #2 my_real_read(st_net*, unsigned long*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/net_serv.cc:829:11 (mysqld+0x0000007690aa)
    #3 my_net_read /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/net_serv.cc:996:11 (mysqld+0x000000767e0b)
    #4 check_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:753:12 (mysqld+0x00000079c6fa)
    #5 login_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:955:10 (mysqld+0x00000079a933)
    #6 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1107:9 (mysqld+0x00000079a5e2)

  Location is global 'LOCK_alarm' of size 104 at 0x00000207b268 (mysqld+0x00000207b2b8)

  Mutex M560 (0x00000207b290) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thr_alarm /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_alarm.c:78:3 (mysqld+0x000000d587dd)
    #3 signal_hand /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2686:3 (mysqld+0x000000782bcf)

  Mutex M559 (0x00000207b268) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 init_thr_alarm /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_alarm.c:78:3 (mysqld+0x000000d587dd)
    #3 signal_hand /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2686:3 (mysqld+0x000000782bcf)

  Thread T2 (tid=18001, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 start_signal_handler() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2657:14 (mysqld+0x0000007895b1)
    #2 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4380:3 (mysqld+0x000000784151)

  Thread T3 (tid=18005, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 8 at 0x00000207ceb8 by thread T4:
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 my_thread_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_thr_init.c:294:3 (mysqld+0x000000d62f48)
    #2 init_new_connection_handler_thread() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:618:7 (mysqld+0x00000079a245)
    #3 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1080:7 (mysqld+0x00000079a422)

  Previous write of size 8 at 0x00000207ceb8 by thread T3 (mutexes: write M446, write M445):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 my_thread_end /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_thr_init.c:357:5 (mysqld+0x000000d6356a)
    #2 one_thread_per_connection_end(THD*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:1919:3 (mysqld+0x000000781b26)
    #3 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1122:9 (mysqld+0x00000079a771)

  Location is global 'THR_LOCK_threads' of size 104 at 0x00000207ce68 (mysqld+0x00000207ceb8)

  Mutex M446 (0x00000207ce90) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 my_thread_global_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_thr_init.c:149:3 (mysqld+0x000000d62c85)
    #3 my_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_init.c:81:7 (mysqld+0x000000cee1d1)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4215:3 (mysqld+0x000000783bf0)

  Mutex M445 (0x00000207ce68) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 my_thread_global_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_thr_init.c:149:3 (mysqld+0x000000d62c85)
    #3 my_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_init.c:81:7 (mysqld+0x000000cee1d1)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4215:3 (mysqld+0x000000783bf0)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T3 (tid=18005, finished) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 8 at 0x00000206ce70 by thread T4:
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 check_user(THD*, enum_server_command, char const*, unsigned int, char const*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:327:3 (mysqld+0x000000797ad2)
    #2 check_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:897:10 (mysqld+0x00000079d93c)
    #3 login_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:955:10 (mysqld+0x00000079a933)
    #4 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1107:9 (mysqld+0x00000079a5e2)

  Previous write of size 8 at 0x00000206ce70 by main thread (mutexes: write M495, write M494):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 THD::init() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_class.cc:755:3 (mysqld+0x00000074d95a)
    #2 THD::THD() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_class.cc:638:3 (mysqld+0x00000074d314)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5102:20 (mysqld+0x00000078a3ce)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Location is global 'LOCK_global_system_variables' of size 104 at 0x00000206ce20 (mysqld+0x00000206ce70)

  Mutex M495 (0x00000206ce48) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3520:10 (mysqld+0x00000078fe92)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M494 (0x00000206ce20) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3520:10 (mysqld+0x00000078fe92)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 8 at 0x00000206d010 by thread T4:
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 check_user(THD*, enum_server_command, char const*, unsigned int, char const*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:405:9 (mysqld+0x0000007982b7)
    #2 check_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:897:10 (mysqld+0x00000079d93c)
    #3 login_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:955:10 (mysqld+0x00000079a933)
    #4 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1107:9 (mysqld+0x00000079a5e2)

  Previous write of size 8 at 0x00000206d010 by main thread (mutexes: write M504, write M503):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4869:3 (mysqld+0x00000078ad88)
    #2 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Location is global 'LOCK_connection_count' of size 104 at 0x00000206cfc0 (mysqld+0x00000206d010)

  Mutex M504 (0x00000206cfe8) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3525:10 (mysqld+0x00000078ff54)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M503 (0x00000206cfc0) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3525:10 (mysqld+0x00000078ff54)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 8 at 0x00000206ce70 by thread T5:
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 check_user(THD*, enum_server_command, char const*, unsigned int, char const*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:327:3 (mysqld+0x000000797ad2)
    #2 check_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:897:10 (mysqld+0x00000079d93c)
    #3 login_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:955:10 (mysqld+0x00000079a933)
    #4 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1107:9 (mysqld+0x00000079a5e2)

  Previous write of size 8 at 0x00000206ce70 by main thread (mutexes: write M495, write M494):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 THD::init() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_class.cc:755:3 (mysqld+0x00000074d95a)
    #2 THD::THD() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_class.cc:638:3 (mysqld+0x00000074d314)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5102:20 (mysqld+0x00000078a3ce)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Location is global 'LOCK_global_system_variables' of size 104 at 0x00000206ce20 (mysqld+0x00000206ce70)

  Mutex M495 (0x00000206ce48) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3520:10 (mysqld+0x00000078fe92)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M494 (0x00000206ce20) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3520:10 (mysqld+0x00000078fe92)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 1 at 0x000002074688 by thread T6:
    #0 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:625:14 (mysqld+0x00000096923b)
    #1 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #2 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #3 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #4 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #5 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #6 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #7 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 1 at 0x000002074688 by thread T4:
    #0 acl_getroot(THD*, user_resources*, char const*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:879:8 (mysqld+0x00000096992c)
    #1 check_user(THD*, enum_server_command, char const*, unsigned int, char const*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:350:12 (mysqld+0x000000797c84)
    #2 check_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:897:10 (mysqld+0x00000079d93c)
    #3 login_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:955:10 (mysqld+0x00000079a933)
    #4 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1107:9 (mysqld+0x00000079a5e2)

  Location is global 'initialized' of size 1 at 0x000002074688 (mysqld+0x000002074688)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:625:14 in acl_load(THD*, TABLE_LIST*)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 8 at 0x00000206c990 by thread T4:
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:972:3 (mysqld+0x00000079f46f)
    #2 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #3 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x00000206c990 by thread T6 (mutexes: write M469, write M468):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:972:3 (mysqld+0x00000079f46f)
    #2 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #3 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'LOCK_thread_count' of size 104 at 0x00000206c940 (mysqld+0x00000206c990)

  Mutex M469 (0x00000206c968) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3507:10 (mysqld+0x00000078fc6f)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M468 (0x00000206c940) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3507:10 (mysqld+0x00000078fc6f)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 4 at 0x7d7c0000d554 by thread T5 (mutexes: write M467, write M438, write M647):
    #0 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:617:20 (mysqld+0x000000c1105b)
    #1 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #2 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #3 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #4 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #5 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #6 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #7 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #8 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #9 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #10 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #11 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #12 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #13 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #14 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #15 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 4 at 0x7d7c0000d554 by thread T6:
    #0 mi_extra /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_extra.c:105:6 (mysqld+0x000000c21bfc)
    #1 ha_myisam::extra_opt(ha_extra_function, unsigned long) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1862:10 (mysqld+0x000000c09344)
    #2 init_read_record(st_read_record*, THD*, st_table*, SQL_SELECT*, int, bool, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/records.cc:261:7 (mysqld+0x000000a1f76c)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:565:3 (mysqld+0x000000968bdc)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 3240 at 0x7d7c0000d200 allocated by main thread:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1113:7 (mysqld+0x000000b8b274)
    #13 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #14 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M438 (0x00000207ce28) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 my_thread_global_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_thr_init.c:145:3 (mysqld+0x000000d62bd0)
    #3 my_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_init.c:81:7 (mysqld+0x000000cee1d1)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4215:3 (mysqld+0x000000783bf0)

  Mutex M647 (0x7d7c0000d688) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1113:7 (mysqld+0x000000b8b274)
    #12 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #13 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:617:20 in mi_open
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 8 at 0x7d780002ecb0 by thread T6:
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:52:3 (mysqld+0x000000c41bff)
    #2 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #3 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #4 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #5 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #6 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #7 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:739:3 (mysqld+0x000000966a4c)
    #8 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #9 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #10 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #11 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #12 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #13 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d780002ecb0 by thread T5 (mutexes: write M467, write M438, write M690, write M689):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:614:3 (mysqld+0x000000c10f9a)
    #2 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #3 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #4 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2872 at 0x7d780002e800 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M438 (0x00000207ce28) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 my_thread_global_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_thr_init.c:145:3 (mysqld+0x000000d62bd0)
    #3 my_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_init.c:81:7 (mysqld+0x000000cee1d1)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4215:3 (mysqld+0x000000783bf0)

  Mutex M690 (0x7d780002ec88) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M689 (0x7d780002ec60) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 4 at 0x0000020745f0 by thread T4 (mutexes: write M694):
    #0 find_acl_user(char const*, char const*, char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:1699:33 (mysqld+0x00000096c468)
    #1 is_acl_user(char const*, char const*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:1681:8 (mysqld+0x00000096d1ad)
    #2 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3860:15 (mysqld+0x0000007b53c1)
    #3 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #4 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #5 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #6 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x0000020745f0 by thread T6:
    #0 insert_dynamic /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/array.c:107:20 (mysqld+0x000000d331fb)
    #1 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:554:7 (mysqld+0x000000968a2c)
    #2 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #3 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #4 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #5 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'acl_users' of size 24 at 0x0000020745e8 (mysqld+0x0000020745f0)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:1699:33 in find_acl_user(char const*, char const*, char)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 4 at 0x7d780002eb48 by thread T5 (mutexes: write M690):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:182:21 (mysqld+0x000000c4318e)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 lock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:364:16 (mysqld+0x000000774971)
    #4 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:260:34 (mysqld+0x000000772ea1)
    #5 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #6 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #7 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #8 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #9 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #10 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #11 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #12 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #13 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #14 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 4 at 0x7d780002eb48 by thread T6:
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 (mysqld+0x000000c418e7)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:739:3 (mysqld+0x000000966a4c)
    #7 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2872 at 0x7d780002e800 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M690 (0x7d780002ec88) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:182:21 in mi_lock_database
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 8 at 0x0000020745e8 by thread T4 (mutexes: write M694):
    #0 find_acl_user(char const*, char const*, char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:1701:24 (mysqld+0x00000096c48d)
    #1 is_acl_user(char const*, char const*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:1681:8 (mysqld+0x00000096d1ad)
    #2 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3860:15 (mysqld+0x0000007b53c1)
    #3 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #4 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #5 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #6 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x0000020745e8 by thread T6:
    #0 freeze_size /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/array.c:354:18 (mysqld+0x000000d3438b)
    #1 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:563:3 (mysqld+0x000000968b55)
    #2 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #3 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #4 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #5 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'acl_users' of size 24 at 0x0000020745e8 (mysqld+0x0000020745e8)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:1701:24 in find_acl_user(char const*, char const*, char)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 8 at 0x7d4000007590 by thread T5:
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:710:5 (mysqld+0x0000009667d9)
    #2 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #3 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #4 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #5 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #6 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #7 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d4000007590 by thread T4 (mutexes: write M694, write M693):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 is_acl_user(char const*, char const*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:1680:3 (mysqld+0x00000096d198)
    #2 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3860:15 (mysqld+0x0000007b53c1)
    #3 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #4 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #5 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #6 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 256 at 0x7d4000007500 allocated by main thread:
    #0 operator new(unsigned long) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cc:45 (mysqld+0x0000005a12f3)
    #1 acl_init(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:263:14 (mysqld+0x00000096615f)
    #2 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4382:32 (mysqld+0x000000784182)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M693 (0x7d4000007540) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 8 at 0x7d80000044b0 by thread T6:
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:52:3 (mysqld+0x000000c41bff)
    #2 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #3 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #4 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #5 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #6 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #7 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:739:3 (mysqld+0x000000966a4c)
    #8 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #9 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #10 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #11 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #12 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #13 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d80000044b0 by thread T5 (mutexes: write M656, write M655):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:52:3 (mysqld+0x000000c41bff)
    #2 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #3 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #4 lock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:364:16 (mysqld+0x000000774971)
    #5 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:260:34 (mysqld+0x000000772ea1)
    #6 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #7 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #8 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #9 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #10 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #11 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #12 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #13 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #14 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #15 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 3800 at 0x7d8000004000 allocated by main thread:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1130:7 (mysqld+0x000000b8b308)
    #13 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #14 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Mutex M656 (0x7d8000004488) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1130:7 (mysqld+0x000000b8b308)
    #12 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #13 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Mutex M655 (0x7d8000004460) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1130:7 (mysqld+0x000000b8b308)
    #12 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #13 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 8 at 0x7d6c0000f540 by thread T4 (mutexes: write M694):
    #0 find_acl_user(char const*, char const*, char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:1702:5 (mysqld+0x00000096c4de)
    #1 is_acl_user(char const*, char const*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:1681:8 (mysqld+0x00000096d1ad)
    #2 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3860:15 (mysqld+0x0000007b53c1)
    #3 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #4 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #5 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #6 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d6c0000f540 by thread T6:
    #0 realloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:625 (mysqld+0x00000053d91e)
    #1 my_realloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_realloc.c:62:24 (mysqld+0x000000d12769)
    #2 freeze_size /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/array.c:354:28 (mysqld+0x000000d34374)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:563:3 (mysqld+0x000000968b55)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 1792 at 0x7d6c0000f500 allocated by thread T6:
    #0 realloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:625 (mysqld+0x00000053d91e)
    #1 my_realloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_realloc.c:62:24 (mysqld+0x000000d12769)
    #2 freeze_size /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/array.c:354:28 (mysqld+0x000000d34374)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:563:3 (mysqld+0x000000968b55)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:1702:5 in find_acl_user(char const*, char const*, char)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 8 at 0x00000207b310 by thread T6 (mutexes: write M707):
    #0 thr_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:563:7 (mysqld+0x000000d5b1a6)
    #1 thr_multi_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:973:39 (mysqld+0x000000d5e4b1)
    #2 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:276:39 (mysqld+0x0000007731c4)
    #3 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #4 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #5 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #6 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #7 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x00000207b310 by thread T5 (mutexes: write M654):
    #0 thr_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:563:7 (mysqld+0x000000d5b1a6)
    #1 thr_multi_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:973:39 (mysqld+0x000000d5e4b1)
    #2 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:276:39 (mysqld+0x0000007731c4)
    #3 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #4 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #5 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #6 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #7 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'locks_immediate' of size 8 at 0x00000207b310 (mysqld+0x00000207b310)

  Mutex M707 (0x7d740000d5a8) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 thr_lock_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:319:3 (mysqld+0x000000d5a2be)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:524:5 (mysqld+0x000000c102ff)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M654 (0x7d80000043a8) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 thr_lock_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:319:3 (mysqld+0x000000d5a2be)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:524:5 (mysqld+0x000000c102ff)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1130:7 (mysqld+0x000000b8b308)
    #13 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #14 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:563:7 in thr_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 8 at 0x7d6c0000f510 by thread T4 (mutexes: write M694):
    #0 find_acl_user(char const*, char const*, char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:1702:5 (mysqld+0x00000096c56a)
    #1 is_acl_user(char const*, char const*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:1681:8 (mysqld+0x00000096d1ad)
    #2 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3860:15 (mysqld+0x0000007b53c1)
    #3 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #4 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #5 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #6 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d6c0000f510 by thread T6:
    #0 realloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:625 (mysqld+0x00000053d91e)
    #1 my_realloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_realloc.c:62:24 (mysqld+0x000000d12769)
    #2 freeze_size /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/array.c:354:28 (mysqld+0x000000d34374)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:563:3 (mysqld+0x000000968b55)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 1792 at 0x7d6c0000f500 allocated by thread T6:
    #0 realloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:625 (mysqld+0x00000053d91e)
    #1 my_realloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_realloc.c:62:24 (mysqld+0x000000d12769)
    #2 freeze_size /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/array.c:354:28 (mysqld+0x000000d34374)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:563:3 (mysqld+0x000000968b55)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:1702:5 in find_acl_user(char const*, char const*, char)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 8 at 0x7d780002ebd0 by thread T6:
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 thr_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:503:3 (mysqld+0x000000d5a8e5)
    #2 thr_multi_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:973:39 (mysqld+0x000000d5e4b1)
    #3 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:276:39 (mysqld+0x0000007731c4)
    #4 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #5 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #6 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #7 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #8 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #9 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #10 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #11 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #12 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #13 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d780002ebd0 by thread T5 (mutexes: write M688, write M687):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 thr_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:503:3 (mysqld+0x000000d5a8e5)
    #2 thr_multi_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:973:39 (mysqld+0x000000d5e4b1)
    #3 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:276:39 (mysqld+0x0000007731c4)
    #4 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #5 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #6 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #7 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #8 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #9 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #10 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #11 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #12 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #13 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2872 at 0x7d780002e800 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M688 (0x7d780002eba8) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 thr_lock_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:319:3 (mysqld+0x000000d5a2be)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:524:5 (mysqld+0x000000c102ff)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M687 (0x7d780002eb80) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 thr_lock_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:319:3 (mysqld+0x000000d5a2be)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:524:5 (mysqld+0x000000c102ff)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 1 at 0x7d600001dc20 by thread T4 (mutexes: write M694):
    #0 strcmp /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/../sanitizer_common/sanitizer_common_interceptors.inc:221 (mysqld+0x000000543b47)
    #1 find_acl_user(char const*, char const*, char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:1708:21 (mysqld+0x00000096c6aa)
    #2 is_acl_user(char const*, char const*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:1681:8 (mysqld+0x00000096d1ad)
    #3 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3860:15 (mysqld+0x0000007b53c1)
    #4 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #5 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #6 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #7 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 1 at 0x7d600001dc20 by thread T6:
    [failed to restore the stack]

  Location is heap block of size 992 at 0x7d600001dc00 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 alloc_root /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_alloc.c:201:30 (mysqld+0x000000d1412d)
    #3 get_field(st_mem_root*, Field*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:2616:32 (mysqld+0x000000885d88)
    #4 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:425:33 (mysqld+0x000000967877)
    #5 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:1708:21 in find_acl_user(char const*, char const*, char)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 8 at 0x7d6c0000f5c0 by thread T4 (mutexes: write M694):
    #0 find_acl_user(char const*, char const*, char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:1702:5 (mysqld+0x00000096c4de)
    #1 is_acl_user(char const*, char const*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:1681:8 (mysqld+0x00000096d1ad)
    #2 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3860:15 (mysqld+0x0000007b53c1)
    #3 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #4 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #5 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #6 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d6c0000f5c0 by thread T6:
    [failed to restore the stack]

  Location is heap block of size 1792 at 0x7d6c0000f500 allocated by thread T6:
    #0 realloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:625 (mysqld+0x00000053d91e)
    #1 my_realloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_realloc.c:62:24 (mysqld+0x000000d12769)
    #2 freeze_size /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/array.c:354:28 (mysqld+0x000000d34374)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:563:3 (mysqld+0x000000968b55)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:1702:5 in find_acl_user(char const*, char const*, char)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 8 at 0x7d6c0000f590 by thread T4 (mutexes: write M694):
    #0 find_acl_user(char const*, char const*, char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:1702:5 (mysqld+0x00000096c56a)
    #1 is_acl_user(char const*, char const*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:1681:8 (mysqld+0x00000096d1ad)
    #2 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3860:15 (mysqld+0x0000007b53c1)
    #3 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #4 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #5 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #6 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d6c0000f590 by thread T6:
    [failed to restore the stack]

  Location is heap block of size 1792 at 0x7d6c0000f500 allocated by thread T6:
    #0 realloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:625 (mysqld+0x00000053d91e)
    #1 my_realloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_realloc.c:62:24 (mysqld+0x000000d12769)
    #2 freeze_size /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/array.c:354:28 (mysqld+0x000000d34374)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:563:3 (mysqld+0x000000968b55)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:1702:5 in find_acl_user(char const*, char const*, char)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 4 at 0x7d8000004354 by thread T4 (mutexes: write M467, write M438, write M656):
    #0 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:617:20 (mysqld+0x000000c1105b)
    #1 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #2 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #3 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #4 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #5 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #6 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #7 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #8 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #9 mysql_table_grant(THD*, TABLE_LIST*, List<st_lex_user>&, List<LEX_COLUMN>&, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3061:7 (mysqld+0x000000970280)
    #10 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3894:14 (mysqld+0x0000007b5a0a)
    #11 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #12 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #13 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #14 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 4 at 0x7d8000004354 by thread T5 (mutexes: write M694):
    #0 mi_extra /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_extra.c:105:6 (mysqld+0x000000c21bfc)
    #1 ha_myisam::extra_opt(ha_extra_function, unsigned long) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1862:10 (mysqld+0x000000c09344)
    #2 init_read_record(st_read_record*, THD*, st_table*, SQL_SELECT*, int, bool, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/records.cc:261:7 (mysqld+0x000000a1f76c)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:377:3 (mysqld+0x0000009673f1)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 3800 at 0x7d8000004000 allocated by main thread:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1130:7 (mysqld+0x000000b8b308)
    #13 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #14 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M438 (0x00000207ce28) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 my_thread_global_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_thr_init.c:145:3 (mysqld+0x000000d62bd0)
    #3 my_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_init.c:81:7 (mysqld+0x000000cee1d1)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4215:3 (mysqld+0x000000783bf0)

  Mutex M656 (0x7d8000004488) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1130:7 (mysqld+0x000000b8b308)
    #12 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #13 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:617:20 in mi_open
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 4 at 0x7d780002eb4c by thread T6 (mutexes: write M694):
    #0 _mi_read_rnd_static_record /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_statrec.c:258:5 (mysqld+0x000000c48be6)
    #1 mi_scan /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_scan.c:44:3 (mysqld+0x000000c45f94)
    #2 ha_myisam::rnd_next(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1750:13 (mysqld+0x000000c0857b)
    #3 rr_sequential(st_read_record*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/records.cc:381:15 (mysqld+0x000000a220f5)
    #4 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:331:12 (mysqld+0x000000966e1b)
    #5 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d780002eb4c by thread T5 (mutexes: write M690):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:62:7 (mysqld+0x000000c41da8)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:739:3 (mysqld+0x000000966a4c)
    #7 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2872 at 0x7d780002e800 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M690 (0x7d780002ec88) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_statrec.c:258:5 in _mi_read_rnd_static_record
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 8 at 0x7d780002e0b0 by thread T5 (mutexes: write M467, write M438):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:614:3 (mysqld+0x000000c10f9a)
    #2 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #3 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #4 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d780002e0b0 by thread T4 (mutexes: write M700, write M699):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:52:3 (mysqld+0x000000c41bff)
    #2 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #3 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #4 lock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:364:16 (mysqld+0x000000774971)
    #5 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:260:34 (mysqld+0x000000772ea1)
    #6 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #7 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #8 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #9 mysql_table_grant(THD*, TABLE_LIST*, List<st_lex_user>&, List<LEX_COLUMN>&, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3061:7 (mysqld+0x000000970280)
    #10 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3894:14 (mysqld+0x0000007b5a0a)
    #11 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #12 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #13 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #14 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2640 at 0x7d780002dc00 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M438 (0x00000207ce28) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 my_thread_global_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_thr_init.c:145:3 (mysqld+0x000000d62bd0)
    #3 my_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_init.c:81:7 (mysqld+0x000000cee1d1)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4215:3 (mysqld+0x000000783bf0)

  Mutex M700 (0x7d780002e088) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M699 (0x7d780002e060) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 4 at 0x7d800000434c by thread T6 (mutexes: write M694):
    #0 _mi_read_rnd_dynamic_record /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_dynrec.c:1858:3 (mysqld+0x000000c62904)
    #1 mi_scan /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_scan.c:44:3 (mysqld+0x000000c45f94)
    #2 ha_myisam::rnd_next(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1750:13 (mysqld+0x000000c0857b)
    #3 rr_sequential(st_read_record*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/records.cc:381:15 (mysqld+0x000000a220f5)
    #4 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:422:12 (mysqld+0x0000009677f5)
    #5 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d800000434c by thread T4 (mutexes: write M656):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:233:23 (mysqld+0x000000c438cc)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 lock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:364:16 (mysqld+0x000000774971)
    #4 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:260:34 (mysqld+0x000000772ea1)
    #5 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #6 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #7 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #8 mysql_table_grant(THD*, TABLE_LIST*, List<st_lex_user>&, List<LEX_COLUMN>&, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3061:7 (mysqld+0x000000970280)
    #9 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3894:14 (mysqld+0x0000007b5a0a)
    #10 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #11 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #12 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #13 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 3800 at 0x7d8000004000 allocated by main thread:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1130:7 (mysqld+0x000000b8b308)
    #13 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #14 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M656 (0x7d8000004488) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1130:7 (mysqld+0x000000b8b308)
    #12 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #13 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_dynrec.c:1858:3 in _mi_read_rnd_dynamic_record
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 8 at 0x7d740000d5d0 by thread T5:
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 thr_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:503:3 (mysqld+0x000000d5a8e5)
    #2 thr_multi_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:973:39 (mysqld+0x000000d5e4b1)
    #3 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:276:39 (mysqld+0x0000007731c4)
    #4 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #5 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #6 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #7 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #8 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #9 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #10 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #11 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #12 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #13 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d740000d5d0 by thread T4 (mutexes: write M707, write M706):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 thr_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:503:3 (mysqld+0x000000d5a8e5)
    #2 thr_multi_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:973:39 (mysqld+0x000000d5e4b1)
    #3 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:276:39 (mysqld+0x0000007731c4)
    #4 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #5 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #6 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #7 mysql_table_grant(THD*, TABLE_LIST*, List<st_lex_user>&, List<LEX_COLUMN>&, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3061:7 (mysqld+0x000000970280)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3894:14 (mysqld+0x0000007b5a0a)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2408 at 0x7d740000d200 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M707 (0x7d740000d5a8) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 thr_lock_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:319:3 (mysqld+0x000000d5a2be)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:524:5 (mysqld+0x000000c102ff)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M706 (0x7d740000d580) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 thr_lock_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:319:3 (mysqld+0x000000d5a2be)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:524:5 (mysqld+0x000000c102ff)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 1 at 0x7d600000ab80 by thread T6 (mutexes: write M694):
    #0 bitmap_is_set(st_bitmap const*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/../include/my_bitmap.h:141:10 (mysqld+0x000000700490)
    #1 Field_string::val_str(String*, String*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/field.cc:6609:3 (mysqld+0x000000722b9e)
    #2 Field::val_str(String*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./field.h:121:48 (mysqld+0x0000005eda76)
    #3 get_field(st_mem_root*, Field*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:2614:3 (mysqld+0x000000885d4c)
    #4 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:571:30 (mysqld+0x000000968cab)
    #5 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d600000ab80 by thread T5 (mutexes: write M467):
    #0 bitmap_is_set_all /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_bitmap.c:299:23 (mysqld+0x000000d4a00b)
    #1 handler::ha_reset() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4571:3 (mysqld+0x000000a3e464)
    #2 close_thread_table(THD*, st_table**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1403:5 (mysqld+0x00000084f783)
    #3 close_open_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1195:23 (mysqld+0x00000084f0ec)
    #4 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1347:5 (mysqld+0x00000084eb79)
    #5 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:739:3 (mysqld+0x000000966a4c)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 992 at 0x7d600000a800 allocated by main thread:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 alloc_root /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_alloc.c:201:30 (mysqld+0x000000d1412d)
    #3 open_binary_frm(THD*, st_table_share*, unsigned char*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1050:2 (mysqld+0x00000087a669)
    #4 open_table_def(THD*, st_table_share*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:630:12 (mysqld+0x0000008762be)
    #5 get_table_share(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:377:7 (mysqld+0x000000849690)
    #6 get_table_share_with_create(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:456:10 (mysqld+0x00000086ed96)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3837:16 (mysqld+0x000000854892)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1113:7 (mysqld+0x000000b8b274)
    #13 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #14 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/../include/my_bitmap.h:141:10 in bitmap_is_set(st_bitmap const*, unsigned int)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 8 at 0x00000207b318 by thread T5 (mutexes: write M707):
    #0 wait_for_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:408:3 (mysqld+0x000000d5c5f2)
    #1 thr_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:704:3 (mysqld+0x000000d5c192)
    #2 thr_multi_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:973:39 (mysqld+0x000000d5e4b1)
    #3 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:276:39 (mysqld+0x0000007731c4)
    #4 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #5 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #6 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #7 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #8 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #9 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #10 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #11 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #12 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #13 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x00000207b318 by thread T4 (mutexes: write M654):
    #0 wait_for_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:408:3 (mysqld+0x000000d5c5f2)
    #1 thr_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:704:3 (mysqld+0x000000d5c192)
    #2 thr_multi_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:973:39 (mysqld+0x000000d5e4b1)
    #3 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:276:39 (mysqld+0x0000007731c4)
    #4 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #5 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #6 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #7 mysql_table_grant(THD*, TABLE_LIST*, List<st_lex_user>&, List<LEX_COLUMN>&, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3061:7 (mysqld+0x000000970280)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3894:14 (mysqld+0x0000007b5a0a)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'locks_waited' of size 8 at 0x00000207b318 (mysqld+0x00000207b318)

  Mutex M707 (0x7d740000d5a8) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 thr_lock_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:319:3 (mysqld+0x000000d5a2be)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:524:5 (mysqld+0x000000c102ff)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M654 (0x7d80000043a8) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 thr_lock_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:319:3 (mysqld+0x000000d5a2be)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:524:5 (mysqld+0x000000c102ff)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1130:7 (mysqld+0x000000b8b308)
    #13 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #14 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:408:3 in wait_for_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 4 at 0x7d7c0000d54c by thread T6 (mutexes: write M694):
    #0 _mi_read_rnd_static_record /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_statrec.c:258:5 (mysqld+0x000000c48be6)
    #1 mi_scan /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_scan.c:44:3 (mysqld+0x000000c45f94)
    #2 ha_myisam::rnd_next(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1750:13 (mysqld+0x000000c0857b)
    #3 rr_sequential(st_read_record*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/records.cc:381:15 (mysqld+0x000000a220f5)
    #4 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:568:12 (mysqld+0x000000968c29)
    #5 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d7c0000d54c by thread T5 (mutexes: write M647):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:62:7 (mysqld+0x000000c41da8)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:739:3 (mysqld+0x000000966a4c)
    #7 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 3240 at 0x7d7c0000d200 allocated by main thread:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1113:7 (mysqld+0x000000b8b274)
    #13 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #14 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M647 (0x7d7c0000d688) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1113:7 (mysqld+0x000000b8b274)
    #12 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #13 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_statrec.c:258:5 in _mi_read_rnd_static_record
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 4 at 0x00000206c934 by thread T6:
    #0 close_open_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1188:3 (mysqld+0x00000084efb9)
    #1 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1347:5 (mysqld+0x00000084eb79)
    #2 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:739:3 (mysqld+0x000000966a4c)
    #3 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #4 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #5 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x00000206c934 by thread T5 (mutexes: write M467, write M466):
    #0 safe_mutex_unlock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:192:12 (mysqld+0x000000d61bd7)
    #1 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2935:3 (mysqld+0x000000858a0f)
    #2 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #3 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #4 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #5 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'LOCK_open' of size 104 at 0x00000206c8d8 (mysqld+0x00000206c934)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M466 (0x00000206c8d8) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1188:3 in close_open_tables(THD*)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 8 at 0x00000206c928 by thread T6:
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 close_open_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1190:3 (mysqld+0x00000084f04d)
    #2 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1347:5 (mysqld+0x00000084eb79)
    #3 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:739:3 (mysqld+0x000000966a4c)
    #4 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #5 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #6 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #7 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #8 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #9 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x00000206c928 by thread T5 (mutexes: write M467, write M466):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2705:3 (mysqld+0x00000085771a)
    #2 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #3 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #4 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #5 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'LOCK_open' of size 104 at 0x00000206c8d8 (mysqld+0x00000206c928)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M466 (0x00000206c8d8) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 1 at 0x7d800000435e by thread T4 (mutexes: write M507, write M694):
    #0 _mi_mark_file_changed /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:535:28 (mysqld+0x000000c455ad)
    #1 mi_write /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_write.c:86:7 (mysqld+0x000000c65882)
    #2 ha_myisam::write_row(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:772:10 (mysqld+0x000000c01b67)
    #3 handler::ha_write_row(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4591:7 (mysqld+0x000000a3e682)
    #4 replace_user_table(THD*, st_table*, st_lex_user const&, unsigned long, bool, bool, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2071:19 (mysqld+0x000000973e84)
    #5 mysql_table_grant(THD*, TABLE_LIST*, List<st_lex_user>&, List<LEX_COLUMN>&, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3086:11 (mysqld+0x000000970535)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3894:14 (mysqld+0x0000007b5a0a)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 1 at 0x7d800000435e by thread T6:
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 (mysqld+0x000000c4195b)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:739:3 (mysqld+0x000000966a4c)
    #7 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 3800 at 0x7d8000004000 allocated by main thread:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1130:7 (mysqld+0x000000b8b308)
    #13 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #14 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:535:28 in _mi_mark_file_changed
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 4 at 0x7d80000040ec by thread T4 (mutexes: write M507, write M694):
    #0 _mi_mark_file_changed /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:536:30 (mysqld+0x000000c455e4)
    #1 mi_write /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_write.c:86:7 (mysqld+0x000000c65882)
    #2 ha_myisam::write_row(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:772:10 (mysqld+0x000000c01b67)
    #3 handler::ha_write_row(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4591:7 (mysqld+0x000000a3e682)
    #4 replace_user_table(THD*, st_table*, st_lex_user const&, unsigned long, bool, bool, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2071:19 (mysqld+0x000000973e84)
    #5 mysql_table_grant(THD*, TABLE_LIST*, List<st_lex_user>&, List<LEX_COLUMN>&, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3086:11 (mysqld+0x000000970535)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3894:14 (mysqld+0x0000007b5a0a)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 4 at 0x7d80000040ec by thread T6:
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 (mysqld+0x000000c41997)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:739:3 (mysqld+0x000000966a4c)
    #7 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 3800 at 0x7d8000004000 allocated by main thread:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1130:7 (mysqld+0x000000b8b308)
    #13 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #14 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:536:30 in _mi_mark_file_changed
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 1 at 0x7d800000435d by thread T4 (mutexes: write M507, write M694):
    #0 _mi_writeinfo /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:473:19 (mysqld+0x000000c4540d)
    #1 mi_write /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_write.c:158:3 (mysqld+0x000000c6663e)
    #2 ha_myisam::write_row(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:772:10 (mysqld+0x000000c01b67)
    #3 handler::ha_write_row(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4591:7 (mysqld+0x000000a3e682)
    #4 replace_user_table(THD*, st_table*, st_lex_user const&, unsigned long, bool, bool, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2071:19 (mysqld+0x000000973e84)
    #5 mysql_table_grant(THD*, TABLE_LIST*, List<st_lex_user>&, List<LEX_COLUMN>&, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3086:11 (mysqld+0x000000970535)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3894:14 (mysqld+0x0000007b5a0a)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 1 at 0x7d800000435d by thread T6 (mutexes: write M656):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:82:2 (mysqld+0x000000c421d0)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:739:3 (mysqld+0x000000966a4c)
    #7 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 3800 at 0x7d8000004000 allocated by main thread:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1130:7 (mysqld+0x000000b8b308)
    #13 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #14 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M656 (0x7d8000004488) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1130:7 (mysqld+0x000000b8b308)
    #12 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #13 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:473:19 in _mi_writeinfo
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 4 at 0x7d780002df4c by thread T4 (mutexes: write M507, write M694):
    #0 _mi_read_static_record /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_statrec.c:196:3 (mysqld+0x000000c48318)
    #1 mi_rkey /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rkey.c:173:8 (mysqld+0x000000c268ec)
    #2 ha_myisam::index_read_idx_map(unsigned char*, unsigned int, unsigned char const*, unsigned long, ha_rkey_function) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1671:13 (mysqld+0x000000c07b6a)
    #3 replace_table_table(THD*, GRANT_TABLE*, st_table*, st_lex_user const&, char const*, char const*, unsigned long, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2708:7 (mysqld+0x000000974e7d)
    #4 mysql_table_grant(THD*, TABLE_LIST*, List<st_lex_user>&, List<LEX_COLUMN>&, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3157:9 (mysqld+0x000000970a5a)
    #5 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3894:14 (mysqld+0x0000007b5a0a)
    #6 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #7 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #8 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #9 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d780002df4c by thread T6 (mutexes: write M700):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:183:23 (mysqld+0x000000c431d6)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 lock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:364:16 (mysqld+0x000000774971)
    #4 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:260:34 (mysqld+0x000000772ea1)
    #5 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #6 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #7 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #8 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #9 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #10 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #11 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #12 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #13 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #14 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2640 at 0x7d780002dc00 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M700 (0x7d780002e088) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_statrec.c:196:3 in _mi_read_static_record
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 1 at 0x7d780002df5e by thread T4 (mutexes: write M507, write M694):
    #0 _mi_mark_file_changed /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:535:28 (mysqld+0x000000c455ad)
    #1 mi_write /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_write.c:86:7 (mysqld+0x000000c65882)
    #2 ha_myisam::write_row(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:772:10 (mysqld+0x000000c01b67)
    #3 handler::ha_write_row(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4591:7 (mysqld+0x000000a3e682)
    #4 replace_table_table(THD*, GRANT_TABLE*, st_table*, st_lex_user const&, char const*, char const*, unsigned long, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2769:11 (mysqld+0x00000097572b)
    #5 mysql_table_grant(THD*, TABLE_LIST*, List<st_lex_user>&, List<LEX_COLUMN>&, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3157:9 (mysqld+0x000000970a5a)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3894:14 (mysqld+0x0000007b5a0a)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 1 at 0x7d780002df5e by thread T6:
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 (mysqld+0x000000c4195b)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 lock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:364:16 (mysqld+0x000000774971)
    #4 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:260:34 (mysqld+0x000000772ea1)
    #5 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #6 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #7 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #8 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #9 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #10 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #11 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #12 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #13 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #14 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2640 at 0x7d780002dc00 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:535:28 in _mi_mark_file_changed
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 4 at 0x7d780002dcec by thread T4 (mutexes: write M507, write M694):
    #0 _mi_mark_file_changed /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:536:30 (mysqld+0x000000c455e4)
    #1 mi_write /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_write.c:86:7 (mysqld+0x000000c65882)
    #2 ha_myisam::write_row(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:772:10 (mysqld+0x000000c01b67)
    #3 handler::ha_write_row(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4591:7 (mysqld+0x000000a3e682)
    #4 replace_table_table(THD*, GRANT_TABLE*, st_table*, st_lex_user const&, char const*, char const*, unsigned long, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2769:11 (mysqld+0x00000097572b)
    #5 mysql_table_grant(THD*, TABLE_LIST*, List<st_lex_user>&, List<LEX_COLUMN>&, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3157:9 (mysqld+0x000000970a5a)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3894:14 (mysqld+0x0000007b5a0a)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 4 at 0x7d780002dcec by thread T6:
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 (mysqld+0x000000c41997)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 lock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:364:16 (mysqld+0x000000774971)
    #4 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:260:34 (mysqld+0x000000772ea1)
    #5 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #6 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #7 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #8 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #9 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #10 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #11 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #12 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #13 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #14 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2640 at 0x7d780002dc00 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:536:30 in _mi_mark_file_changed
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 4 at 0x7d780002df54 by thread T4 (mutexes: write M507, write M694):
    #0 _mi_write_static_record /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_statrec.c:67:16 (mysqld+0x000000c46efc)
    #1 mi_write /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_write.c:146:9 (mysqld+0x000000c6631e)
    #2 ha_myisam::write_row(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:772:10 (mysqld+0x000000c01b67)
    #3 handler::ha_write_row(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4591:7 (mysqld+0x000000a3e682)
    #4 replace_table_table(THD*, GRANT_TABLE*, st_table*, st_lex_user const&, char const*, char const*, unsigned long, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2769:11 (mysqld+0x00000097572b)
    #5 mysql_table_grant(THD*, TABLE_LIST*, List<st_lex_user>&, List<LEX_COLUMN>&, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3157:9 (mysqld+0x000000970a5a)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3894:14 (mysqld+0x0000007b5a0a)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d780002df54 by thread T6 (mutexes: write M467, write M438, write M700):
    #0 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:617:20 (mysqld+0x000000c1105b)
    #1 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #2 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #3 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #4 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #5 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #6 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #7 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #8 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #9 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #10 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #11 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #12 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #13 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #14 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #15 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2640 at 0x7d780002dc00 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M438 (0x00000207ce28) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 my_thread_global_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_thr_init.c:145:3 (mysqld+0x000000d62bd0)
    #3 my_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_init.c:81:7 (mysqld+0x000000cee1d1)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4215:3 (mysqld+0x000000783bf0)

  Mutex M700 (0x7d780002e088) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_statrec.c:67:16 in _mi_write_static_record
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 4 at 0x7d740000d54c by thread T4 (mutexes: write M507, write M694):
    #0 _mi_read_static_record /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_statrec.c:196:3 (mysqld+0x000000c48318)
    #1 mi_rkey /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rkey.c:173:8 (mysqld+0x000000c268ec)
    #2 ha_myisam::index_read_map(unsigned char*, unsigned char const*, unsigned long, ha_rkey_function) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1661:13 (mysqld+0x000000c07a59)
    #3 replace_column_table(GRANT_TABLE*, st_table*, st_lex_user const&, List<LEX_COLUMN>&, char const*, char const*, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2527:9 (mysqld+0x000000976399)
    #4 mysql_table_grant(THD*, TABLE_LIST*, List<st_lex_user>&, List<LEX_COLUMN>&, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3166:12 (mysqld+0x000000970abf)
    #5 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3894:14 (mysqld+0x0000007b5a0a)
    #6 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #7 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #8 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #9 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d740000d54c by thread T6 (mutexes: write M709):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:183:23 (mysqld+0x000000c431d6)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 lock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:364:16 (mysqld+0x000000774971)
    #4 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:260:34 (mysqld+0x000000772ea1)
    #5 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #6 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #7 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #8 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #9 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #10 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #11 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #12 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #13 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #14 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2408 at 0x7d740000d200 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M709 (0x7d740000d688) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_statrec.c:196:3 in _mi_read_static_record
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 1 at 0x7d740000d55e by thread T4 (mutexes: write M507, write M694):
    #0 _mi_mark_file_changed /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:535:28 (mysqld+0x000000c455ad)
    #1 mi_write /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_write.c:86:7 (mysqld+0x000000c65882)
    #2 ha_myisam::write_row(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:772:10 (mysqld+0x000000c01b67)
    #3 handler::ha_write_row(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4591:7 (mysqld+0x000000a3e682)
    #4 replace_column_table(GRANT_TABLE*, st_table*, st_lex_user const&, List<LEX_COLUMN>&, char const*, char const*, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2583:18 (mysqld+0x000000976bcb)
    #5 mysql_table_grant(THD*, TABLE_LIST*, List<st_lex_user>&, List<LEX_COLUMN>&, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3166:12 (mysqld+0x000000970abf)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3894:14 (mysqld+0x0000007b5a0a)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 1 at 0x7d740000d55e by thread T6:
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 (mysqld+0x000000c4195b)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 lock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:364:16 (mysqld+0x000000774971)
    #4 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:260:34 (mysqld+0x000000772ea1)
    #5 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #6 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #7 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #8 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #9 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #10 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #11 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #12 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #13 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #14 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2408 at 0x7d740000d200 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:535:28 in _mi_mark_file_changed
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 4 at 0x7d740000d2ec by thread T4 (mutexes: write M507, write M694):
    #0 _mi_mark_file_changed /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:536:30 (mysqld+0x000000c455e4)
    #1 mi_write /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_write.c:86:7 (mysqld+0x000000c65882)
    #2 ha_myisam::write_row(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:772:10 (mysqld+0x000000c01b67)
    #3 handler::ha_write_row(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4591:7 (mysqld+0x000000a3e682)
    #4 replace_column_table(GRANT_TABLE*, st_table*, st_lex_user const&, List<LEX_COLUMN>&, char const*, char const*, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2583:18 (mysqld+0x000000976bcb)
    #5 mysql_table_grant(THD*, TABLE_LIST*, List<st_lex_user>&, List<LEX_COLUMN>&, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3166:12 (mysqld+0x000000970abf)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3894:14 (mysqld+0x0000007b5a0a)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 4 at 0x7d740000d2ec by thread T6:
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 (mysqld+0x000000c41997)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 lock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:364:16 (mysqld+0x000000774971)
    #4 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:260:34 (mysqld+0x000000772ea1)
    #5 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #6 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #7 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #8 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #9 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #10 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #11 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #12 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #13 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #14 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2408 at 0x7d740000d200 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:536:30 in _mi_mark_file_changed
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 4 at 0x7d740000d554 by thread T4 (mutexes: write M507, write M694):
    #0 _mi_write_static_record /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_statrec.c:67:16 (mysqld+0x000000c46efc)
    #1 mi_write /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_write.c:146:9 (mysqld+0x000000c6631e)
    #2 ha_myisam::write_row(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:772:10 (mysqld+0x000000c01b67)
    #3 handler::ha_write_row(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4591:7 (mysqld+0x000000a3e682)
    #4 replace_column_table(GRANT_TABLE*, st_table*, st_lex_user const&, List<LEX_COLUMN>&, char const*, char const*, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2583:18 (mysqld+0x000000976bcb)
    #5 mysql_table_grant(THD*, TABLE_LIST*, List<st_lex_user>&, List<LEX_COLUMN>&, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3166:12 (mysqld+0x000000970abf)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3894:14 (mysqld+0x0000007b5a0a)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d740000d554 by thread T6 (mutexes: write M467, write M438, write M709):
    #0 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:617:20 (mysqld+0x000000c1105b)
    #1 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #2 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #3 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #4 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #5 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #6 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #7 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #8 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #9 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #10 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #11 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #12 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #13 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #14 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #15 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2408 at 0x7d740000d200 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M438 (0x00000207ce28) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 my_thread_global_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_thr_init.c:145:3 (mysqld+0x000000d62bd0)
    #3 my_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_init.c:81:7 (mysqld+0x000000cee1d1)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4215:3 (mysqld+0x000000783bf0)

  Mutex M709 (0x7d740000d688) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_statrec.c:67:16 in _mi_write_static_record
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 8 at 0x7d780002dc18 by thread T4 (mutexes: write M698):
    #0 memcpy /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:677 (mysqld+0x000000547edb)
    #1 mi_update_status /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:323:27 (mysqld+0x000000c445ec)
    #2 thr_unlock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:790:7 (mysqld+0x000000d5d135)
    #3 thr_multi_unlock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:1050:7 (mysqld+0x000000d5ef0e)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:389:5 (mysqld+0x000000774ecf)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1591:3 (mysqld+0x0000007a2d76)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x7d780002dc18 by thread T6 (mutexes: write M467):
    #0 mi_status /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_info.c:52:33 (mysqld+0x000000c24706)
    #1 ha_myisam::info(unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1779:10 (mysqld+0x000000c088a1)
    #2 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:717:3 (mysqld+0x000000c01377)
    #3 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #4 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2640 at 0x7d780002dc00 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M698 (0x7d780002dfa8) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 thr_lock_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:319:3 (mysqld+0x000000d5a2be)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:524:5 (mysqld+0x000000c102ff)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:323:27 in mi_update_status
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 8 at 0x7d780002dc20 by thread T4 (mutexes: write M698):
    #0 memcpy /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:677 (mysqld+0x000000547edb)
    #1 mi_update_status /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:323:27 (mysqld+0x000000c445ec)
    #2 thr_unlock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:790:7 (mysqld+0x000000d5d135)
    #3 thr_multi_unlock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:1050:7 (mysqld+0x000000d5ef0e)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:389:5 (mysqld+0x000000774ecf)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1591:3 (mysqld+0x0000007a2d76)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x7d780002dc20 by thread T6 (mutexes: write M467):
    #0 mi_status /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_info.c:53:33 (mysqld+0x000000c2477f)
    #1 ha_myisam::info(unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1779:10 (mysqld+0x000000c088a1)
    #2 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:717:3 (mysqld+0x000000c01377)
    #3 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #4 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2640 at 0x7d780002dc00 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M698 (0x7d780002dfa8) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 thr_lock_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:319:3 (mysqld+0x000000d5a2be)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:524:5 (mysqld+0x000000c102ff)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:323:27 in mi_update_status
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 8 at 0x7d780002dc28 by thread T4 (mutexes: write M698):
    #0 memcpy /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:677 (mysqld+0x000000547edb)
    #1 mi_update_status /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:323:27 (mysqld+0x000000c445ec)
    #2 thr_unlock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:790:7 (mysqld+0x000000d5d135)
    #3 thr_multi_unlock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:1050:7 (mysqld+0x000000d5ef0e)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:389:5 (mysqld+0x000000774ecf)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1591:3 (mysqld+0x0000007a2d76)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x7d780002dc28 by thread T6 (mutexes: write M467):
    #0 mi_status /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_info.c:54:37 (mysqld+0x000000c247fe)
    #1 ha_myisam::info(unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1779:10 (mysqld+0x000000c088a1)
    #2 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:717:3 (mysqld+0x000000c01377)
    #3 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #4 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2640 at 0x7d780002dc00 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M698 (0x7d780002dfa8) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 thr_lock_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:319:3 (mysqld+0x000000d5a2be)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:524:5 (mysqld+0x000000c102ff)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:323:27 in mi_update_status
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 8 at 0x7d780002dc38 by thread T4 (mutexes: write M698):
    #0 memcpy /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:677 (mysqld+0x000000547edb)
    #1 mi_update_status /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:323:27 (mysqld+0x000000c445ec)
    #2 thr_unlock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:790:7 (mysqld+0x000000d5d135)
    #3 thr_multi_unlock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:1050:7 (mysqld+0x000000d5ef0e)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:389:5 (mysqld+0x000000774ecf)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1591:3 (mysqld+0x0000007a2d76)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x7d780002dc38 by thread T6 (mutexes: write M467):
    #0 mi_status /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_info.c:56:39 (mysqld+0x000000c248fc)
    #1 ha_myisam::info(unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1779:10 (mysqld+0x000000c088a1)
    #2 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:717:3 (mysqld+0x000000c01377)
    #3 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #4 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2640 at 0x7d780002dc00 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M698 (0x7d780002dfa8) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 thr_lock_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:319:3 (mysqld+0x000000d5a2be)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:524:5 (mysqld+0x000000c102ff)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:323:27 in mi_update_status
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 8 at 0x7d780002dc40 by thread T4 (mutexes: write M698):
    #0 memcpy /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:677 (mysqld+0x000000547edb)
    #1 mi_update_status /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:323:27 (mysqld+0x000000c445ec)
    #2 thr_unlock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:790:7 (mysqld+0x000000d5d135)
    #3 thr_multi_unlock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:1050:7 (mysqld+0x000000d5ef0e)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:389:5 (mysqld+0x000000774ecf)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1591:3 (mysqld+0x0000007a2d76)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x7d780002dc40 by thread T6 (mutexes: write M467):
    #0 mi_status /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_info.c:55:39 (mysqld+0x000000c2487d)
    #1 ha_myisam::info(unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1779:10 (mysqld+0x000000c088a1)
    #2 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:717:3 (mysqld+0x000000c01377)
    #3 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #4 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2640 at 0x7d780002dc00 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M698 (0x7d780002dfa8) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 thr_lock_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:319:3 (mysqld+0x000000d5a2be)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:524:5 (mysqld+0x000000c102ff)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:323:27 in mi_update_status
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 8 at 0x7d740001e100 by thread T5 (mutexes: write M507, read M701):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 key_cache_read /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mf_keycache.c:2548:5 (mysqld+0x000000cf5513)
    #2 _mi_fetch_keypage /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_page.c:31:16 (mysqld+0x000000c399f6)
    #3 _mi_search_first /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_search.c:1334:10 (mysqld+0x000000c34074)
    #4 mi_rnext /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rnext.c:54:13 (mysqld+0x000000c2718a)
    #5 mi_rfirst /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rfirst.c:25:3 (mysqld+0x000000c79c79)
    #6 ha_myisam::index_first(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1710:13 (mysqld+0x000000c08156)
    #7 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3652:8 (mysqld+0x00000097b901)
    #8 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #9 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #10 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #11 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #12 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #13 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #14 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d740001e100 by thread T4 (mutexes: write M656, write M552, write M551):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 flush_cached_blocks /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mf_keycache.c:3471:7 (mysqld+0x000000d03dcf)
    #2 flush_key_blocks_int /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mf_keycache.c:3760:19 (mysqld+0x000000cfea8a)
    #3 flush_key_blocks /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mf_keycache.c:4017:10 (mysqld+0x000000cfdf3a)
    #4 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:64:31 (mysqld+0x000000c41ee5)
    #5 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #6 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #7 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #8 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #9 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1591:3 (mysqld+0x0000007a2d76)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2440 at 0x7d740001e000 allocated by main thread:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 create_key_cache(char const*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/set_var.cc:4059:32 (mysqld+0x0000007d4a7c)
    #3 get_or_create_key_cache(char const*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/set_var.cc:4093:16 (mysqld+0x0000007dbfd3)
    #4 mysql_init_variables() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:7620:25 (mysqld+0x000000790f2a)
    #5 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3174:7 (mysqld+0x000000784a19)
    #6 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M701 (0x7d780002e5a8) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:527:7 (mysqld+0x000000c103d6)
    #2 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #3 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #4 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M656 (0x7d8000004488) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1130:7 (mysqld+0x000000b8b308)
    #12 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #13 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Mutex M552 (0x7d740001e0d8) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_key_cache /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mf_keycache.c:402:5 (mysqld+0x000000cf26ac)
    #3 ha_init_key_cache /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:3656:5 (mysqld+0x000000a3b002)
    #4 process_key_caches(int (*)(char const*, st_key_cache*)) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/set_var.cc:4114:5 (mysqld+0x0000007dc0ff)
    #5 init_server_components() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3875:3 (mysqld+0x000000787e93)
    #6 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4354:7 (mysqld+0x0000007840c8)

  Mutex M551 (0x7d740001e0b0) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 init_key_cache /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mf_keycache.c:402:5 (mysqld+0x000000cf26ac)
    #3 ha_init_key_cache /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:3656:5 (mysqld+0x000000a3b002)
    #4 process_key_caches(int (*)(char const*, st_key_cache*)) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/set_var.cc:4114:5 (mysqld+0x0000007dc0ff)
    #5 init_server_components() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3875:3 (mysqld+0x000000787e93)
    #6 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4354:7 (mysqld+0x0000007840c8)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 8 at 0x7d780002def8 by thread T4 (mutexes: write M700):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:98:45 (mysqld+0x000000c42605)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1591:3 (mysqld+0x0000007a2d76)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x7d780002def8 by thread T5 (mutexes: write M507, read M701):
    #0 _mi_test_if_changed /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:484:38 (mysqld+0x000000c439da)
    #1 mi_rnext /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rnext.c:43:11 (mysqld+0x000000c26f28)
    #2 mi_rfirst /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rfirst.c:25:3 (mysqld+0x000000c79c79)
    #3 ha_myisam::index_first(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1710:13 (mysqld+0x000000c08156)
    #4 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3652:8 (mysqld+0x00000097b901)
    #5 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2640 at 0x7d780002dc00 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M700 (0x7d780002e088) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M701 (0x7d780002e5a8) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:527:7 (mysqld+0x000000c103d6)
    #2 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #3 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #4 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:98:45 in mi_lock_database
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 8 at 0x7d780002def8 by thread T5 (mutexes: write M507, read M701):
    #0 _mi_test_if_changed /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:484:38 (mysqld+0x000000c439da)
    #1 mi_rnext /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rnext.c:43:11 (mysqld+0x000000c26f28)
    #2 ha_myisam::index_next(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1692:13 (mysqld+0x000000c07eb6)
    #3 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3687:13 (mysqld+0x00000097bcc3)
    #4 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d780002def8 by thread T4 (mutexes: write M700):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:98:45 (mysqld+0x000000c42605)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1591:3 (mysqld+0x0000007a2d76)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2640 at 0x7d780002dc00 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M701 (0x7d780002e5a8) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:527:7 (mysqld+0x000000c103d6)
    #2 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #3 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #4 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M700 (0x7d780002e088) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:484:38 in _mi_test_if_changed
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 8 at 0x7d780002dc68 by thread T4 (mutexes: write M700):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:98:24 (mysqld+0x000000c42640)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1591:3 (mysqld+0x0000007a2d76)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x7d780002dc68 by thread T5 (mutexes: write M507, read M701):
    #0 _mi_test_if_changed /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:484:20 (mysqld+0x000000c439b4)
    #1 mi_rnext /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rnext.c:43:11 (mysqld+0x000000c26f28)
    #2 ha_myisam::index_next(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1692:13 (mysqld+0x000000c07eb6)
    #3 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3687:13 (mysqld+0x00000097bcc3)
    #4 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2640 at 0x7d780002dc00 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M700 (0x7d780002e088) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M701 (0x7d780002e5a8) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:527:7 (mysqld+0x000000c103d6)
    #2 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #3 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #4 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:98:24 in mi_lock_database
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 8 at 0x7d780002dc70 by thread T4 (mutexes: write M700):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:99:23 (mysqld+0x000000c426f4)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1591:3 (mysqld+0x0000007a2d76)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x7d780002dc70 by thread T5 (mutexes: write M507, read M701):
    #0 _mi_test_if_changed /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:485:20 (mysqld+0x000000c43a06)
    #1 mi_rnext /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rnext.c:43:11 (mysqld+0x000000c26f28)
    #2 mi_rfirst /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rfirst.c:25:3 (mysqld+0x000000c79c79)
    #3 ha_myisam::index_first(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1710:13 (mysqld+0x000000c08156)
    #4 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3652:8 (mysqld+0x00000097b901)
    #5 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2640 at 0x7d780002dc00 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M700 (0x7d780002e088) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M701 (0x7d780002e5a8) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:527:7 (mysqld+0x000000c103d6)
    #2 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #3 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #4 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:99:23 in mi_lock_database
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 8 at 0x7d780002dc78 by thread T4 (mutexes: write M700):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:100:29 (mysqld+0x000000c427ba)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1591:3 (mysqld+0x0000007a2d76)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x7d780002dc78 by thread T5 (mutexes: write M507, read M701):
    #0 _mi_test_if_changed /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:486:20 (mysqld+0x000000c43a58)
    #1 mi_rnext /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rnext.c:43:11 (mysqld+0x000000c26f28)
    #2 mi_rfirst /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rfirst.c:25:3 (mysqld+0x000000c79c79)
    #3 ha_myisam::index_first(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1710:13 (mysqld+0x000000c08156)
    #4 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3652:8 (mysqld+0x00000097b901)
    #5 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2640 at 0x7d780002dc00 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M700 (0x7d780002e088) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M701 (0x7d780002e5a8) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:527:7 (mysqld+0x000000c103d6)
    #2 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #3 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #4 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:100:29 in mi_lock_database
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 8 at 0x7d780002dc68 by thread T5 (mutexes: write M507, read M701):
    #0 _mi_test_if_changed /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:491:38 (mysqld+0x000000c43ba2)
    #1 mi_rnext /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rnext.c:43:11 (mysqld+0x000000c26f28)
    #2 ha_myisam::index_next(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1692:13 (mysqld+0x000000c07eb6)
    #3 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3687:13 (mysqld+0x00000097bcc3)
    #4 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d780002dc68 by thread T4 (mutexes: write M700):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:98:24 (mysqld+0x000000c42640)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1591:3 (mysqld+0x0000007a2d76)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2640 at 0x7d780002dc00 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M701 (0x7d780002e5a8) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:527:7 (mysqld+0x000000c103d6)
    #2 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #3 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #4 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M700 (0x7d780002e088) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:491:38 in _mi_test_if_changed
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 1 at 0x7d600001d770 by thread T5 (mutexes: write M507):
    #0 bitmap_is_set(st_bitmap const*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/../include/my_bitmap.h:141:10 (mysqld+0x000000700490)
    #1 Field_string::val_str(String*, String*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/field.cc:6609:3 (mysqld+0x000000722b9e)
    #2 Field::val_str(String*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./field.h:121:48 (mysqld+0x0000005eda76)
    #3 get_field(st_mem_root*, Field*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:2614:3 (mysqld+0x000000885d4c)
    #4 GRANT_NAME::GRANT_NAME(st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2301:26 (mysqld+0x00000096e1bf)
    #5 GRANT_TABLE::GRANT_TABLE(st_table*, st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2328:4 (mysqld+0x00000096e916)
    #6 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3659:39 (mysqld+0x00000097b9a5)
    #7 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #8 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #9 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #10 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #11 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #12 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #13 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d600001d770 by thread T4 (mutexes: write M467):
    #0 bitmap_is_set_all /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_bitmap.c:299:23 (mysqld+0x000000d4a00b)
    #1 handler::ha_reset() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4571:3 (mysqld+0x000000a3e464)
    #2 close_thread_table(THD*, st_table**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1403:5 (mysqld+0x00000084f783)
    #3 close_open_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1195:23 (mysqld+0x00000084f0ec)
    #4 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1347:5 (mysqld+0x00000084eb79)
    #5 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1591:3 (mysqld+0x0000007a2d76)
    #6 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #7 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 992 at 0x7d600001d400 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 alloc_root /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_alloc.c:201:30 (mysqld+0x000000d1412d)
    #3 open_binary_frm(THD*, st_table_share*, unsigned char*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:773:26 (mysqld+0x000000877939)
    #4 open_table_def(THD*, st_table_share*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:630:12 (mysqld+0x0000008762be)
    #5 get_table_share(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:377:7 (mysqld+0x000000849690)
    #6 get_table_share_with_create(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:456:10 (mysqld+0x00000086ed96)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3837:16 (mysqld+0x000000854892)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/../include/my_bitmap.h:141:10 in bitmap_is_set(st_bitmap const*, unsigned int)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 1 at 0x7d600001bba0 by thread T5 (mutexes: write M507):
    #0 bitmap_is_set(st_bitmap const*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/../include/my_bitmap.h:141:10 (mysqld+0x000000700490)
    #1 Field_string::store(char const*, unsigned int, charset_info_st*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/field.cc:6376:3 (mysqld+0x0000007205fe)
    #2 GRANT_TABLE::GRANT_TABLE(st_table*, st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2348:5 (mysqld+0x00000096ed00)
    #3 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3659:39 (mysqld+0x00000097b9a5)
    #4 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d600001bba0 by thread T4 (mutexes: write M467):
    #0 bitmap_is_set_all /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_bitmap.c:299:23 (mysqld+0x000000d4a00b)
    #1 handler::ha_reset() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4571:3 (mysqld+0x000000a3e464)
    #2 close_thread_table(THD*, st_table**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1403:5 (mysqld+0x00000084f783)
    #3 close_open_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1195:23 (mysqld+0x00000084f0ec)
    #4 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1347:5 (mysqld+0x00000084eb79)
    #5 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1591:3 (mysqld+0x0000007a2d76)
    #6 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #7 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 992 at 0x7d600001b800 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 alloc_root /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_alloc.c:201:30 (mysqld+0x000000d1412d)
    #3 open_binary_frm(THD*, st_table_share*, unsigned char*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:773:26 (mysqld+0x000000877939)
    #4 open_table_def(THD*, st_table_share*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:630:12 (mysqld+0x0000008762be)
    #5 get_table_share(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:377:7 (mysqld+0x000000849690)
    #6 get_table_share_with_create(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:456:10 (mysqld+0x00000086ed96)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3837:16 (mysqld+0x000000854892)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/../include/my_bitmap.h:141:10 in bitmap_is_set(st_bitmap const*, unsigned int)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 8 at 0x7d740000d4f8 by thread T5 (mutexes: write M507, read M710):
    #0 _mi_test_if_changed /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:491:24 (mysqld+0x000000c43bd1)
    #1 mi_rnext /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rnext.c:43:11 (mysqld+0x000000c26f28)
    #2 ha_myisam::index_next(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1692:13 (mysqld+0x000000c07eb6)
    #3 GRANT_TABLE::GRANT_TABLE(st_table*, st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2386:15 (mysqld+0x00000096f57e)
    #4 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3659:39 (mysqld+0x00000097b9a5)
    #5 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x7d740000d4f8 by thread T4 (mutexes: write M709):
    #0 _mi_test_if_changed /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:484:38 (mysqld+0x000000c439da)
    #1 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:181:7 (mysqld+0x000000c43153)
    #2 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #3 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #4 lock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:364:16 (mysqld+0x000000774971)
    #5 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:260:34 (mysqld+0x000000772ea1)
    #6 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #7 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #8 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #9 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #10 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #11 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #12 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #13 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #14 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #15 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2408 at 0x7d740000d200 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M710 (0x7d740000daf8) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:527:7 (mysqld+0x000000c103d6)
    #2 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #3 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #4 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M709 (0x7d740000d688) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:491:24 in _mi_test_if_changed
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 4 at 0x7d780002df48 by thread T6:
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 (mysqld+0x000000c418e7)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3821:3 (mysqld+0x00000097b54e)
    #7 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d780002df48 by thread T5 (mutexes: write M700):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:59:9 (mysqld+0x000000c41d0d)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3821:3 (mysqld+0x00000097b54e)
    #7 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2640 at 0x7d780002dc00 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M700 (0x7d780002e088) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 in mi_lock_database
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 4 at 0x7d780002df48 by thread T4:
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 (mysqld+0x000000c418e7)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3821:3 (mysqld+0x00000097b54e)
    #7 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d780002df48 by thread T5 (mutexes: write M700):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:59:9 (mysqld+0x000000c41d0d)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3821:3 (mysqld+0x00000097b54e)
    #7 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2640 at 0x7d780002dc00 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M700 (0x7d780002e088) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 in mi_lock_database
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 4 at 0x7d740000d548 by thread T6:
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 (mysqld+0x000000c418e7)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3821:3 (mysqld+0x00000097b54e)
    #7 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d740000d548 by thread T5 (mutexes: write M709):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:182:21 (mysqld+0x000000c4318e)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 lock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:364:16 (mysqld+0x000000774971)
    #4 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:260:34 (mysqld+0x000000772ea1)
    #5 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #6 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #7 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #8 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #9 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #10 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #11 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #12 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #13 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #14 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2408 at 0x7d740000d200 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M709 (0x7d740000d688) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 in mi_lock_database
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 4 at 0x7d780002df44 by thread T4:
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 (mysqld+0x000000c41920)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3821:3 (mysqld+0x00000097b54e)
    #7 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d780002df44 by thread T5 (mutexes: write M700):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:61:9 (mysqld+0x000000c41d5d)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 mysql_drop_user(THD*, List<st_lex_user>&) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:5743:3 (mysqld+0x000000983fd5)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3796:16 (mysqld+0x0000007b4876)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2640 at 0x7d780002dc00 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M700 (0x7d780002e088) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 in mi_lock_database
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 4 at 0x7d740000d544 by thread T6:
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 (mysqld+0x000000c41920)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3821:3 (mysqld+0x00000097b54e)
    #7 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d740000d544 by thread T5 (mutexes: write M709):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:232:21 (mysqld+0x000000c43881)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 lock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:364:16 (mysqld+0x000000774971)
    #4 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:260:34 (mysqld+0x000000772ea1)
    #5 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #6 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #7 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #8 open_grant_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:5048:7 (mysqld+0x00000098300e)
    #9 mysql_drop_user(THD*, List<st_lex_user>&) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:5709:16 (mysqld+0x000000983da7)
    #10 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3796:16 (mysqld+0x0000007b4876)
    #11 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #12 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #13 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #14 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2408 at 0x7d740000d200 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M709 (0x7d740000d688) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 in mi_lock_database
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 4 at 0x7d6000019ac8 by thread T4 (mutexes: write M467, write M713):
    #0 get_table_share(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:411:24 (mysqld+0x000000849afa)
    #1 get_table_share_with_create(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:456:10 (mysqld+0x00000086ed96)
    #2 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3837:16 (mysqld+0x000000854892)
    #3 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #4 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #5 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #6 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #7 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #8 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #9 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #10 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #11 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #12 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #13 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #14 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 4 at 0x7d6000019ac8 by thread T5:
    #0 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2944:3 (mysqld+0x000000858b6d)
    #1 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #2 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #3 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #4 open_grant_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:5048:7 (mysqld+0x00000098300e)
    #5 mysql_drop_user(THD*, List<st_lex_user>&) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:5709:16 (mysqld+0x000000983da7)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3796:16 (mysqld+0x0000007b4876)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 992 at 0x7d6000019800 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 alloc_root /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_alloc.c:201:30 (mysqld+0x000000d1412d)
    #3 multi_alloc_root /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_alloc.c:264:24 (mysqld+0x000000d148c6)
    #4 alloc_table_share(TABLE_LIST*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:284:7 (mysqld+0x000000874d14)
    #5 get_table_share(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:346:16 (mysqld+0x00000084956a)
    #6 get_table_share_with_create(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:456:10 (mysqld+0x00000086ed96)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3837:16 (mysqld+0x000000854892)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #13 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #14 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #15 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #16 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #17 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #18 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #19 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M713 (0x7d6000019918) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 alloc_table_share(TABLE_LIST*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:320:5 (mysqld+0x0000008750c2)
    #3 get_table_share(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:346:16 (mysqld+0x00000084956a)
    #4 get_table_share_with_create(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:456:10 (mysqld+0x00000086ed96)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3837:16 (mysqld+0x000000854892)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:411:24 in get_table_share(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 8 at 0x00000206c938 by thread T5:
    #0 close_open_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1188:3 (mysqld+0x00000084efe6)
    #1 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1347:5 (mysqld+0x00000084eb79)
    #2 mysql_drop_user(THD*, List<st_lex_user>&) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:5743:3 (mysqld+0x000000983fd5)
    #3 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3796:16 (mysqld+0x0000007b4876)
    #4 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #5 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #6 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #7 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x00000206c938 by thread T4 (mutexes: write M467, write M466):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:158:13 (mysqld+0x000000d6179d)
    #1 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2705:3 (mysqld+0x00000085771a)
    #2 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #3 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #4 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #5 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #6 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #7 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'LOCK_open' of size 104 at 0x00000206c8d8 (mysqld+0x00000206c938)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M466 (0x00000206c8d8) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1188:3 in close_open_tables(THD*)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 8 at 0x00000206c938 by thread T6:
    #0 close_open_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1188:3 (mysqld+0x00000084efe6)
    #1 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1347:5 (mysqld+0x00000084eb79)
    #2 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3821:3 (mysqld+0x00000097b54e)
    #3 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #4 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #5 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x00000206c938 by thread T4 (mutexes: write M467, write M466):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:158:13 (mysqld+0x000000d6179d)
    #1 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2705:3 (mysqld+0x00000085771a)
    #2 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #3 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #4 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #5 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #6 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #7 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'LOCK_open' of size 104 at 0x00000206c8d8 (mysqld+0x00000206c938)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M466 (0x00000206c8d8) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1188:3 in close_open_tables(THD*)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 8 at 0x7d780002d4b0 by thread T4 (mutexes: write M467, write M438):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:614:3 (mysqld+0x000000c10f9a)
    #2 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #3 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #4 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d780002d4b0 by thread T5 (mutexes: write M717, write M716):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:52:3 (mysqld+0x000000c41bff)
    #2 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #3 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #4 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #5 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #6 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #7 mysql_drop_user(THD*, List<st_lex_user>&) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:5743:3 (mysqld+0x000000983fd5)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3796:16 (mysqld+0x0000007b4876)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2680 at 0x7d780002d000 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #13 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #14 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #15 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #16 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #17 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #18 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #19 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M438 (0x00000207ce28) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 my_thread_global_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_thr_init.c:145:3 (mysqld+0x000000d62bd0)
    #3 my_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_init.c:81:7 (mysqld+0x000000cee1d1)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4215:3 (mysqld+0x000000783bf0)

  Mutex M717 (0x7d780002d488) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M716 (0x7d780002d460) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 4 at 0x7d780002d348 by thread T6:
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 (mysqld+0x000000c418e7)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 lock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:364:16 (mysqld+0x000000774971)
    #4 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:260:34 (mysqld+0x000000772ea1)
    #5 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #6 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #7 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #8 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #9 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #10 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #11 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #12 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #13 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #14 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #15 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d780002d348 by thread T4 (mutexes: write M717):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:59:9 (mysqld+0x000000c41d0d)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3752:3 (mysqld+0x00000097c036)
    #7 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #8 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #9 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #10 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #11 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #12 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #13 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2680 at 0x7d780002d000 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #13 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #14 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #15 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #16 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #17 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #18 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #19 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M717 (0x7d780002d488) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 in mi_lock_database
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 8 at 0x00000206dac8 by thread T5:
    #0 check_stack_overrun(THD*, long, unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5564:19 (mysqld+0x0000007c29d6)
    #1 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2527:7 (mysqld+0x000000856714)
    #2 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #3 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #4 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #5 open_grant_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:5048:7 (mysqld+0x00000098300e)
    #6 mysql_drop_user(THD*, List<st_lex_user>&) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:5709:16 (mysqld+0x000000983da7)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3796:16 (mysqld+0x0000007b4876)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x00000206dac8 by thread T6:
    #0 check_stack_overrun(THD*, long, unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5564:17 (mysqld+0x0000007c2a5f)
    #1 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2527:7 (mysqld+0x000000856714)
    #2 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #3 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #4 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #5 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #6 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #7 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'max_stack_used' of size 8 at 0x00000206dac8 (mysqld+0x00000206dac8)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5564:19 in check_stack_overrun(THD*, long, unsigned char*)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 8 at 0x00000207a2b0 by thread T4:
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 plugin_unlock_list(THD*, st_plugin_int***, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_plugin.cc:986:3 (mysqld+0x000000b91c99)
    #2 lex_end(st_lex*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_lex.cc:378:3 (mysqld+0x0000005a6168)
    #3 THD::end_statement() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_class.cc:2369:3 (mysqld+0x000000758e53)
    #4 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5948:5 (mysqld+0x0000007a45bc)
    #5 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #6 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #7 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x00000207a2b0 by thread T5 (mutexes: write M554, write M553):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 plugin_unlock_list(THD*, st_plugin_int***, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_plugin.cc:986:3 (mysqld+0x000000b91c99)
    #2 lex_end(st_lex*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_lex.cc:378:3 (mysqld+0x0000005a6168)
    #3 THD::end_statement() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_class.cc:2369:3 (mysqld+0x000000758e53)
    #4 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5948:5 (mysqld+0x0000007a45bc)
    #5 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #6 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #7 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'LOCK_plugin' of size 104 at 0x00000207a260 (mysqld+0x00000207a2b0)

  Mutex M554 (0x00000207a288) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 plugin_init(int*, char**, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_plugin.cc:1115:3 (mysqld+0x000000b9204f)
    #3 init_server_components() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3882:9 (mysqld+0x000000787f55)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4354:7 (mysqld+0x0000007840c8)

  Mutex M553 (0x00000207a260) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 plugin_init(int*, char**, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_plugin.cc:1115:3 (mysqld+0x000000b9204f)
    #3 init_server_components() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3882:9 (mysqld+0x000000787f55)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4354:7 (mysqld+0x0000007840c8)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 8 at 0x00000206ced8 by thread T6:
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 reset_mqh(st_lex_user*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:538:10 (mysqld+0x000000799a7c)
    #2 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6784:5 (mysqld+0x0000007a7ade)
    #3 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #4 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #5 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #6 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #7 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x00000206ced8 by thread T4 (mutexes: write M491, write M490):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 reset_mqh(st_lex_user*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:538:10 (mysqld+0x000000799a7c)
    #2 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6784:5 (mysqld+0x0000007a7ade)
    #3 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #4 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #5 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #6 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #7 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'LOCK_user_conn' of size 104 at 0x00000206ce88 (mysqld+0x00000206ced8)

  Mutex M491 (0x00000206ceb0) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3518:10 (mysqld+0x00000078fe3c)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M490 (0x00000206ce88) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3518:10 (mysqld+0x00000078fe3c)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 8 at 0x00000206ced8 by thread T5:
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 reset_mqh(st_lex_user*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:538:10 (mysqld+0x000000799a7c)
    #2 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6784:5 (mysqld+0x0000007a7ade)
    #3 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #4 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #5 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #6 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #7 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x00000206ced8 by thread T4 (mutexes: write M491, write M490):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 reset_mqh(st_lex_user*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:538:10 (mysqld+0x000000799a7c)
    #2 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6784:5 (mysqld+0x0000007a7ade)
    #3 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #4 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #5 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #6 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #7 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'LOCK_user_conn' of size 104 at 0x00000206ce88 (mysqld+0x00000206ced8)

  Mutex M491 (0x00000206ceb0) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3518:10 (mysqld+0x00000078fe3c)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M490 (0x00000206ce88) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3518:10 (mysqld+0x00000078fe3c)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 4 at 0x00000206a8d8 by thread T4:
    #0 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6740:16 (mysqld+0x0000007a77b8)
    #1 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #2 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #3 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #4 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #5 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x00000206a8d8 by thread T5:
    [failed to restore the stack]

  Location is global 'select_errors' of size 4 at 0x00000206a8d8 (mysqld+0x00000206a8d8)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6740:16 in reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 4 at 0x00000206a8d8 by thread T6:
    #0 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6740:16 (mysqld+0x0000007a77b8)
    #1 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #2 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #3 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #4 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #5 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x00000206a8d8 by thread T5:
    [failed to restore the stack]

  Location is global 'select_errors' of size 4 at 0x00000206a8d8 (mysqld+0x00000206a8d8)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6740:16 in reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 4 at 0x7d8000004344 by thread T6:
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 (mysqld+0x000000c41920)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 lock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:364:16 (mysqld+0x000000774971)
    #4 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:260:34 (mysqld+0x000000772ea1)
    #5 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #6 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #7 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #8 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #9 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #10 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #11 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #12 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #13 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #14 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d8000004344 by thread T5 (mutexes: write M656):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:232:21 (mysqld+0x000000c43881)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 lock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:364:16 (mysqld+0x000000774971)
    #4 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:260:34 (mysqld+0x000000772ea1)
    #5 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #6 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #7 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #8 open_grant_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:5048:7 (mysqld+0x00000098300e)
    #9 mysql_drop_user(THD*, List<st_lex_user>&) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:5709:16 (mysqld+0x000000983da7)
    #10 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3796:16 (mysqld+0x0000007b4876)
    #11 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #12 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #13 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #14 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 3800 at 0x7d8000004000 allocated by main thread:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1130:7 (mysqld+0x000000b8b308)
    #13 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #14 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Mutex M656 (0x7d8000004488) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1130:7 (mysqld+0x000000b8b308)
    #12 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #13 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 in mi_lock_database
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 4 at 0x7d600000bec8 by thread T4 (mutexes: write M467, write M643):
    #0 get_table_share(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:411:24 (mysqld+0x000000849afa)
    #1 get_table_share_with_create(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:456:10 (mysqld+0x00000086ed96)
    #2 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3837:16 (mysqld+0x000000854892)
    #3 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #4 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #5 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #6 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #7 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #8 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #9 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #10 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #11 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #12 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #13 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 4 at 0x7d600000bec8 by thread T6:
    #0 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2944:3 (mysqld+0x000000858b6d)
    #1 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #2 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #3 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 992 at 0x7d600000bc00 allocated by main thread:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 alloc_root /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_alloc.c:201:30 (mysqld+0x000000d1412d)
    #3 multi_alloc_root /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_alloc.c:264:24 (mysqld+0x000000d148c6)
    #4 alloc_table_share(TABLE_LIST*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:284:7 (mysqld+0x000000874d14)
    #5 get_table_share(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:346:16 (mysqld+0x00000084956a)
    #6 get_table_share_with_create(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:456:10 (mysqld+0x00000086ed96)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3837:16 (mysqld+0x000000854892)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1113:7 (mysqld+0x000000b8b274)
    #13 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #14 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M643 (0x7d600000bd18) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 alloc_table_share(TABLE_LIST*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:320:5 (mysqld+0x0000008750c2)
    #3 get_table_share(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:346:16 (mysqld+0x00000084956a)
    #4 get_table_share_with_create(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:456:10 (mysqld+0x00000086ed96)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3837:16 (mysqld+0x000000854892)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1113:7 (mysqld+0x000000b8b274)
    #11 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #12 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:411:24 in get_table_share(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 4 at 0x7d7c0000d544 by thread T6:
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 (mysqld+0x000000c41920)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 lock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:364:16 (mysqld+0x000000774971)
    #4 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:260:34 (mysqld+0x000000772ea1)
    #5 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #6 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #7 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #8 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #9 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #10 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #11 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #12 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #13 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #14 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d7c0000d544 by thread T5 (mutexes: write M647):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:61:9 (mysqld+0x000000c41d5d)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 mysql_drop_user(THD*, List<st_lex_user>&) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:5743:3 (mysqld+0x000000983fd5)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3796:16 (mysqld+0x0000007b4876)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 3240 at 0x7d7c0000d200 allocated by main thread:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1113:7 (mysqld+0x000000b8b274)
    #13 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #14 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Mutex M647 (0x7d7c0000d688) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1113:7 (mysqld+0x000000b8b274)
    #12 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #13 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 in mi_lock_database
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 1 at 0x7d700000bf74 by thread T4 (mutexes: write M694):
    #0 bitmap_is_set(st_bitmap const*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/../include/my_bitmap.h:141:10 (mysqld+0x000000700490)
    #1 Field_blob::val_str(String*, String*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/field.cc:7821:3 (mysqld+0x00000072b1be)
    #2 Field::val_str(String*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./field.h:121:48 (mysqld+0x0000005eda76)
    #3 get_field(st_mem_root*, Field*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:2614:3 (mysqld+0x000000885d4c)
    #4 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:513:28 (mysqld+0x00000096822d)
    #5 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d700000bf74 by thread T5 (mutexes: write M467):
    #0 bitmap_is_set_all /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_bitmap.c:299:23 (mysqld+0x000000d4a00b)
    #1 handler::ha_reset() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4571:3 (mysqld+0x000000a3e464)
    #2 close_thread_table(THD*, st_table**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1403:5 (mysqld+0x00000084f783)
    #3 close_open_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1195:23 (mysqld+0x00000084f0ec)
    #4 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1347:5 (mysqld+0x00000084eb79)
    #5 mysql_drop_user(THD*, List<st_lex_user>&) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:5743:3 (mysqld+0x000000983fd5)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3796:16 (mysqld+0x0000007b4876)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 1984 at 0x7d700000b800 allocated by main thread:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 alloc_root /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_alloc.c:201:30 (mysqld+0x000000d1412d)
    #3 sql_alloc(unsigned long) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/thr_malloc.cc:65:10 (mysqld+0x0000006b2a44)
    #4 Field::operator new(unsigned long) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./field.h:54:12 (mysqld+0x0000005ebf88)
    #5 make_field(st_table_share*, unsigned char*, unsigned int, unsigned char*, unsigned char, unsigned int, enum_field_types, charset_info_st*, Field::geometry_type, Field::utype, st_typelib*, char const*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/field.cc:10026:9 (mysqld+0x000000739b0f)
    #6 open_binary_frm(THD*, st_table_share*, unsigned char*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1268:7 (mysqld+0x00000087c192)
    #7 open_table_def(THD*, st_table_share*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:630:12 (mysqld+0x0000008762be)
    #8 get_table_share(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:377:7 (mysqld+0x000000849690)
    #9 get_table_share_with_create(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:456:10 (mysqld+0x00000086ed96)
    #10 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3837:16 (mysqld+0x000000854892)
    #11 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #12 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #13 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #14 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #15 Event_db_repository::check_system_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/event_db_repository.cc:1130:7 (mysqld+0x000000b8b308)
    #16 Events::init(char) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/events.cc:912:7 (mysqld+0x000000b8f70c)
    #17 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4441:7 (mysqld+0x00000078449a)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/../include/my_bitmap.h:141:10 in bitmap_is_set(st_bitmap const*, unsigned int)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 8 at 0x7d780002d3d0 by thread T4:
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 thr_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:503:3 (mysqld+0x000000d5a8e5)
    #2 thr_multi_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:973:39 (mysqld+0x000000d5e4b1)
    #3 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:276:39 (mysqld+0x0000007731c4)
    #4 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #5 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #6 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #7 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #8 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #9 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #10 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #11 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #12 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #13 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #14 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d780002d3d0 by thread T5 (mutexes: write M715, write M714):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 thr_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:503:3 (mysqld+0x000000d5a8e5)
    #2 thr_multi_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:973:39 (mysqld+0x000000d5e4b1)
    #3 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:276:39 (mysqld+0x0000007731c4)
    #4 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #5 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #6 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #7 open_grant_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:5048:7 (mysqld+0x00000098300e)
    #8 mysql_drop_user(THD*, List<st_lex_user>&) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:5709:16 (mysqld+0x000000983da7)
    #9 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3796:16 (mysqld+0x0000007b4876)
    #10 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #11 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #12 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #13 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2680 at 0x7d780002d000 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #13 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #14 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #15 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #16 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #17 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #18 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #19 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M715 (0x7d780002d3a8) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 thr_lock_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:319:3 (mysqld+0x000000d5a2be)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:524:5 (mysqld+0x000000c102ff)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #13 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #14 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #15 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #16 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #17 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #18 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #19 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M714 (0x7d780002d380) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 thr_lock_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_lock.c:319:3 (mysqld+0x000000d5a2be)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:524:5 (mysqld+0x000000c102ff)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #13 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #14 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #15 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #16 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #17 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #18 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #19 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 4 at 0x7d780002d34c by thread T5 (mutexes: write M507, write M694):
    #0 _mi_read_rnd_static_record /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_statrec.c:258:5 (mysqld+0x000000c48be6)
    #1 mi_scan /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_scan.c:44:3 (mysqld+0x000000c45f94)
    #2 ha_myisam::rnd_next(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1750:13 (mysqld+0x000000c0857b)
    #3 handle_grant_table(TABLE_LIST*, unsigned int, bool, st_lex_user*, st_lex_user*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:5242:22 (mysqld+0x00000098cf2d)
    #4 handle_grant_data(TABLE_LIST*, bool, st_lex_user*, st_lex_user*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:5533:15 (mysqld+0x0000009839e6)
    #5 mysql_drop_user(THD*, List<st_lex_user>&) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:5722:9 (mysqld+0x000000983e97)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3796:16 (mysqld+0x0000007b4876)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d780002d34c by thread T4 (mutexes: write M717):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:183:23 (mysqld+0x000000c431d6)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 lock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:364:16 (mysqld+0x000000774971)
    #4 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:260:34 (mysqld+0x000000772ea1)
    #5 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #6 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #7 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #8 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #9 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #10 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #11 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #12 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #13 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #14 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #15 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2680 at 0x7d780002d000 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #13 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #14 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #15 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #16 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #17 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #18 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #19 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M717 (0x7d780002d488) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_statrec.c:258:5 in _mi_read_rnd_static_record
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 4 at 0x7d780002d344 by thread T4:
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 (mysqld+0x000000c41920)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3752:3 (mysqld+0x00000097c036)
    #7 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #8 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #9 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #10 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #11 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #12 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #13 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d780002d344 by thread T5 (mutexes: write M717):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:232:21 (mysqld+0x000000c43881)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 lock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:364:16 (mysqld+0x000000774971)
    #4 mysql_lock_tables(THD*, st_table**, unsigned int, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:260:34 (mysqld+0x000000772ea1)
    #5 lock_tables(THD*, TABLE_LIST*, unsigned int, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:5287:23 (mysqld+0x0000008605dd)
    #6 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4985:10 (mysqld+0x00000085fe7d)
    #7 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #8 open_grant_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:5048:7 (mysqld+0x00000098300e)
    #9 mysql_drop_user(THD*, List<st_lex_user>&) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:5709:16 (mysqld+0x000000983da7)
    #10 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3796:16 (mysqld+0x0000007b4876)
    #11 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #12 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #13 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #14 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2680 at 0x7d780002d000 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #13 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #14 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #15 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #16 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #17 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #18 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #19 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M717 (0x7d780002d488) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3726:7 (mysqld+0x00000097bea0)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:34:3 in mi_lock_database
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 4 at 0x0000020746c8 by thread T5 (mutexes: write M507):
    #0 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3831:16 (mysqld+0x00000097b59a)
    #1 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #2 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #3 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #4 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #5 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #6 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x0000020746c8 by thread T6 (mutexes: write M694):
    #0 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:322:16 (mysqld+0x000000966d09)
    #1 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #2 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #3 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #4 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #5 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #6 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #7 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'grant_version' of size 4 at 0x0000020746c8 (mysqld+0x0000020746c8)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3831:16 in grant_reload(THD*)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 1 at 0x00000206a8be by thread T5:
    #0 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5899:11 (mysqld+0x0000007a405e)
    #1 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #2 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #3 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 1 at 0x00000206a8be by thread T4 (mutexes: write M507, write M694):
    #0 replace_user_table(THD*, st_table*, st_lex_user const&, unsigned long, bool, bool, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2049:13 (mysqld+0x000000973be4)
    #1 mysql_table_grant(THD*, TABLE_LIST*, List<st_lex_user>&, List<LEX_COLUMN>&, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3086:11 (mysqld+0x000000970535)
    #2 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3894:14 (mysqld+0x0000007b5a0a)
    #3 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #4 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #5 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #6 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'mqh_used' of size 1 at 0x00000206a8be (mysqld+0x00000206a8be)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5899:11 in mysql_parse(THD*, char const*, unsigned int, char const**)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 8 at 0x7d740000d268 by thread T4 (mutexes: write M709):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:98:24 (mysqld+0x000000c42640)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1591:3 (mysqld+0x0000007a2d76)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x7d740000d268 by thread T6 (mutexes: write M507, read M710):
    #0 _mi_test_if_changed /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:484:20 (mysqld+0x000000c439b4)
    #1 mi_rnext /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rnext.c:43:11 (mysqld+0x000000c26f28)
    #2 ha_myisam::index_next(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1692:13 (mysqld+0x000000c07eb6)
    #3 GRANT_TABLE::GRANT_TABLE(st_table*, st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2386:15 (mysqld+0x00000096f57e)
    #4 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3659:39 (mysqld+0x00000097b9a5)
    #5 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2408 at 0x7d740000d200 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M709 (0x7d740000d688) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M710 (0x7d740000daf8) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:527:7 (mysqld+0x000000c103d6)
    #2 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #3 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #4 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:98:24 in mi_lock_database
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 8 at 0x7d740000d270 by thread T4 (mutexes: write M709):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:99:23 (mysqld+0x000000c426f4)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1591:3 (mysqld+0x0000007a2d76)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x7d740000d270 by thread T6 (mutexes: write M507, read M710):
    #0 _mi_test_if_changed /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:485:20 (mysqld+0x000000c43a06)
    #1 mi_rnext /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rnext.c:43:11 (mysqld+0x000000c26f28)
    #2 ha_myisam::index_next(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1692:13 (mysqld+0x000000c07eb6)
    #3 GRANT_TABLE::GRANT_TABLE(st_table*, st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2386:15 (mysqld+0x00000096f57e)
    #4 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3659:39 (mysqld+0x00000097b9a5)
    #5 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2408 at 0x7d740000d200 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M709 (0x7d740000d688) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M710 (0x7d740000daf8) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:527:7 (mysqld+0x000000c103d6)
    #2 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #3 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #4 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:99:23 in mi_lock_database
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 8 at 0x7d740000d278 by thread T4 (mutexes: write M709):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:100:29 (mysqld+0x000000c427ba)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1591:3 (mysqld+0x0000007a2d76)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x7d740000d278 by thread T6 (mutexes: write M507, read M710):
    #0 _mi_test_if_changed /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:486:20 (mysqld+0x000000c43a58)
    #1 mi_rnext /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rnext.c:43:11 (mysqld+0x000000c26f28)
    #2 ha_myisam::index_next(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1692:13 (mysqld+0x000000c07eb6)
    #3 GRANT_TABLE::GRANT_TABLE(st_table*, st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2386:15 (mysqld+0x00000096f57e)
    #4 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3659:39 (mysqld+0x00000097b9a5)
    #5 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2408 at 0x7d740000d200 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M709 (0x7d740000d688) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M710 (0x7d740000daf8) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:527:7 (mysqld+0x000000c103d6)
    #2 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #3 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #4 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:100:29 in mi_lock_database
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 8 at 0x7d740000d268 by thread T6 (mutexes: write M507, read M710):
    #0 _mi_test_if_changed /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:484:20 (mysqld+0x000000c439b4)
    #1 mi_rnext /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_rnext.c:43:11 (mysqld+0x000000c26f28)
    #2 ha_myisam::index_next(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1692:13 (mysqld+0x000000c07eb6)
    #3 GRANT_TABLE::GRANT_TABLE(st_table*, st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2386:15 (mysqld+0x00000096f57e)
    #4 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3659:39 (mysqld+0x00000097b9a5)
    #5 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #6 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #7 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #8 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #9 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #10 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #11 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d740000d268 by thread T4 (mutexes: write M709):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:98:24 (mysqld+0x000000c42640)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1591:3 (mysqld+0x0000007a2d76)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2408 at 0x7d740000d200 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M710 (0x7d740000daf8) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:527:7 (mysqld+0x000000c103d6)
    #2 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #3 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #4 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M709 (0x7d740000d688) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:484:20 in _mi_test_if_changed
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 1 at 0x7d780002df5d by thread T5 (mutexes: write M507, write M694):
    #0 _mi_writeinfo /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:473:19 (mysqld+0x000000c4540d)
    #1 mi_write /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_write.c:158:3 (mysqld+0x000000c6663e)
    #2 ha_myisam::write_row(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:772:10 (mysqld+0x000000c01b67)
    #3 handler::ha_write_row(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4591:7 (mysqld+0x000000a3e682)
    #4 replace_table_table(THD*, GRANT_TABLE*, st_table*, st_lex_user const&, char const*, char const*, unsigned long, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2769:11 (mysqld+0x00000097572b)
    #5 mysql_table_grant(THD*, TABLE_LIST*, List<st_lex_user>&, List<LEX_COLUMN>&, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3157:9 (mysqld+0x000000970a5a)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3894:14 (mysqld+0x0000007b5a0a)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 1 at 0x7d780002df5d by thread T6 (mutexes: write M700):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:82:2 (mysqld+0x000000c421d0)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3821:3 (mysqld+0x00000097b54e)
    #7 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2640 at 0x7d780002dc00 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M700 (0x7d780002e088) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:473:19 in _mi_writeinfo
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 1 at 0x7d740000d55d by thread T5 (mutexes: write M507, write M694):
    #0 _mi_writeinfo /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:473:19 (mysqld+0x000000c4540d)
    #1 mi_write /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_write.c:158:3 (mysqld+0x000000c6663e)
    #2 ha_myisam::write_row(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:772:10 (mysqld+0x000000c01b67)
    #3 handler::ha_write_row(unsigned char*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4591:7 (mysqld+0x000000a3e682)
    #4 replace_column_table(GRANT_TABLE*, st_table*, st_lex_user const&, List<LEX_COLUMN>&, char const*, char const*, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2583:18 (mysqld+0x000000976bcb)
    #5 mysql_table_grant(THD*, TABLE_LIST*, List<st_lex_user>&, List<LEX_COLUMN>&, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3166:12 (mysqld+0x000000970abf)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3894:14 (mysqld+0x0000007b5a0a)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 1 at 0x7d740000d55d by thread T6 (mutexes: write M709):
    #0 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:82:2 (mysqld+0x000000c421d0)
    #1 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #2 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #3 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #4 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #5 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #6 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3821:3 (mysqld+0x00000097b54e)
    #7 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2408 at 0x7d740000d200 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M709 (0x7d740000d688) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:473:19 in _mi_writeinfo
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 4 at 0x7d600003fec8 by thread T6 (mutexes: write M467, write M722):
    #0 get_table_share(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:411:24 (mysqld+0x000000849afa)
    #1 get_table_share_with_create(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:456:10 (mysqld+0x00000086ed96)
    #2 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3837:16 (mysqld+0x000000854892)
    #3 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #4 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #5 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #6 open_and_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1555:10 (mysqld+0x0000007ca3bd)
    #7 mysql_table_grant(THD*, TABLE_LIST*, List<st_lex_user>&, List<LEX_COLUMN>&, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2963:11 (mysqld+0x00000096f9b9)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3894:14 (mysqld+0x0000007b5a0a)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 4 at 0x7d600003fec8 by thread T5:
    #0 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2944:3 (mysqld+0x000000858b6d)
    #1 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #2 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #3 open_and_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1555:10 (mysqld+0x0000007ca3bd)
    #4 mysql_table_grant(THD*, TABLE_LIST*, List<st_lex_user>&, List<LEX_COLUMN>&, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2963:11 (mysqld+0x00000096f9b9)
    #5 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3894:14 (mysqld+0x0000007b5a0a)
    #6 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #7 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #8 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #9 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 992 at 0x7d600003fc00 allocated by thread T4:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 alloc_root /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_alloc.c:201:30 (mysqld+0x000000d1412d)
    #3 multi_alloc_root /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_alloc.c:264:24 (mysqld+0x000000d148c6)
    #4 alloc_table_share(TABLE_LIST*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:284:7 (mysqld+0x000000874d14)
    #5 get_table_share(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:346:16 (mysqld+0x00000084956a)
    #6 get_table_share_with_create(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:456:10 (mysqld+0x00000086ed96)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3837:16 (mysqld+0x000000854892)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 open_and_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1555:10 (mysqld+0x0000007ca3bd)
    #12 mysql_table_grant(THD*, TABLE_LIST*, List<st_lex_user>&, List<LEX_COLUMN>&, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2963:11 (mysqld+0x00000096f9b9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3894:14 (mysqld+0x0000007b5a0a)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M722 (0x7d600003fd18) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 alloc_table_share(TABLE_LIST*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:320:5 (mysqld+0x0000008750c2)
    #3 get_table_share(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:346:16 (mysqld+0x00000084956a)
    #4 get_table_share_with_create(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:456:10 (mysqld+0x00000086ed96)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3837:16 (mysqld+0x000000854892)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 open_and_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1555:10 (mysqld+0x0000007ca3bd)
    #10 mysql_table_grant(THD*, TABLE_LIST*, List<st_lex_user>&, List<LEX_COLUMN>&, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2963:11 (mysqld+0x00000096f9b9)
    #11 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3894:14 (mysqld+0x0000007b5a0a)
    #12 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #13 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #14 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #15 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:411:24 in get_table_share(THD*, TABLE_LIST*, char*, unsigned int, unsigned int, int*)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 8 at 0x7d6c0002f1b0 by thread T6 (mutexes: write M467, write M438):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 (mysqld+0x000000d614aa)
    #1 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:614:3 (mysqld+0x000000c10f9a)
    #2 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #3 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #4 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #5 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #6 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #7 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #8 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #9 open_and_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1555:10 (mysqld+0x0000007ca3bd)
    #10 mysql_table_grant(THD*, TABLE_LIST*, List<st_lex_user>&, List<LEX_COLUMN>&, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2963:11 (mysqld+0x00000096f9b9)
    #11 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3894:14 (mysqld+0x0000007b5a0a)
    #12 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #13 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #14 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #15 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d6c0002f1b0 by thread T5 (mutexes: write M726, write M725):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:166:11 (mysqld+0x000000d61886)
    #1 mi_lock_database /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_locking.c:52:3 (mysqld+0x000000c41bff)
    #2 ha_myisam::external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1878:10 (mysqld+0x000000c094eb)
    #3 handler::ha_external_lock(THD*, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:4554:14 (mysqld+0x000000a3e223)
    #4 unlock_external(THD*, st_table**, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:786:18 (mysqld+0x000000774d13)
    #5 mysql_unlock_tables(THD*, st_mysql_lock*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/lock.cc:391:5 (mysqld+0x000000774f48)
    #6 close_thread_tables(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:1336:5 (mysqld+0x00000084eae6)
    #7 mysql_table_grant(THD*, TABLE_LIST*, List<st_lex_user>&, List<LEX_COLUMN>&, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2985:7 (mysqld+0x00000096fc4a)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3894:14 (mysqld+0x0000007b5a0a)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 1640 at 0x7d6c0002ed00 allocated by thread T4:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 open_and_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1555:10 (mysqld+0x0000007ca3bd)
    #12 mysql_table_grant(THD*, TABLE_LIST*, List<st_lex_user>&, List<LEX_COLUMN>&, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2963:11 (mysqld+0x00000096f9b9)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3894:14 (mysqld+0x0000007b5a0a)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M438 (0x00000207ce28) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 my_thread_global_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_thr_init.c:145:3 (mysqld+0x000000d62bd0)
    #3 my_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_init.c:81:7 (mysqld+0x000000cee1d1)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4215:3 (mysqld+0x000000783bf0)

  Mutex M726 (0x7d6c0002f188) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 open_and_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1555:10 (mysqld+0x0000007ca3bd)
    #11 mysql_table_grant(THD*, TABLE_LIST*, List<st_lex_user>&, List<LEX_COLUMN>&, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2963:11 (mysqld+0x00000096f9b9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3894:14 (mysqld+0x0000007b5a0a)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M725 (0x7d6c0002f160) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:60:3 (mysqld+0x000000d6137f)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 open_and_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1555:10 (mysqld+0x0000007ca3bd)
    #11 mysql_table_grant(THD*, TABLE_LIST*, List<st_lex_user>&, List<LEX_COLUMN>&, unsigned long, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:2963:11 (mysqld+0x00000096f9b9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3894:14 (mysqld+0x0000007b5a0a)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 4 at 0x7d780002eb54 by thread T5 (mutexes: write M467, write M438, write M690):
    #0 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:617:20 (mysqld+0x000000c1105b)
    #1 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #2 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #3 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #4 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #5 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #6 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #7 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #8 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #9 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #10 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #11 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #12 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #13 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #14 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #15 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 4 at 0x7d780002eb54 by thread T4 (mutexes: write M694):
    #0 mi_extra /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_extra.c:105:6 (mysqld+0x000000c21bfc)
    #1 ha_myisam::extra_opt(ha_extra_function, unsigned long) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1862:10 (mysqld+0x000000c09344)
    #2 init_read_record(st_read_record*, THD*, st_table*, SQL_SELECT*, int, bool, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/records.cc:261:7 (mysqld+0x000000a1f76c)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:327:3 (mysqld+0x000000966dce)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2872 at 0x7d780002e800 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M438 (0x00000207ce28) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 my_thread_global_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_thr_init.c:145:3 (mysqld+0x000000d62bd0)
    #3 my_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_init.c:81:7 (mysqld+0x000000cee1d1)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4215:3 (mysqld+0x000000783bf0)

  Mutex M690 (0x7d780002ec88) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:617:20 in mi_open
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 4 at 0x7d780002eb54 by thread T6 (mutexes: write M694):
    #0 mi_extra /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_extra.c:105:6 (mysqld+0x000000c21bfc)
    #1 ha_myisam::extra_opt(ha_extra_function, unsigned long) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:1862:10 (mysqld+0x000000c09344)
    #2 init_read_record(st_read_record*, THD*, st_table*, SQL_SELECT*, int, bool, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/records.cc:261:7 (mysqld+0x000000a1f76c)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:327:3 (mysqld+0x000000966dce)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x7d780002eb54 by thread T5 (mutexes: write M467, write M438, write M690):
    #0 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:617:20 (mysqld+0x000000c1105b)
    #1 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #2 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #3 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #4 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #5 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #6 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #7 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #8 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #9 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #10 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #11 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #12 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #13 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #14 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #15 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is heap block of size 2872 at 0x7d780002e800 allocated by thread T6:
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 my_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:34:23 (mysqld+0x000000d12257)
    #2 my_multi_malloc /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/mulalloc.c:50:24 (mysqld+0x000000d13214)
    #3 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:294:10 (mysqld+0x000000c0d325)
    #4 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #5 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #6 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #7 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #8 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #9 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #10 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #11 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #12 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #13 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #14 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #15 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #16 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #17 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #18 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M694 (0x7d4000007568) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 hash_filo::clear(bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./hash_filo.h:75:14 (mysqld+0x000000796952)
    #3 acl_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:324:3 (mysqld+0x000000966d3a)
    #4 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:719:20 (mysqld+0x0000009668d6)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M467 (0x00000206c900) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3506:10 (mysqld+0x00000078fc44)
    #3 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Mutex M438 (0x00000207ce28) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 my_thread_global_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_thr_init.c:145:3 (mysqld+0x000000d62bd0)
    #3 my_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_init.c:81:7 (mysqld+0x000000cee1d1)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4215:3 (mysqld+0x000000783bf0)

  Mutex M690 (0x7d780002ec88) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (mysqld+0x00000052f7a5)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/thr_mutex.c:61:3 (mysqld+0x000000d61396)
    #2 mi_open /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_open.c:525:5 (mysqld+0x000000c1033c)
    #3 ha_myisam::open(char const*, int, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/ha_myisam.cc:690:14 (mysqld+0x000000c00e98)
    #4 handler::ha_open(st_table*, char const*, int, int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/handler.cc:2047:14 (mysqld+0x000000a34785)
    #5 open_table_from_share(THD*, st_table_share*, char const*, unsigned int, unsigned int, unsigned int, st_table*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/table.cc:1873:19 (mysqld+0x0000008814ce)
    #6 open_unireg_entry(THD*, st_table*, TABLE_LIST*, char const*, char*, unsigned int, st_mem_root*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:3903:18 (mysqld+0x000000854dcf)
    #7 open_table(THD*, TABLE_LIST*, st_mem_root*, bool*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:2906:12 (mysqld+0x000000858761)
    #8 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4570:24 (mysqld+0x00000085d15b)
    #9 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #10 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #11 acl_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:702:7 (mysqld+0x000000966740)
    #12 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6762:31 (mysqld+0x0000007a79ad)
    #13 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #14 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #15 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #16 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #17 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/storage/myisam/mi_extra.c:105:6 in mi_extra
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 8 at 0x000002074740 by thread T5 (mutexes: write M507):
    #0 _my_hash_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:57:16 (mysqld+0x000000d2f3fc)
    #1 grant_load_procs_priv(st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3541:10 (mysqld+0x00000098bfd4)
    #2 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3737:20 (mysqld+0x00000097bf57)
    #3 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #4 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #5 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #6 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #7 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #8 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #9 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x000002074740 by thread T4:
    #0 memcpy /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:677 (mysqld+0x000000547edb)
    #1 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3733:21 (mysqld+0x00000097befa)
    #2 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #3 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #4 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #5 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'proc_priv_hash' of size 88 at 0x000002074728 (mysqld+0x000002074740)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:57:16 in _my_hash_init
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 4 at 0x000002074758 by thread T5 (mutexes: write M507):
    #0 init_dynamic_array2 /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/array.c:60:18 (mysqld+0x000000d32e7d)
    #1 _my_hash_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:58:7 (mysqld+0x000000d2f433)
    #2 grant_load_procs_priv(st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3541:10 (mysqld+0x00000098bfd4)
    #3 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3737:20 (mysqld+0x00000097bf57)
    #4 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x000002074758 by thread T4:
    #0 memcpy /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:677 (mysqld+0x000000547edb)
    #1 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3733:21 (mysqld+0x00000097befa)
    #2 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #3 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #4 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #5 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'proc_priv_hash' of size 88 at 0x000002074728 (mysqld+0x000002074758)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/array.c:60:18 in init_dynamic_array2
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 8 at 0x000002074740 by thread T6:
    #0 memcpy /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:677 (mysqld+0x000000547edb)
    #1 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3733:21 (mysqld+0x00000097befa)
    #2 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #3 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #4 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #5 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x000002074740 by thread T5 (mutexes: write M507):
    #0 _my_hash_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:57:16 (mysqld+0x000000d2f3fc)
    #1 grant_load_procs_priv(st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3541:10 (mysqld+0x00000098bfd4)
    #2 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3737:20 (mysqld+0x00000097bf57)
    #3 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #4 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #5 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #6 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #7 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #8 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #9 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'proc_priv_hash' of size 88 at 0x000002074728 (mysqld+0x000002074740)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3733:21 in grant_reload_procs_priv(THD*)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 4 at 0x000002074760 by thread T5 (mutexes: write M507):
    #0 init_dynamic_array2 /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/array.c:62:25 (mysqld+0x000000d32edb)
    #1 _my_hash_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:58:7 (mysqld+0x000000d2f433)
    #2 grant_load_procs_priv(st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3541:10 (mysqld+0x00000098bfd4)
    #3 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3737:20 (mysqld+0x00000097bf57)
    #4 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x000002074760 by thread T4:
    #0 memcpy /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:677 (mysqld+0x000000547edb)
    #1 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3733:21 (mysqld+0x00000097befa)
    #2 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #3 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #4 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #5 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'proc_priv_hash' of size 88 at 0x000002074728 (mysqld+0x000002074760)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/array.c:62:25 in init_dynamic_array2
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Read of size 8 at 0x000002074760 by thread T6:
    #0 memcpy /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:677 (mysqld+0x000000547edb)
    #1 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3733:21 (mysqld+0x00000097befa)
    #2 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #3 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #4 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #5 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 4 at 0x000002074760 by thread T5 (mutexes: write M507):
    #0 init_dynamic_array2 /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/array.c:62:25 (mysqld+0x000000d32edb)
    #1 _my_hash_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:58:7 (mysqld+0x000000d2f433)
    #2 grant_load_procs_priv(st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3541:10 (mysqld+0x00000098bfd4)
    #3 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3737:20 (mysqld+0x00000097bf57)
    #4 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'proc_priv_hash' of size 88 at 0x000002074728 (mysqld+0x000002074760)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3733:21 in grant_reload_procs_priv(THD*)
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 8 at 0x000002074750 by thread T5 (mutexes: write M507):
    #0 init_dynamic_array2 /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/array.c:64:21 (mysqld+0x000000d32f3c)
    #1 _my_hash_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:58:7 (mysqld+0x000000d2f433)
    #2 grant_load_procs_priv(st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3541:10 (mysqld+0x00000098bfd4)
    #3 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3737:20 (mysqld+0x00000097bf57)
    #4 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x000002074750 by thread T4:
    #0 memcpy /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:677 (mysqld+0x000000547edb)
    #1 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3733:21 (mysqld+0x00000097befa)
    #2 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #3 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #4 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #5 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'proc_priv_hash' of size 88 at 0x000002074728 (mysqld+0x000002074750)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/array.c:64:21 in init_dynamic_array2
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 8 at 0x000002074728 by thread T5 (mutexes: write M507):
    #0 _my_hash_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:64:19 (mysqld+0x000000d2f4aa)
    #1 grant_load_procs_priv(st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3541:10 (mysqld+0x00000098bfd4)
    #2 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3737:20 (mysqld+0x00000097bf57)
    #3 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #4 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #5 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #6 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #7 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #8 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #9 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x000002074728 by thread T4:
    #0 memcpy /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:677 (mysqld+0x000000547edb)
    #1 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3733:21 (mysqld+0x00000097befa)
    #2 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #3 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #4 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #5 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'proc_priv_hash' of size 88 at 0x000002074728 (mysqld+0x000002074728)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:64:19 in _my_hash_init
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 8 at 0x000002074730 by thread T5 (mutexes: write M507):
    #0 _my_hash_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:65:19 (mysqld+0x000000d2f4dd)
    #1 grant_load_procs_priv(st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3541:10 (mysqld+0x00000098bfd4)
    #2 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3737:20 (mysqld+0x00000097bf57)
    #3 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #4 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #5 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #6 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #7 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #8 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #9 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x000002074730 by thread T4:
    #0 memcpy /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:677 (mysqld+0x000000547edb)
    #1 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3733:21 (mysqld+0x00000097befa)
    #2 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #3 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #4 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #5 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'proc_priv_hash' of size 88 at 0x000002074728 (mysqld+0x000002074730)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:65:19 in _my_hash_init
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 8 at 0x000002074738 by thread T5 (mutexes: write M507):
    #0 _my_hash_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:66:16 (mysqld+0x000000d2f509)
    #1 grant_load_procs_priv(st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3541:10 (mysqld+0x00000098bfd4)
    #2 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3737:20 (mysqld+0x00000097bf57)
    #3 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #4 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #5 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #6 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #7 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #8 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #9 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x000002074738 by thread T4:
    #0 memcpy /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:677 (mysqld+0x000000547edb)
    #1 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3733:21 (mysqld+0x00000097befa)
    #2 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #3 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #4 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #5 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'proc_priv_hash' of size 88 at 0x000002074728 (mysqld+0x000002074738)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:66:16 in _my_hash_init
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 8 at 0x000002074768 by thread T5 (mutexes: write M507):
    #0 _my_hash_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:67:16 (mysqld+0x000000d2f53a)
    #1 grant_load_procs_priv(st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3541:10 (mysqld+0x00000098bfd4)
    #2 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3737:20 (mysqld+0x00000097bf57)
    #3 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #4 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #5 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #6 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #7 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #8 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #9 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x000002074768 by thread T4:
    #0 memcpy /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:677 (mysqld+0x000000547edb)
    #1 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3733:21 (mysqld+0x00000097befa)
    #2 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #3 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #4 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #5 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'proc_priv_hash' of size 88 at 0x000002074728 (mysqld+0x000002074768)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:67:16 in _my_hash_init
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 8 at 0x000002074770 by thread T5 (mutexes: write M507):
    #0 _my_hash_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:68:13 (mysqld+0x000000d2f56e)
    #1 grant_load_procs_priv(st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3541:10 (mysqld+0x00000098bfd4)
    #2 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3737:20 (mysqld+0x00000097bf57)
    #3 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #4 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #5 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #6 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #7 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #8 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #9 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x000002074770 by thread T4:
    #0 memcpy /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:677 (mysqld+0x000000547edb)
    #1 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3733:21 (mysqld+0x00000097befa)
    #2 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #3 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #4 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #5 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'proc_priv_hash' of size 88 at 0x000002074728 (mysqld+0x000002074770)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:68:13 in _my_hash_init
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 4 at 0x000002074748 by thread T5 (mutexes: write M507):
    #0 _my_hash_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:69:14 (mysqld+0x000000d2f5a3)
    #1 grant_load_procs_priv(st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3541:10 (mysqld+0x00000098bfd4)
    #2 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3737:20 (mysqld+0x00000097bf57)
    #3 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #4 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #5 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #6 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #7 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #8 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #9 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x000002074748 by thread T4:
    #0 memcpy /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:677 (mysqld+0x000000547edb)
    #1 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3733:21 (mysqld+0x00000097befa)
    #2 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #3 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #4 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #5 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'proc_priv_hash' of size 88 at 0x000002074728 (mysqld+0x000002074748)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:69:14 in _my_hash_init
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 8 at 0x000002074778 by thread T5 (mutexes: write M507):
    #0 _my_hash_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:70:16 (mysqld+0x000000d2f5d5)
    #1 grant_load_procs_priv(st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3541:10 (mysqld+0x00000098bfd4)
    #2 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3737:20 (mysqld+0x00000097bf57)
    #3 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #4 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #5 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #6 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #7 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #8 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #9 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x000002074778 by thread T4:
    #0 memcpy /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:677 (mysqld+0x000000547edb)
    #1 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3733:21 (mysqld+0x00000097befa)
    #2 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #3 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #4 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #5 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'proc_priv_hash' of size 88 at 0x000002074728 (mysqld+0x000002074778)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:70:16 in _my_hash_init
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 8 at 0x000002074798 by thread T5 (mutexes: write M507):
    #0 _my_hash_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:57:16 (mysqld+0x000000d2f3fc)
    #1 grant_load_procs_priv(st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3544:10 (mysqld+0x00000098c03e)
    #2 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3737:20 (mysqld+0x00000097bf57)
    #3 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #4 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #5 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #6 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #7 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #8 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #9 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x000002074798 by thread T4:
    #0 memcpy /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:677 (mysqld+0x000000547edb)
    #1 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3734:21 (mysqld+0x00000097bf2f)
    #2 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #3 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #4 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #5 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'func_priv_hash' of size 88 at 0x000002074780 (mysqld+0x000002074798)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:57:16 in _my_hash_init
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 4 at 0x0000020747b0 by thread T5 (mutexes: write M507):
    #0 init_dynamic_array2 /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/array.c:60:18 (mysqld+0x000000d32e7d)
    #1 _my_hash_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:58:7 (mysqld+0x000000d2f433)
    #2 grant_load_procs_priv(st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3544:10 (mysqld+0x00000098c03e)
    #3 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3737:20 (mysqld+0x00000097bf57)
    #4 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x0000020747b0 by thread T6:
    #0 memcpy /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:677 (mysqld+0x000000547edb)
    #1 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3734:21 (mysqld+0x00000097bf2f)
    #2 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #3 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #4 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #5 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'func_priv_hash' of size 88 at 0x000002074780 (mysqld+0x0000020747b0)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/array.c:60:18 in init_dynamic_array2
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 4 at 0x0000020747b8 by thread T5 (mutexes: write M507):
    #0 init_dynamic_array2 /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/array.c:62:25 (mysqld+0x000000d32edb)
    #1 _my_hash_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:58:7 (mysqld+0x000000d2f433)
    #2 grant_load_procs_priv(st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3544:10 (mysqld+0x00000098c03e)
    #3 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3737:20 (mysqld+0x00000097bf57)
    #4 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x0000020747b8 by thread T6:
    #0 memcpy /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:677 (mysqld+0x000000547edb)
    #1 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3734:21 (mysqld+0x00000097bf2f)
    #2 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #3 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #4 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #5 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'func_priv_hash' of size 88 at 0x000002074780 (mysqld+0x0000020747b8)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/array.c:62:25 in init_dynamic_array2
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 8 at 0x0000020747a8 by thread T5 (mutexes: write M507):
    #0 init_dynamic_array2 /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/array.c:64:21 (mysqld+0x000000d32f3c)
    #1 _my_hash_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:58:7 (mysqld+0x000000d2f433)
    #2 grant_load_procs_priv(st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3544:10 (mysqld+0x00000098c03e)
    #3 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3737:20 (mysqld+0x00000097bf57)
    #4 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #5 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #6 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #7 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #8 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #9 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #10 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x0000020747a8 by thread T4:
    #0 memcpy /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:677 (mysqld+0x000000547edb)
    #1 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3734:21 (mysqld+0x00000097bf2f)
    #2 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #3 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #4 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #5 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'func_priv_hash' of size 88 at 0x000002074780 (mysqld+0x0000020747a8)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/array.c:64:21 in init_dynamic_array2
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 8 at 0x000002074780 by thread T5 (mutexes: write M507):
    #0 _my_hash_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:64:19 (mysqld+0x000000d2f4aa)
    #1 grant_load_procs_priv(st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3544:10 (mysqld+0x00000098c03e)
    #2 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3737:20 (mysqld+0x00000097bf57)
    #3 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #4 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #5 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #6 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #7 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #8 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #9 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x000002074780 by thread T4:
    #0 memcpy /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:677 (mysqld+0x000000547edb)
    #1 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3734:21 (mysqld+0x00000097bf2f)
    #2 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #3 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #4 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #5 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'func_priv_hash' of size 88 at 0x000002074780 (mysqld+0x000002074780)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:64:19 in _my_hash_init
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 8 at 0x000002074788 by thread T5 (mutexes: write M507):
    #0 _my_hash_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:65:19 (mysqld+0x000000d2f4dd)
    #1 grant_load_procs_priv(st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3544:10 (mysqld+0x00000098c03e)
    #2 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3737:20 (mysqld+0x00000097bf57)
    #3 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #4 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #5 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #6 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #7 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #8 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #9 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x000002074788 by thread T4:
    #0 memcpy /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:677 (mysqld+0x000000547edb)
    #1 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3734:21 (mysqld+0x00000097bf2f)
    #2 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #3 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #4 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #5 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'func_priv_hash' of size 88 at 0x000002074780 (mysqld+0x000002074788)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:65:19 in _my_hash_init
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 8 at 0x000002074790 by thread T5 (mutexes: write M507):
    #0 _my_hash_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:66:16 (mysqld+0x000000d2f509)
    #1 grant_load_procs_priv(st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3544:10 (mysqld+0x00000098c03e)
    #2 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3737:20 (mysqld+0x00000097bf57)
    #3 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #4 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #5 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #6 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #7 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #8 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #9 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x000002074790 by thread T4:
    #0 memcpy /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:677 (mysqld+0x000000547edb)
    #1 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3734:21 (mysqld+0x00000097bf2f)
    #2 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #3 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #4 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #5 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'func_priv_hash' of size 88 at 0x000002074780 (mysqld+0x000002074790)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:66:16 in _my_hash_init
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 8 at 0x0000020747c0 by thread T5 (mutexes: write M507):
    #0 _my_hash_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:67:16 (mysqld+0x000000d2f53a)
    #1 grant_load_procs_priv(st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3544:10 (mysqld+0x00000098c03e)
    #2 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3737:20 (mysqld+0x00000097bf57)
    #3 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #4 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #5 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #6 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #7 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #8 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #9 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x0000020747c0 by thread T4:
    #0 memcpy /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:677 (mysqld+0x000000547edb)
    #1 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3734:21 (mysqld+0x00000097bf2f)
    #2 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #3 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #4 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #5 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'func_priv_hash' of size 88 at 0x000002074780 (mysqld+0x0000020747c0)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:67:16 in _my_hash_init
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 8 at 0x0000020747c8 by thread T5 (mutexes: write M507):
    #0 _my_hash_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:68:13 (mysqld+0x000000d2f56e)
    #1 grant_load_procs_priv(st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3544:10 (mysqld+0x00000098c03e)
    #2 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3737:20 (mysqld+0x00000097bf57)
    #3 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #4 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #5 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #6 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #7 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #8 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #9 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x0000020747c8 by thread T4:
    #0 memcpy /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:677 (mysqld+0x000000547edb)
    #1 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3734:21 (mysqld+0x00000097bf2f)
    #2 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #3 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #4 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #5 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'func_priv_hash' of size 88 at 0x000002074780 (mysqld+0x0000020747c8)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:68:13 in _my_hash_init
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 4 at 0x0000020747a0 by thread T5 (mutexes: write M507):
    #0 _my_hash_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:69:14 (mysqld+0x000000d2f5a3)
    #1 grant_load_procs_priv(st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3544:10 (mysqld+0x00000098c03e)
    #2 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3737:20 (mysqld+0x00000097bf57)
    #3 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #4 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #5 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #6 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #7 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #8 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #9 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x0000020747a0 by thread T4:
    #0 memcpy /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:677 (mysqld+0x000000547edb)
    #1 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3734:21 (mysqld+0x00000097bf2f)
    #2 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #3 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #4 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #5 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'func_priv_hash' of size 88 at 0x000002074780 (mysqld+0x0000020747a0)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:69:14 in _my_hash_init
==================
==================
WARNING: ThreadSanitizer: data race (pid=17997)
  Write of size 8 at 0x0000020747d0 by thread T5 (mutexes: write M507):
    #0 _my_hash_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:70:16 (mysqld+0x000000d2f5d5)
    #1 grant_load_procs_priv(st_table*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3544:10 (mysqld+0x00000098c03e)
    #2 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3737:20 (mysqld+0x00000097bf57)
    #3 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #4 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #5 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #6 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #7 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #8 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #9 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous read of size 8 at 0x0000020747d0 by thread T4:
    #0 memcpy /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:677 (mysqld+0x000000547edb)
    #1 grant_reload_procs_priv(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3734:21 (mysqld+0x00000097bf2f)
    #2 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3827:7 (mysqld+0x00000097b557)
    #3 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #4 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #5 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Location is global 'func_priv_hash' of size 88 at 0x000002074780 (mysqld+0x0000020747d0)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T5 (tid=18012, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:70:16 in _my_hash_init
==================
==================
WARNING: ThreadSanitizer: heap-use-after-free (pid=17997)
  Read of size 8 at 0x7d900001a098 by thread T4 (mutexes: write M507):
    #0 my_hash_insert /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:341:36 (mysqld+0x000000d306bf)
    #1 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3681:16 (mysqld+0x00000097bbe9)
    #2 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #3 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #4 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #5 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d900001a098 by thread T6:
    #0 free /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:638 (mysqld+0x00000053ffe6)
    #1 my_no_flags_free /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:59:5 (mysqld+0x000000d1244e)
    #2 free_root /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_alloc.c:355:7 (mysqld+0x000000d14d04)
    #3 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4747:3 (mysqld+0x00000085e405)
    #4 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #5 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #6 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #7 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: heap-use-after-free /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:341:36 in my_hash_insert
==================
==================
WARNING: ThreadSanitizer: heap-use-after-free (pid=17997)
  Write of size 8 at 0x7d900001a190 by thread T4 (mutexes: write M507):
    #0 memcpy /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:677 (mysqld+0x000000547edb)
    #1 my_hash_insert /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:425:14 (mysqld+0x000000d30db0)
    #2 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3681:16 (mysqld+0x00000097bbe9)
    #3 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #4 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #5 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #6 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #7 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #8 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #9 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d900001a190 by thread T6:
    #0 free /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:638 (mysqld+0x00000053ffe6)
    #1 my_no_flags_free /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:59:5 (mysqld+0x000000d1244e)
    #2 free_root /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_alloc.c:355:7 (mysqld+0x000000d14d04)
    #3 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4747:3 (mysqld+0x00000085e405)
    #4 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #5 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #6 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #7 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: heap-use-after-free /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:425:14 in my_hash_insert
==================
==================
WARNING: ThreadSanitizer: heap-use-after-free (pid=17997)
  Write of size 8 at 0x7d900001a1a8 by thread T4 (mutexes: write M507):
    #0 my_hash_insert /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:391:17 (mysqld+0x000000d309ed)
    #1 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3681:16 (mysqld+0x00000097bbe9)
    #2 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #3 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #4 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #5 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d900001a1a8 by thread T6:
    #0 free /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:638 (mysqld+0x00000053ffe6)
    #1 my_no_flags_free /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:59:5 (mysqld+0x000000d1244e)
    #2 free_root /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_alloc.c:355:7 (mysqld+0x000000d14d04)
    #3 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4747:3 (mysqld+0x00000085e405)
    #4 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #5 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #6 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #7 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: heap-use-after-free /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:391:17 in my_hash_insert
==================
==================
WARNING: ThreadSanitizer: heap-use-after-free (pid=17997)
  Write of size 4 at 0x7d900001a1a0 by thread T4 (mutexes: write M507):
    #0 my_hash_insert /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:392:17 (mysqld+0x000000d30a38)
    #1 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3681:16 (mysqld+0x00000097bbe9)
    #2 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #3 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #4 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #5 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #6 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #7 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #8 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Previous write of size 8 at 0x7d900001a1a0 by thread T6:
    #0 free /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:638 (mysqld+0x00000053ffe6)
    #1 my_no_flags_free /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_malloc.c:59:5 (mysqld+0x000000d1244e)
    #2 free_root /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/my_alloc.c:355:7 (mysqld+0x000000d14d04)
    #3 open_tables(THD*, TABLE_LIST**, unsigned int*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4747:3 (mysqld+0x00000085e405)
    #4 open_and_lock_tables_derived(THD*, TABLE_LIST*, bool) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_base.cc:4976:9 (mysqld+0x00000085fd4e)
    #5 simple_open_n_lock_tables(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/./mysql_priv.h:1550:10 (mysqld+0x0000007ca87a)
    #6 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3795:7 (mysqld+0x00000097b3b4)
    #7 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #8 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #9 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #10 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #11 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #12 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

  Mutex M507 (0x00000206d090) created at:
    #0 pthread_rwlock_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1260 (mysqld+0x000000521563)
    #1 init_thread_environment() /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3542:10 (mysqld+0x00000078ff96)
    #2 init_common_variables(char const*, int, char**, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:3173:7 (mysqld+0x000000784a0b)
    #3 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4255:7 (mysqld+0x000000783c68)

  Thread T4 (tid=18009, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

  Thread T6 (tid=18013, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (mysqld+0x0000005445b3)
    #1 create_thread_to_handle_connection(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4809:16 (mysqld+0x00000078a9ce)
    #2 create_new_thread(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4901:3 (mysqld+0x00000078b08b)
    #3 handle_connections_sockets /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:5132:5 (mysqld+0x00000078a66b)
    #4 main /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:4470:3 (mysqld+0x00000078464b)

SUMMARY: ThreadSanitizer: heap-use-after-free /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:392:17 in my_hash_insert
==================
==================
WARNING: ThreadSanitizer: signal-unsafe call inside of a signal (pid=17997)
    #0 malloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:595 (mysqld+0x00000053b31f)
    #1 __backtrace_symbols <null> (libc.so.6+0x00000010af74)
    #2 my_print_stacktrace /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/stacktrace.c:115:17 (mysqld+0x000000d57147)
    #3 handle_segfault /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2464:5 (mysqld+0x0000007826d7)
    #4 __tsan::CallUserSignalHandler(__tsan::ThreadState*, bool, bool, bool, int, my_siginfo_t*, void*) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1953 (mysqld+0x00000051c1e8)
    #5 my_hash_key /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:153:20 (mysqld+0x000000d311d8)
    #6 my_hash_rec_mask /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:170:24 (mysqld+0x000000d301ac)
    #7 my_hash_insert /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:426:18 (mysqld+0x000000d30e77)
    #8 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3681:16 (mysqld+0x00000097bbe9)
    #9 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #10 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #11 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #12 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #13 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #14 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #15 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

SUMMARY: ThreadSanitizer: signal-unsafe call inside of a signal (/lib/x86_64-linux-gnu/libc.so.6+0x10af74) in __backtrace_symbols
==================
==================
WARNING: ThreadSanitizer: signal-unsafe call inside of a signal (pid=17997)
    #0 realloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:625 (mysqld+0x00000053d91e)
    #1 <null> <null> (libstdc++.so.6+0x000000060fcb)
    #2 my_demangle_symbols /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/stacktrace.c:89:18 (mysqld+0x000000d57303)
    #3 my_print_stacktrace /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/stacktrace.c:117:5 (mysqld+0x000000d5716a)
    #4 handle_segfault /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2464:5 (mysqld+0x0000007826d7)
    #5 __tsan::CallUserSignalHandler(__tsan::ThreadState*, bool, bool, bool, int, my_siginfo_t*, void*) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1953 (mysqld+0x00000051c1e8)
    #6 my_hash_key /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:153:20 (mysqld+0x000000d311d8)
    #7 my_hash_rec_mask /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:170:24 (mysqld+0x000000d301ac)
    #8 my_hash_insert /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:426:18 (mysqld+0x000000d30e77)
    #9 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3681:16 (mysqld+0x00000097bbe9)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

SUMMARY: ThreadSanitizer: signal-unsafe call inside of a signal (/usr/lib/x86_64-linux-gnu/libstdc++.so.6+0x60fcb) 
==================
==================
WARNING: ThreadSanitizer: signal-unsafe call inside of a signal (pid=17997)
    #0 realloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:625 (mysqld+0x00000053d91e)
    #1 <null> <null> (libstdc++.so.6+0x000000060fcb)
    #2 my_demangle_symbols /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/stacktrace.c:89:18 (mysqld+0x000000d57303)
    #3 my_print_stacktrace /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/stacktrace.c:117:5 (mysqld+0x000000d5716a)
    #4 handle_segfault /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2464:5 (mysqld+0x0000007826d7)
    #5 __tsan::CallUserSignalHandler(__tsan::ThreadState*, bool, bool, bool, int, my_siginfo_t*, void*) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1953 (mysqld+0x00000051c1e8)
    #6 my_hash_key /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:153:20 (mysqld+0x000000d311d8)
    #7 my_hash_rec_mask /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:170:24 (mysqld+0x000000d301ac)
    #8 my_hash_insert /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:426:18 (mysqld+0x000000d30e77)
    #9 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3681:16 (mysqld+0x00000097bbe9)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

SUMMARY: ThreadSanitizer: signal-unsafe call inside of a signal (/usr/lib/x86_64-linux-gnu/libstdc++.so.6+0x60fcb) 
==================
==================
WARNING: ThreadSanitizer: signal-unsafe call inside of a signal (pid=17997)
    #0 realloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:625 (mysqld+0x00000053d91e)
    #1 <null> <null> (libstdc++.so.6+0x000000060fcb)
    #2 my_demangle_symbols /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/stacktrace.c:89:18 (mysqld+0x000000d57303)
    #3 my_print_stacktrace /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/stacktrace.c:117:5 (mysqld+0x000000d5716a)
    #4 handle_segfault /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2464:5 (mysqld+0x0000007826d7)
    #5 __tsan::CallUserSignalHandler(__tsan::ThreadState*, bool, bool, bool, int, my_siginfo_t*, void*) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1953 (mysqld+0x00000051c1e8)
    #6 my_hash_key /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:153:20 (mysqld+0x000000d311d8)
    #7 my_hash_rec_mask /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:170:24 (mysqld+0x000000d301ac)
    #8 my_hash_insert /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:426:18 (mysqld+0x000000d30e77)
    #9 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3681:16 (mysqld+0x00000097bbe9)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

SUMMARY: ThreadSanitizer: signal-unsafe call inside of a signal (/usr/lib/x86_64-linux-gnu/libstdc++.so.6+0x60fcb) 
==================
==================
WARNING: ThreadSanitizer: signal-unsafe call inside of a signal (pid=17997)
    #0 realloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:625 (mysqld+0x00000053d91e)
    #1 <null> <null> (libstdc++.so.6+0x000000060fcb)
    #2 my_demangle_symbols /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/stacktrace.c:89:18 (mysqld+0x000000d57303)
    #3 my_print_stacktrace /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/stacktrace.c:117:5 (mysqld+0x000000d5716a)
    #4 handle_segfault /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2464:5 (mysqld+0x0000007826d7)
    #5 __tsan::CallUserSignalHandler(__tsan::ThreadState*, bool, bool, bool, int, my_siginfo_t*, void*) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1953 (mysqld+0x00000051c1e8)
    #6 my_hash_key /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:153:20 (mysqld+0x000000d311d8)
    #7 my_hash_rec_mask /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:170:24 (mysqld+0x000000d301ac)
    #8 my_hash_insert /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:426:18 (mysqld+0x000000d30e77)
    #9 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3681:16 (mysqld+0x00000097bbe9)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

SUMMARY: ThreadSanitizer: signal-unsafe call inside of a signal (/usr/lib/x86_64-linux-gnu/libstdc++.so.6+0x60fcb) 
==================
==================
WARNING: ThreadSanitizer: signal-unsafe call inside of a signal (pid=17997)
    #0 realloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:625 (mysqld+0x00000053d91e)
    #1 <null> <null> (libstdc++.so.6+0x000000060fcb)
    #2 my_demangle_symbols /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/stacktrace.c:89:18 (mysqld+0x000000d57303)
    #3 my_print_stacktrace /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/stacktrace.c:117:5 (mysqld+0x000000d5716a)
    #4 handle_segfault /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2464:5 (mysqld+0x0000007826d7)
    #5 __tsan::CallUserSignalHandler(__tsan::ThreadState*, bool, bool, bool, int, my_siginfo_t*, void*) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1953 (mysqld+0x00000051c1e8)
    #6 my_hash_key /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:153:20 (mysqld+0x000000d311d8)
    #7 my_hash_rec_mask /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:170:24 (mysqld+0x000000d301ac)
    #8 my_hash_insert /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:426:18 (mysqld+0x000000d30e77)
    #9 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3681:16 (mysqld+0x00000097bbe9)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

SUMMARY: ThreadSanitizer: signal-unsafe call inside of a signal (/usr/lib/x86_64-linux-gnu/libstdc++.so.6+0x60fcb) 
==================
==================
WARNING: ThreadSanitizer: signal-unsafe call inside of a signal (pid=17997)
    #0 realloc /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:625 (mysqld+0x00000053d91e)
    #1 <null> <null> (libstdc++.so.6+0x000000060fcb)
    #2 my_demangle_symbols /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/stacktrace.c:89:18 (mysqld+0x000000d57303)
    #3 my_print_stacktrace /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/stacktrace.c:117:5 (mysqld+0x000000d5716a)
    #4 handle_segfault /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2464:5 (mysqld+0x0000007826d7)
    #5 __tsan::CallUserSignalHandler(__tsan::ThreadState*, bool, bool, bool, int, my_siginfo_t*, void*) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1953 (mysqld+0x00000051c1e8)
    #6 my_hash_key /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:153:20 (mysqld+0x000000d311d8)
    #7 my_hash_rec_mask /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:170:24 (mysqld+0x000000d301ac)
    #8 my_hash_insert /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:426:18 (mysqld+0x000000d30e77)
    #9 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3681:16 (mysqld+0x00000097bbe9)
    #10 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #11 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #12 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #13 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #14 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #15 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #16 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

SUMMARY: ThreadSanitizer: signal-unsafe call inside of a signal (/usr/lib/x86_64-linux-gnu/libstdc++.so.6+0x60fcb) 
==================
==================
WARNING: ThreadSanitizer: signal-unsafe call inside of a signal (pid=17997)
    #0 free /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:638 (mysqld+0x00000053ffe6)
    #1 my_print_stacktrace /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/stacktrace.c:118:5 (mysqld+0x000000d57176)
    #2 handle_segfault /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/mysqld.cc:2464:5 (mysqld+0x0000007826d7)
    #3 __tsan::CallUserSignalHandler(__tsan::ThreadState*, bool, bool, bool, int, my_siginfo_t*, void*) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1953 (mysqld+0x00000051c1e8)
    #4 my_hash_key /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:153:20 (mysqld+0x000000d311d8)
    #5 my_hash_rec_mask /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:170:24 (mysqld+0x000000d301ac)
    #6 my_hash_insert /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:426:18 (mysqld+0x000000d30e77)
    #7 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3681:16 (mysqld+0x00000097bbe9)
    #8 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #9 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #10 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #11 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #12 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #13 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #14 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

SUMMARY: ThreadSanitizer: signal-unsafe call inside of a signal /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/stacktrace.c:118:5 in my_print_stacktrace
==================
==================
WARNING: ThreadSanitizer: signal-unsafe call inside of a signal (pid=17997)
    #0 free /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:638 (mysqld+0x00000053ffe6)
    #1 <null> <null> (libc.so.6+0x00000003c1cf)
    #2 __tsan::CallUserSignalHandler(__tsan::ThreadState*, bool, bool, bool, int, my_siginfo_t*, void*) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1953 (mysqld+0x00000051c1e8)
    #3 my_hash_key /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:153:20 (mysqld+0x000000d311d8)
    #4 my_hash_rec_mask /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:170:24 (mysqld+0x000000d301ac)
    #5 my_hash_insert /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:426:18 (mysqld+0x000000d30e77)
    #6 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3681:16 (mysqld+0x00000097bbe9)
    #7 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #8 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #9 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #10 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #11 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #12 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #13 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

SUMMARY: ThreadSanitizer: signal-unsafe call inside of a signal (/lib/x86_64-linux-gnu/libc.so.6+0x3c1cf) 
==================
==================
WARNING: ThreadSanitizer: signal-unsafe call inside of a signal (pid=17997)
    #0 free /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:638 (mysqld+0x00000053ffe6)
    #1 <null> <null> (libc.so.6+0x00000003c1cf)
    #2 __tsan::CallUserSignalHandler(__tsan::ThreadState*, bool, bool, bool, int, my_siginfo_t*, void*) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1953 (mysqld+0x00000051c1e8)
    #3 my_hash_key /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:153:20 (mysqld+0x000000d311d8)
    #4 my_hash_rec_mask /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:170:24 (mysqld+0x000000d301ac)
    #5 my_hash_insert /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:426:18 (mysqld+0x000000d30e77)
    #6 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3681:16 (mysqld+0x00000097bbe9)
    #7 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #8 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #9 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #10 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #11 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #12 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #13 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

SUMMARY: ThreadSanitizer: signal-unsafe call inside of a signal (/lib/x86_64-linux-gnu/libc.so.6+0x3c1cf) 
==================
==================
WARNING: ThreadSanitizer: signal-unsafe call inside of a signal (pid=17997)
    #0 free /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:638 (mysqld+0x00000053ffe6)
    #1 <null> <null> (libc.so.6+0x00000003c1cf)
    #2 __tsan::CallUserSignalHandler(__tsan::ThreadState*, bool, bool, bool, int, my_siginfo_t*, void*) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1953 (mysqld+0x00000051c1e8)
    #3 my_hash_key /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:153:20 (mysqld+0x000000d311d8)
    #4 my_hash_rec_mask /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:170:24 (mysqld+0x000000d301ac)
    #5 my_hash_insert /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:426:18 (mysqld+0x000000d30e77)
    #6 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3681:16 (mysqld+0x00000097bbe9)
    #7 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #8 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #9 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #10 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #11 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #12 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #13 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

SUMMARY: ThreadSanitizer: signal-unsafe call inside of a signal (/lib/x86_64-linux-gnu/libc.so.6+0x3c1cf) 
==================
==================
WARNING: ThreadSanitizer: signal-unsafe call inside of a signal (pid=17997)
    #0 free /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:638 (mysqld+0x00000053ffe6)
    #1 <null> <null> (libc.so.6+0x00000003c1cf)
    #2 __tsan::CallUserSignalHandler(__tsan::ThreadState*, bool, bool, bool, int, my_siginfo_t*, void*) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1953 (mysqld+0x00000051c1e8)
    #3 my_hash_key /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:153:20 (mysqld+0x000000d311d8)
    #4 my_hash_rec_mask /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:170:24 (mysqld+0x000000d301ac)
    #5 my_hash_insert /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:426:18 (mysqld+0x000000d30e77)
    #6 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3681:16 (mysqld+0x00000097bbe9)
    #7 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #8 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #9 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #10 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #11 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #12 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #13 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

SUMMARY: ThreadSanitizer: signal-unsafe call inside of a signal (/lib/x86_64-linux-gnu/libc.so.6+0x3c1cf) 
==================
==================
WARNING: ThreadSanitizer: signal-unsafe call inside of a signal (pid=17997)
    #0 free /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:638 (mysqld+0x00000053ffe6)
    #1 <null> <null> (libc.so.6+0x00000003c1cf)
    #2 __tsan::CallUserSignalHandler(__tsan::ThreadState*, bool, bool, bool, int, my_siginfo_t*, void*) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1953 (mysqld+0x00000051c1e8)
    #3 my_hash_key /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:153:20 (mysqld+0x000000d311d8)
    #4 my_hash_rec_mask /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:170:24 (mysqld+0x000000d301ac)
    #5 my_hash_insert /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:426:18 (mysqld+0x000000d30e77)
    #6 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3681:16 (mysqld+0x00000097bbe9)
    #7 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #8 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #9 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #10 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #11 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #12 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #13 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

SUMMARY: ThreadSanitizer: signal-unsafe call inside of a signal (/lib/x86_64-linux-gnu/libc.so.6+0x3c1cf) 
==================
==================
WARNING: ThreadSanitizer: signal-unsafe call inside of a signal (pid=17997)
    #0 free /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:638 (mysqld+0x00000053ffe6)
    #1 <null> <null> (libc.so.6+0x00000003c1cf)
    #2 __tsan::CallUserSignalHandler(__tsan::ThreadState*, bool, bool, bool, int, my_siginfo_t*, void*) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1953 (mysqld+0x00000051c1e8)
    #3 my_hash_key /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:153:20 (mysqld+0x000000d311d8)
    #4 my_hash_rec_mask /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:170:24 (mysqld+0x000000d301ac)
    #5 my_hash_insert /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:426:18 (mysqld+0x000000d30e77)
    #6 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3681:16 (mysqld+0x00000097bbe9)
    #7 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #8 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #9 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #10 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #11 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #12 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #13 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

SUMMARY: ThreadSanitizer: signal-unsafe call inside of a signal (/lib/x86_64-linux-gnu/libc.so.6+0x3c1cf) 
==================
==================
WARNING: ThreadSanitizer: signal-unsafe call inside of a signal (pid=17997)
    #0 free /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:638 (mysqld+0x00000053ffe6)
    #1 <null> <null> (libc.so.6+0x00000003c1cf)
    #2 __tsan::CallUserSignalHandler(__tsan::ThreadState*, bool, bool, bool, int, my_siginfo_t*, void*) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1953 (mysqld+0x00000051c1e8)
    #3 my_hash_key /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:153:20 (mysqld+0x000000d311d8)
    #4 my_hash_rec_mask /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:170:24 (mysqld+0x000000d301ac)
    #5 my_hash_insert /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:426:18 (mysqld+0x000000d30e77)
    #6 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3681:16 (mysqld+0x00000097bbe9)
    #7 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #8 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #9 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #10 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #11 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #12 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #13 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

SUMMARY: ThreadSanitizer: signal-unsafe call inside of a signal (/lib/x86_64-linux-gnu/libc.so.6+0x3c1cf) 
==================
==================
WARNING: ThreadSanitizer: signal-unsafe call inside of a signal (pid=17997)
    #0 free /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:638 (mysqld+0x00000053ffe6)
    #1 <null> <null> (libc.so.6+0x00000003c1cf)
    #2 __tsan::CallUserSignalHandler(__tsan::ThreadState*, bool, bool, bool, int, my_siginfo_t*, void*) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1953 (mysqld+0x00000051c1e8)
    #3 my_hash_key /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:153:20 (mysqld+0x000000d311d8)
    #4 my_hash_rec_mask /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:170:24 (mysqld+0x000000d301ac)
    #5 my_hash_insert /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:426:18 (mysqld+0x000000d30e77)
    #6 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3681:16 (mysqld+0x00000097bbe9)
    #7 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #8 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #9 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #10 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #11 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #12 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #13 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

SUMMARY: ThreadSanitizer: signal-unsafe call inside of a signal (/lib/x86_64-linux-gnu/libc.so.6+0x3c1cf) 
==================
==================
WARNING: ThreadSanitizer: signal-unsafe call inside of a signal (pid=17997)
    #0 free /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:638 (mysqld+0x00000053ffe6)
    #1 <null> <null> (libc.so.6+0x00000003c1cf)
    #2 __tsan::CallUserSignalHandler(__tsan::ThreadState*, bool, bool, bool, int, my_siginfo_t*, void*) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1953 (mysqld+0x00000051c1e8)
    #3 my_hash_key /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:153:20 (mysqld+0x000000d311d8)
    #4 my_hash_rec_mask /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:170:24 (mysqld+0x000000d301ac)
    #5 my_hash_insert /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:426:18 (mysqld+0x000000d30e77)
    #6 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3681:16 (mysqld+0x00000097bbe9)
    #7 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #8 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #9 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #10 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #11 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #12 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #13 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

SUMMARY: ThreadSanitizer: signal-unsafe call inside of a signal (/lib/x86_64-linux-gnu/libc.so.6+0x3c1cf) 
==================
==================
WARNING: ThreadSanitizer: signal-unsafe call inside of a signal (pid=17997)
    #0 free /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:638 (mysqld+0x00000053ffe6)
    #1 <null> <null> (libc.so.6+0x00000003c1cf)
    #2 __tsan::CallUserSignalHandler(__tsan::ThreadState*, bool, bool, bool, int, my_siginfo_t*, void*) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1953 (mysqld+0x00000051c1e8)
    #3 my_hash_key /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:153:20 (mysqld+0x000000d311d8)
    #4 my_hash_rec_mask /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:170:24 (mysqld+0x000000d301ac)
    #5 my_hash_insert /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:426:18 (mysqld+0x000000d30e77)
    #6 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3681:16 (mysqld+0x00000097bbe9)
    #7 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #8 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #9 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #10 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #11 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #12 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #13 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

SUMMARY: ThreadSanitizer: signal-unsafe call inside of a signal (/lib/x86_64-linux-gnu/libc.so.6+0x3c1cf) 
==================
==================
WARNING: ThreadSanitizer: signal-unsafe call inside of a signal (pid=17997)
    #0 free /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:638 (mysqld+0x00000053ffe6)
    #1 <null> <null> (libc.so.6+0x00000003c1cf)
    #2 __tsan::CallUserSignalHandler(__tsan::ThreadState*, bool, bool, bool, int, my_siginfo_t*, void*) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1953 (mysqld+0x00000051c1e8)
    #3 my_hash_key /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:153:20 (mysqld+0x000000d311d8)
    #4 my_hash_rec_mask /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:170:24 (mysqld+0x000000d301ac)
    #5 my_hash_insert /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:426:18 (mysqld+0x000000d30e77)
    #6 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3681:16 (mysqld+0x00000097bbe9)
    #7 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #8 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #9 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #10 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #11 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #12 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #13 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

SUMMARY: ThreadSanitizer: signal-unsafe call inside of a signal (/lib/x86_64-linux-gnu/libc.so.6+0x3c1cf) 
==================
==================
WARNING: ThreadSanitizer: signal-unsafe call inside of a signal (pid=17997)
    #0 free /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:638 (mysqld+0x00000053ffe6)
    #1 <null> <null> (libc.so.6+0x00000003c1cf)
    #2 __tsan::CallUserSignalHandler(__tsan::ThreadState*, bool, bool, bool, int, my_siginfo_t*, void*) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1953 (mysqld+0x00000051c1e8)
    #3 my_hash_key /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:153:20 (mysqld+0x000000d311d8)
    #4 my_hash_rec_mask /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:170:24 (mysqld+0x000000d301ac)
    #5 my_hash_insert /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:426:18 (mysqld+0x000000d30e77)
    #6 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3681:16 (mysqld+0x00000097bbe9)
    #7 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #8 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #9 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #10 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #11 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #12 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #13 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

SUMMARY: ThreadSanitizer: signal-unsafe call inside of a signal (/lib/x86_64-linux-gnu/libc.so.6+0x3c1cf) 
==================
==================
WARNING: ThreadSanitizer: signal-unsafe call inside of a signal (pid=17997)
    #0 free /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:638 (mysqld+0x00000053ffe6)
    #1 <null> <null> (libc.so.6+0x00000003c1cf)
    #2 __tsan::CallUserSignalHandler(__tsan::ThreadState*, bool, bool, bool, int, my_siginfo_t*, void*) /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1953 (mysqld+0x00000051c1e8)
    #3 my_hash_key /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:153:20 (mysqld+0x000000d311d8)
    #4 my_hash_rec_mask /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:170:24 (mysqld+0x000000d301ac)
    #5 my_hash_insert /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/mysys/hash.c:426:18 (mysqld+0x000000d30e77)
    #6 grant_load(THD*, TABLE_LIST*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3681:16 (mysqld+0x00000097bbe9)
    #7 grant_reload(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_acl.cc:3808:20 (mysqld+0x00000097b467)
    #8 reload_acl_and_cache(THD*, unsigned long, TABLE_LIST*, bool*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:6763:34 (mysqld+0x0000007a79c9)
    #9 mysql_execute_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:3945:10 (mysqld+0x0000007b5df6)
    #10 mysql_parse(THD*, char const*, unsigned int, char const**) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:5929:11 (mysqld+0x0000007a4326)
    #11 dispatch_command(enum_server_command, THD*, char*, unsigned int) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:1216:5 (mysqld+0x0000007a0b0c)
    #12 do_command(THD*) /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_parse.cc:857:17 (mysqld+0x0000007a5192)
    #13 handle_one_connection /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/sql/sql_connect.cc:1115:11 (mysqld+0x00000079a6e6)

SUMMARY: ThreadSanitizer: signal-unsafe call inside of a signal (/lib/x86_64-linux-gnu/libc.so.6+0x3c1cf) 
==================
ThreadSanitizer: reported 141 warnings
==================
WARNING: ThreadSanitizer: data race (pid=18002)
  Read of size 8 at 0x7f48218dcbf0 by thread T3:
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/libmysql_r/thr_mutex.c:97:12 (libmysqlclient_r.so.16+0x0000000449da)
    #1 my_thread_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/libmysql_r/my_thr_init.c:294:3 (libmysqlclient_r.so.16+0x0000000440fa)
    #2 mysql_server_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/libmysql_r/libmysql.c:178:18 (libmysqlclient_r.so.16+0x000000017c5a)
    #3 mysql_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/libmysql_r/client.c:1509:7 (libmysqlclient_r.so.16+0x0000000a81d3)
    #4 worker_thread /home/jason/github/ConAnalysis/TESTS/mysql-35589/bug35589.c:43:8 (attack+0x0000004a44bb)

  Previous write of size 8 at 0x7f48218dcbf0 by thread T2 (mutexes: write M18, write M17):
    #0 safe_mutex_lock /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/libmysql_r/thr_mutex.c:166:11 (libmysqlclient_r.so.16+0x000000044da2)
    #1 my_thread_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/libmysql_r/my_thr_init.c:294:3 (libmysqlclient_r.so.16+0x0000000440fa)
    #2 mysql_server_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/libmysql_r/libmysql.c:178:18 (libmysqlclient_r.so.16+0x000000017c5a)
    #3 mysql_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/libmysql_r/client.c:1509:7 (libmysqlclient_r.so.16+0x0000000a81d3)
    #4 worker_thread /home/jason/github/ConAnalysis/TESTS/mysql-35589/bug35589.c:43:8 (attack+0x0000004a44bb)

  Location is global 'THR_LOCK_threads' of size 104 at 0x7f48218dcba0 (libmysqlclient_r.so.16+0x000000346bf0)

  Mutex M18 (0x7f48218dcbc8) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (attack+0x000000432965)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/libmysql_r/thr_mutex.c:61:3 (libmysqlclient_r.so.16+0x0000000448d3)
    #2 my_thread_global_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/libmysql_r/my_thr_init.c:149:3 (libmysqlclient_r.so.16+0x000000043e62)
    #3 my_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/libmysql_r/my_init.c:81:7 (libmysqlclient_r.so.16+0x000000033e63)
    #4 mysql_server_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/libmysql_r/libmysql.c:126:9 (libmysqlclient_r.so.16+0x000000017aac)
    #5 mysql_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/libmysql_r/client.c:1509:7 (libmysqlclient_r.so.16+0x0000000a81d3)
    #6 main /home/jason/github/ConAnalysis/TESTS/mysql-35589/bug35589.c:152:14 (attack+0x0000004a5359)

  Mutex M17 (0x7f48218dcba0) created at:
    #0 pthread_mutex_init /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1169 (attack+0x000000432965)
    #1 safe_mutex_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/libmysql_r/thr_mutex.c:60:3 (libmysqlclient_r.so.16+0x0000000448bc)
    #2 my_thread_global_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/libmysql_r/my_thr_init.c:149:3 (libmysqlclient_r.so.16+0x000000043e62)
    #3 my_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/libmysql_r/my_init.c:81:7 (libmysqlclient_r.so.16+0x000000033e63)
    #4 mysql_server_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/libmysql_r/libmysql.c:126:9 (libmysqlclient_r.so.16+0x000000017aac)
    #5 mysql_init /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/libmysql_r/client.c:1509:7 (libmysqlclient_r.so.16+0x0000000a81d3)
    #6 main /home/jason/github/ConAnalysis/TESTS/mysql-35589/bug35589.c:152:14 (attack+0x0000004a5359)

  Thread T3 (tid=18008, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (attack+0x000000447773)
    #1 main /home/jason/github/ConAnalysis/TESTS/mysql-35589/bug35589.c:197:7 (attack+0x0000004a5727)

  Thread T2 (tid=18007, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (attack+0x000000447773)
    #1 main /home/jason/github/ConAnalysis/TESTS/mysql-35589/bug35589.c:197:7 (attack+0x0000004a5727)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/concurrency-exploits/mysql-35589/mysql-5.1.35/libmysql_r/thr_mutex.c:97:12 in safe_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=18002)
  Read of size 8 at 0x0000014b0390 by main thread:
    #0 main /home/jason/github/ConAnalysis/TESTS/mysql-35589/bug35589.c:214:29 (attack+0x0000004a581d)

  Previous write of size 8 at 0x0000014b0390 by thread T4:
    #0 db_query /home/jason/github/ConAnalysis/TESTS/mysql-35589/bug35589.c:247:13 (attack+0x0000004a4fc3)
    #1 worker_thread /home/jason/github/ConAnalysis/TESTS/mysql-35589/bug35589.c:124:5 (attack+0x0000004a4e82)

  As if synchronized via sleep:
    #0 usleep /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:364 (attack+0x000000444e22)
    #1 main /home/jason/github/ConAnalysis/TESTS/mysql-35589/bug35589.c:213:3 (attack+0x0000004a5805)

  Location is global 'num_queries' of size 8 at 0x0000014b0390 (attack+0x0000014b0390)

  Thread T4 (tid=18010, running) created by main thread at:
    #0 pthread_create /home/jason/downloads/llvm-3.8.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:954 (attack+0x000000447773)
    #1 main /home/jason/github/ConAnalysis/TESTS/mysql-35589/bug35589.c:197:7 (attack+0x0000004a5727)

SUMMARY: ThreadSanitizer: data race /home/jason/github/ConAnalysis/TESTS/mysql-35589/bug35589.c:214:29 in main
==================
